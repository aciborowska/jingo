meet some thread related issue in pre-commit test