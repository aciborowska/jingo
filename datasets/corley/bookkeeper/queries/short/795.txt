Race condition causes writes to hang if ledger is fenced