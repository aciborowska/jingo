In ServerConfiguration#getZkHost we use conf.getString(ZK_HOST, "localhost") to get the zk host string which will only return the part before comma, need to change to getList.