provide better interface to support both mode, like java client.