As the summary says, we drain the pending adds after recording prevLength, which means that prevLength will be too long and may be written to the metadata if there is a version conflict.