should use freeaddrinfo to free struct addrinfo, instead of using free directly.