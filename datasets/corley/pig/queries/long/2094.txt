Like the define command, the register command should be processed by Query Parser. This will allow the register command be used inside macros (since macro can only contain commands that can be processed by Query Parser).