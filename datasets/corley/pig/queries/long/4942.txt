The mvn-install ant target which allows pig artifacts to be placed in the local repository became broken by PIG-4499 in Pig 0.15. That patch removed the mvn-jar target which the mvn-install target had dependent on. Instead, the jar-h12 target was used as a replacement. However, this target is insufficient as it does not move built jars to their expected output locations and does not handle well the case where we are building Pig only for Hadoop 2 via the -Dhadoopversion=23 option. 

There is an important detail to make note. The jar-h12 target uses propertyreset scripts to change the hadoopversion property before it calls ant targets to change the behavior of the ant targets. These propertyreset scripts do nothing when the -Dhadoopversion option is provided through the command line. This is because ant does not allow overwriting user properties.