For the following query:

A = load 'x' as ( a:bag
{T:tuple(u:int,v:chararray)}
, b:int );
B = foreach A 
{ T = filter a by u > b; generate T; }
;
Store B into 'y';

Pig currently gives the following error:

2011-04-29 12:43:23,979 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1025: <line 5, column 36> Invalid field projection. Projected field [b] does not exist in schema: u:int,v:chararray.

However, this is a reasonable usage. Without this support, user has to flatten the bag, do filtering, and then re-bag. Therefore, it's very useful to allow user to refer fields from the input relation in the nested plan.