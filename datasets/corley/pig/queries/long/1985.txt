I've been told this is because Utils.getSchemaFromString does not use the new parser to parse the schema, so we should update the impl to use the new parser:


Utils.getSchemaFromString("f: map[]")


results in: (org.apache.pig.impl.logicalLayer.schema.Schema) 
{f: map[]}


Utils.getSchemaFromString("f: map[int]")


results in: An exception occurred: org.apache.pig.impl.logicalLayer.parser.ParseException
..
org.apache.pig.impl.logicalLayer.parser.ParseException: Encountered " "map" "map "" at line 1, column 4.
Was expecting one of:
    "int" ...
    "long" ...
    "float" ...
    "double" ...
    "chararray" ...
    "bytearray" ...
    "int" ...
    "long" ...
    "float" ...
    "double" ...
    "chararray" ...
    "bytearray" ...	 