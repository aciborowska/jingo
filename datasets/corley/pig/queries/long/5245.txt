  The test is supposed to run two tests in parallel, and one when fails other should be killed when stop on failure is configured. But the test is actually running only job at a time and based on the order in which jobs are run it is passing. This is because of the capacity scheduler configuration of the MiniCluster. It runs only one AM at a time due to resource restrictions. In a 16G node, when the first job runs it takes up 1536 (AM) + 1024 (task) memory.mb. Since only 10% of cluster resource is the default for running AMs and a single AM already takes up memory close to 1.6G, second job AM is not launched.