Merge changes from trunk to "types" branch