incorrect return codes on failure when using -f or -e flags