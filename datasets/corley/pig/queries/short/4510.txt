empty result set after foreach