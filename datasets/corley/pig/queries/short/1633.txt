Using an alias withing Nested Foreach causes indeterminate behaviour