NullPointerException accessing a field of an invalid bag from a nested foreach