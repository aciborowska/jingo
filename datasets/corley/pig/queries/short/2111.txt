UDF registration for nested classes is unintuitive