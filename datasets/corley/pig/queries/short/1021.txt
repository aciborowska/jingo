Cast of nested types does work as expected