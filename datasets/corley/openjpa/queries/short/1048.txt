Dirty check fails with ConcurrentModificationException during rollback