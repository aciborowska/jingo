"ON DELETE SET NULL" is getting overridden if the foreign column is "NOT NULL".
This behaviour was introduced in Revision 449532 of the DBDictionary (getForeignKeyConstraintSQL). I think this is implemented wrongly - you're checking the wrong side of the relation.