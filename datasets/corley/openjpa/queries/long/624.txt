The hashCode method of QueryKey is implemented to make use of _candidateClassName, _query and _params while the equals method also considers _rangeStart, _rangeEnd and some other stuff. This makes them inconsistent and while this seems to work in a CacheMap it makes it unusable in some other environment e.g. a custom QueryCache implementation.