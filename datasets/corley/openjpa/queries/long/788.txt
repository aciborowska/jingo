There is an error loading entity class while parsing object-relational mapping XML file with classloader.  It uses environment classloader instead of application classloader to load entity class when object-relational mapping XML file is parsed. 

OPENJPA-40 has introduced a change in PersistenceMetaDataFactory and sets the classloader to envClassLoader if it is not null instead of loader passed as method input parameter and there is NPE fixed with SVN change number 447112 to use envClassLoader only if it not null. 