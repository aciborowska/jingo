When issuing a JPQL query after changing data that is involved in the access path of the query, OpenJPA must either flush before querying (and therefore obtain a Connection), or load all instances of the potentially-dirty classes into memory and evaluate the query in memory.

Now that OpenJPA supports savepoints, we should provide an option to set savepoint, flush, query, and then roll the savepoint back.