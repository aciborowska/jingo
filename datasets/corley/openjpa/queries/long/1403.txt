Current OpenJPA trunk implementation doesn't have full support for using OpenJPA in OSGi containers. For example when OSGi bundle which use OpenJPA deployed, OpenJPA persistence provider cannot locate the persistence.xml in that bundle due to class loading differences in OSGi environment. EclipseLink has resolved this by using bundle listeners and JPA specific OSGi bundle header. Patch provided in this JIRA solve issues in OpenJPA in OSGi environment by following method used in EclipseLink. But there is a problem with current OpenJPA implementation which caused me to add Dynamic-Imports header to OpenJPA OSGi bundle to allow loading classes from bundles that use OpenJPA. I think current OpenJPA implementation doesn't provide support to replace central class load to support loading classes from bundles which use OpenJPA. If we have that support we'll be able to remove Dynamic-Imports and make OpenJPA OSGi bundle follow OSGi best practices .

Please review the path and provide your ideas about this patch. 