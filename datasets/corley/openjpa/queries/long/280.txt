When the PCEnhancer.getPersistenceCapableOwner method was altered, the side effect on the "owner" parameter with the old code was removed with the change in 532137.  The patch does the right thing by using f.getDeclaringClass() instead of "owner" when looking up the metadata.