Fix race condition in testWatchAutoResetWithPending