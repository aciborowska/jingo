race condition in asynchronous create