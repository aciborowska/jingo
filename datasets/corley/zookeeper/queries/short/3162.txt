Broken lock semantics in C client lock-recipe