Race condition in client close() operation