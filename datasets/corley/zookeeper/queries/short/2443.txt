Invalid Memory Access (SEGFAULT) and undefined behaviour in c client