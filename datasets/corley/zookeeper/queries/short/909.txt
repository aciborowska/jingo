Extract NIO specific code from ClientCnxn