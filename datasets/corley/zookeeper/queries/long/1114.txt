The patch is provide according to wiki[1]. The source follows the description at tutorial[2]. 

However, from the mailing list it shows that this version is not optimized[3]. So is there any chance anyone can point out which algorithm may provide better result for this construct? I am happy to work on it, though it may take some time.  

[1]. http://wiki.apache.org/hadoop/ZooKeeper/SoC2010Ideas#Concurrent_Primitives_Library
[2]. http://zookeeper.apache.org/doc/current/zookeeperTutorial.html#sc_barriers
[3]. http://mail-archives.apache.org/mod_mbox/zookeeper-user/201102.mbox/%3C87184214-59D4-4D64-A884-A6F07CE0F239@yahoo-inc.com%3E