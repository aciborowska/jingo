NettyServerCnxn.close() neglects to call zkServer.removeCnxn the way NIOServerCnxn.close() does. Also, WatchLeakTest does not test watch leaks in Netty.