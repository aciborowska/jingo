These patches are improvements to test cases and small bug fixes after ZOOKEEPER-1045 was committed to branch-3.4. We need port them to branch-3.5 to close the loop.