Currently, if we use the default leader election, but we do not provide an election port for every server, then zookeeper servers simply crash. I'm attaching a patch to output an error message warning the user of the configuration problem. It might be a better idea to through an exception upon fatal configuration problems, but QuorumPeerConfig.parse() currently throws no exception, so we might postpone such a change  until after the 3.0.0 release.