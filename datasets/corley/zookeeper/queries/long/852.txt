In ZOOKEEPER-849 we observed, that the validation code and the documentation of allowed characters is out of sync. Surely the validation is to permissive. The issue is fixed for the java client in ZOOKEEPER-849.
As I'm not familiar with the C client code, I fill this separate issue in the hope that somebody may have a look at it.