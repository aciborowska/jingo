the tests for the C-API are mostly for the multithreaded API. we need to get better coverage for the single threaded API.