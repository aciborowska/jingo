The login object in ZooKeeperSaslClient is static, which means that if you try to create another client for tests, the login object will be the first one you've set for all runs. I've experienced this with 3.4.6.