Nulls produced when if statement says otherwise