Infinite loop in random generation when contradiction not detected