sql:
select count(1) count from (select DISTINCT
        header.id,
        header.uuid,
        header.machining_no,
        header.machining_type,
        header.tenant_id,
        header.warehouse_no,
        header. STATUS,
        header.create_user,
        header.update_user,
        header.create_time,
        header.update_time,
        header.is_delete,
        header.memo,
        header.oper_location_no,
        header.fail_reason,
        header.order_origin,
        header.end_time
        from machining_header header
        LEFT JOIN machining_src_detail src ON src.machining_no = header.machining_no
        AND src.tenant_id = header.tenant_id
        AND src.warehouse_no = header.warehouse_no
        LEFT JOIN machining_dest_detail dest ON dest.machining_no = header.machining_no
        AND dest.tenant_id = header.tenant_id
        AND dest.warehouse_no = header.warehouse_no
        where
        header.is_delete=0      
            and header.machining_no = 'MA18012110000001'         
        and header.tenant_id = 'aa'        
            and header.warehouse_no = '26' ) t

use version 4.0.0, it can route to right db, but use 4.1.1, it  route to wrong db
mybatis + spring 