XPath evaluation ending in function gives incorrect result