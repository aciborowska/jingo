Arrow operator in user-defined function causes NPE