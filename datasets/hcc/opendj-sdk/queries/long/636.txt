As noticed by Chris Ridd in OPENDJ-625, under some rare circumstances, the naming attribute in the entry differs from the RDN value after a ModDN was done.

1.) Changing the case of the new RDN Value (Only possible with patch provided in OPENDJ-625), deleteOldRDN is set to "0"


dn: uid=user.0,ou=People,dc=example,dc=com
changetype: moddn
newrdn: uid=USER.0
deleteoldrdn: 0
newsuperior: ou=People,dc=example,dc=com



Results in:


dn: uid=USER.0,ou=People,dc=example,dc=com
uid: user.0 



2.) Adding an additional naming attribute and change the case of an existing value, deleteOldRDN is set to "0"


dn: uid=user.1,ou=People,dc=example,dc=com
changetype: moddn
newrdn: uid=USER.1+cn=test
deleteoldrdn: 0
newsuperior: ou=People,dc=example,dc=com



Results in:


dn: uid=USER.1+cn=test,ou=People,dc=example,dc=com
uid: user.1



3.) Adding an additional naming attribute which is already part of the entry but with changed case, deleteOldRDN setting is not relevant


dn: uid=user.3,ou=People,dc=example,dc=com
changetype: moddn
newrdn: uid=user.3+sn=atrc
deleteoldrdn: 1
newsuperior: ou=People,dc=example,dc=com



Results in:


dn: uid=user.3+sn=atrc,ou=People,dc=example,dc=com
sn: Atrc



I'm currently working on a patch to fix this issue.