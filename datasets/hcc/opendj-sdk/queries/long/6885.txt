Found with rev (6421aa1a501)

In the pipeline, we are seeing randomly the following errors in server logs:

--- Check for error patterns in "/home/jenkins/workspace/OpenDJ-build_master-CPMER56E632EMKNXZEURRUYWFHY72MGZDGZHN7BYLM5SGO6GS6PA/results/20191220-104258/proxy_group/ReplicationDiscovery/RS2/opendj/logs/errors" file ---

12:51:28.082INFO(OPENDJ-1135-DS) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=178 msg=Directory server 0 was attempting to connect to replication server rs2 but has disconnected in handshake phase. Error: SocketException(no more data)
12:51:28.083INFO(OPENDJ-1135-DS) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=178 msg=Directory server 0 was attempting to connect to replication server rs2 but has disconnected in handshake phase. Error: SocketException(no more data)
12:51:28.094WARN(ERROR) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=119 msg=Directory server DS(rs2) encountered an unexpected error while connecting to replication server openam.example.com:8992 for domain "dc=com": SSLException: Read timed out (Alert.java:127 TransportContext.java:320 TransportContext.java:263 TransportContext.java:258 SSLTransport.java:137 SSLSocketImpl.java:1152 SSLSocketImpl.java:1063 SSLSocketImpl.java:402 ReplSessionSecurity.java:103 Session.java:65 ReplicationBroker.java:888 ReplicationBroker.java:735 ReplicationBroker.java:690 ReplicationBroker.java:1743 ReplicationBroker.java:1923 ReplicationDomain.java:751 ReplicationDomain.java:2041 Thread.java:834)12:51:28.095

INFO--- Check for error patterns in "/home/jenkins/workspace/OpenDJ-build_master-CPMER56E632EMKNXZEURRUYWFHY72MGZDGZHN7BYLM5SGO6GS6PA/results/20191220-104258/proxy_group/ReplicationDiscovery/RS2/opendj/logs/replication" file ---
12:51:28.095INFO(OPENDJ-1135-DS) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=178 msg=Directory server 0 was attempting to connect to replication server rs2 but has disconnected in handshake phase. Error: SocketException(no more data)
12:51:28.096INFO(OPENDJ-1135-DS) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=178 msg=Directory server 0 was attempting to connect to replication server rs2 but has disconnected in handshake phase. Error: SocketException(no more data)
12:51:28.105WARN(ERROR) [20/Dec/2019:11:47:39 +0000] category=SYNC severity=ERROR msgID=119 msg=Directory server DS(rs2) encountered an unexpected error while connecting to replication server openam.example.com:8992 for domain "dc=com": SSLException: Read timed out (Alert.java:127 TransportContext.java:320 TransportContext.java:263 TransportContext.java:258 SSLTransport.java:137 SSLSocketImpl.java:1152 SSLSocketImpl.java:1063 SSLSocketImpl.java:402 ReplSessionSecurity.java:103 Session.java:65 ReplicationBroker.java:888 ReplicationBroker.java:735 ReplicationBroker.java:690 ReplicationBroker.java:1743 ReplicationBroker.java:1923 ReplicationDomain.java:751 ReplicationDomain.java:2041 Thread.java:834) 

This one occurred while we were setting the global configuration group id parameter to server rs2.

Â 

/home/jenkins/workspace/OpenDJ-build_master-CPMER56E632EMKNXZEURRUYWFHY72MGZDGZHN7BYLM5SGO6GS6PA/results/20191220-104258/proxy_group/ReplicationDiscovery/RS2/opendj/bin/dsconfig -h openam.example.com -p 4448 -D "cn=myself" -w password -X set-global-configuration-prop --set group-id:2 -n 

But we also got it at different other places, a bit randomly.
 In this specific test, we are setting a split ds rs replication topology with data, and configuring group id to group ds1 with rs1 and ds2 with rs2. Then we put a proxy in front of it with a preferred group id.

This test is the following:

./run-pybot.py -nvs proxy_group.ReplicationDiscovery -t Verify_Preferred_Group_Id_Is_Chosen opendj

