Searches can be evaluated against VLV indexes even if there is no VLV request control. If the search's base DN, filter, and scope match the index configuration, and there is an appropriate server side control provided with the request, then the search can use the VLV index. In this case the search invokes the VLVIndex#evaluateNonVLVRequest() method:



private EntryIDSet evaluateNonVLVRequest(final ReadableTransaction txn, final StringBuilder debugBuilder)
{
  try (Cursor<ByteString, ByteString> cursor = txn.openCursor(getName()))
  {
    final long[] selectedIDs = readRange(cursor, getEntryCount(txn), debugBuilder);
    return newDefinedSet(selectedIDs);
  }
}



We should limit the range query based on a number of factors rather than scanning the entire index (see getEntryCount() call above):


	search resource limits, in particular the size limit if provided
	the user's resource limits: size limit and look through limit
	the page size if the search is configured to use simple paged results.

