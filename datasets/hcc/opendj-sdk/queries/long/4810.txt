When a connection handler like HTTP Connection handler, is configured during setup phase it is possible to retrieve metrics of this handler, however when it is configured manually after setup the same operation is not possible. Response doesn't contain any metrics to those connection handlers which are not install during setup.

Attaching script to reproduce the problem with HTTP Connection handler, however it is possible to reproduce also with LDAP Connection Handler.

Example of rest command to retrieve all metrics:

http://localhost:8080/metrics/api?_queryFilter=true

Script usage:

1. Copy zip archive to the same folder as the script

2. Run a script

  a. To configure http handler during setup phase run:

./reproduce.sh

At the end you can see an output of curl.

  b. To configure http handler after setup phase run:

./reproduce.sh postsetup

At the end is no output from curl.

 