Found with OpenDJ 4.0.0 rev d60b0a6e2a91c2739696a8b2f4758d1426d380d6

We setup a server with generated data, create a vlv index and rebuild it.


./opendj/bin/dsconfig -h localhost -p 4444 -D "cn=myself" -w password -X create-backend-vlv-index --backend-name userRoot --type generic --index-name test_vlv_index  --set base-dn:dc=example,dc=com --set filter:"(givenName=*)" --set scope:whole-subtree --set sort-order:"+givenName" -n
./opendj/bin/rebuild-index -h localhost -p 4444 -D "cn=myself" -w password -X -b dc=example,dc=com --rebuildDegraded



Then we check it with the debugsearchindex:

./opendj/bin/ldapsearch -h localhost -p 1389 -D "cn=myself" -w password -T -b "dc=example,dc=com" --sortOrder +givenName -G 0:6:2:0 ""(givenName=*)"" givenName debugsearchindex



We expect to get this in the output:

vlv=[INDEX:vlv.test_vlv_index][COUNT:7] final=[COUNT:7]



But instead, we get this:


dn: cn=debugsearch
debugsearchindex: filter=(givenName=*)[INDEX:givenName.presence][NOT-INDEXED] scope=sub[COUNT:202] final=[COUNT:202]

# VLV Target Offset:  2
# VLV Content Count:  200



