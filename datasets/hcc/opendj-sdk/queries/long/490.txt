Create a new instance

	/opt/opendj/setup --cli --ldapPort 389 --adminConnectorPort 4444
--rootUserDN cn=Directory\ Manager --rootUserPassword password --no-prompt
--noPropertiesFile --quiet



Add a backend DB

	/opt/opendj/bin/dsconfig create-backend --set base-dn:dc=test,dc=com
--set enabled:true --type local-db --port 4444 --hostname `hostname`
--backend-name test.com --bindDN cn=Directory\ Manager --bindPassword
password --no-prompt --trustAll



Add some entries into the DB

	/opt/opendj/bin/ldapmodify --bindDN cn=Directory\ Manager --bindPassword
password --defaultAdd
dn: dc=test,dc=com
dc: test
objectClass: domain
objectClass: top



Processing ADD request for dc=test,dc=com
ADD operation successful for DN dc=test,dc=com
dn: ou=people,dc=test,dc=com
objectClass: top
objectClass: organizationalUnit
ou: people

Processing ADD request for ou=people,dc=test,dc=com
ADD operation successful for DN ou=people,dc=test,dc=com
dn: ou=group,dc=test,dc=com
objectClass: top
objectClass: organizationalUnit
ou: group

Processing ADD request for ou=group,dc=test,dc=com
ADD operation successful for DN ou=group,dc=test,dc=com

Remove the DB

	/opt/opendj/bin/dsconfig delete-backend --port 4444 --hostname `hostname`
--backend-name test.com --bindDN cn=Directory\ Manager --bindPasswordFile
/tmp/pwd --no-prompt --trustAll



Now look in the OpenDJ DB directory

	ls -ltrh /opt/opendj/db
total 4.0K
drwx------. 2 root root 4.0K May  9 13:04 test.com



Okay, so maybe the directory was left behind

	ls -ltrh /opt/opendj/db/test.com/
total 16K
rw-rr-. 1 root root    0 May  9 12:59 je.lck
rw-rr-. 1 root root 2.2K May  9 13:04 je.info.0
rw-rr-. 1 root root  11K May  9 13:04 00000000.jdb



Now re-create the same backend DB

	/opt/opendj/bin/dsconfig create-backend --set base-dn:dc=test,dc=com
--set enabled:true --type local-db --port 4444 --hostname `hostname`
--backend-name test.com --bindDN cn=Directory\ Manager --bindPassword
password --no-prompt --trustAll



And the real surprise is......

	/opt/opendj/bin/ldapsearch --bindDN cn=Directory\ Manager --bindPassword
password --baseDN "dc=test,dc=com" "objectclass=*"
dn: dc=test,dc=com
dc: test
objectClass: domain
objectClass: top



dn: ou=people,dc=test,dc=com
ou: people
objectClass: organizationalUnit
objectClass: top

dn: ou=group,dc=test,dc=com
ou: group
objectClass: organizationalUnit
objectClass: top