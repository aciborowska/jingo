The Supportextract tool can fail to execute properly in a cloud environment.

The extract exits while reading &{server.id} in the config file:

opendj@cloud:~ (devops)$ bin/supportextract --bindDn "cn=Directory Manager" --bindPassword password --outputDirectory /opt/opendj/data
 
 2019-11-07 18:41:12 INFO The instance is running
 2019-11-07 18:41:12 INFO No value was provided for --jdkToolsDirectory, JDK tool directory is set to /usr/lib/jvm/java-8-openjdk-amd64/bin
 2019-11-07 18:41:12 INFO VERSION: 6.5.2.210e98489950374e28f1f979ecf640211c7fdeefOther: An error occurred while trying to initialize the core Directory Server
 configuration: An error occurred while trying to decode the managed object
 configuration entry cn=config: The Global Configuration could not be decoded
 due to the following reason: The configuration expression "&{server.id}
" could
 not be resolved for the property "server-id". The token(s) used in this
 expression must be defined at runtime
 The following archive has been created :
 /opt/opendj/data/opendj-support-data-20191107-064112.zip
 command terminated with exit code 80
 opendj@cloud:~ (devops)$


Zip contents

opendj; Downloads /$ unzip -l opendj-support-data-20191107-064112.zip
 Archive: opendj-support-data-20191107-064112.zip
 Length Date Time Name
 --------- ---------- ----- ----
 0 11-07-2019 18:41 support-data/
 275 11-07-2019 18:41 support-data/supportextract.log
 --------- -------
 275 2 files

 The issue is not reproducible with DS 7.0

The instance is running
No value was provided for --jdkToolsDirectory, JDK tool directory is set to
/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/bin
VERSION: 7.0.0.2b71b454f0540fd673fc1cb55bc529c4c6766ba2
/opt/instances/data/dev/opendj-support-data-20191107-141114.zip.lock
Collecting the monitoring info from cn=monitor
Collecting process statistics
Cannot extract process statistics (by running "top" command) on OS 'Mac OS X'.
Only 'jstack' dump samples will be collected
- Generating stack dump, sample number : 1
...
...


 

 

 