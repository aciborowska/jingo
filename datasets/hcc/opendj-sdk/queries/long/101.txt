[24/Mar/2011:23:13:18 +0100] category=PLUGIN severity=SEVERE_ERROR msgID=7602281 msg=The post-synchronization MODIFYDN plugin defined in configuration entry cn=UID Unique Attribute,cn=Plugins,cn=config threw an exception when it was invoked for connection -309 operation 16629:  NullPointerException (UniqueAttributePlugin.java:771 PluginConfigManager.java:4888 LocalBackendModifyDNOperation.java:666 LocalBackendWorkflowElement.java:571 WorkflowImpl.java:197 WorkflowTopologyNode.java:100 ModifyDNOperationBasis.java:634 LDAPReplicationDomain.java:2699 NamingConflictTest.java:144 NativeMethodAccessorImpl.java:-2 NativeMethodAccessorImpl.java:39 DelegatingMethodAccessorImpl.java:25 Method.java:597 MethodHelper.java:611 Invoker.java:469 Invoker.java:563 Invoker.java:830 TestMethodWorker.java:127 TestMethodWorker.java:110 TestRunner.java:683 TestRunner.java:560 ...)

[24/Mar/2011:23:13:18 +0100] category=PLUGIN severity=SEVERE_ERROR msgID=7602281 msg=The post-synchronization MODIFYDN plugin defined in configuration entry cn=Test Unique Attribute,cn=Plugins,cn=config threw an exception when it was invoked for connection -309 operation 16629:  NullPointerException (UniqueAttributePlugin.java:771 PluginConfigManager.java:4888 LocalBackendModifyDNOperation.java:666 LocalBackendWorkflowElement.java:571 WorkflowImpl.java:197 WorkflowTopologyNode.java:100 ModifyDNOperationBasis.java:634 LDAPReplicationDomain.java:2699 NamingConflictTest.java:144 NativeMethodAccessorImpl.java:-2 NativeMethodAccessorImpl.java:39 DelegatingMethodAccessorImpl.java:25 Method.java:597 MethodHelper.java:611 Invoker.java:469 Invoker.java:563 Invoker.java:830 TestMethodWorker.java:127 TestMethodWorker.java:110 TestRunner.java:683 TestRunner.java:560 ...)

[24/Mar/2011:23:13:18 +0100] category=CORE severity=SEVERE_ERROR msgID=262536 msg=An unexpected error occurred while notifying a change notification listener of a modify DN operation:  NullPointerException(AuthenticatedUsers.java:295)


When a conflict occurs, the synchronization code causes the operation processing to stop before the updated entry has been set. This then causes these plugins to fail because they assume that the updated entry is non-null if the operation has succeeded.

The fix is not as straightforward as it first seems, since the conflict resolution has determined that the operation is a NO-OP: in which case, has it succeeded or failed? If it has succeeded, what should the updated entry be? In my opinion, we should not invoke these plugins if the operation is a no-op.