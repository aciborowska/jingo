Found with OpenDJ 4.0.0 rev (2bb5fa4c5e1)

We setup and start a server using the embedded api examples.
We import some data,  create an index, stop the server and then try to rebuild the index by implementing the rebuildIndex class provided by this embedded api:


:\jdk1.7\bin\java.exe -cp E:\jenkins\workspace\OpenDJ-Tests-Master-Daily-STD\Configs\archives\opendj-embedded-server-examples-4.0.0-SNAPSHOT.jar;E:\jenkins\workspace\OpenDJ-Tests-Master-Daily-STD\Configs\results\20161202-030710\embedded_api_group\API\opendj\lib\opendj-slf4j-adapter.jar;E:\jenkins\workspace\OpenDJ-Tests-Master-Daily-STD\Configs\results\20161202-030710\embedded_api_group\tmp\classes RebuildIndexExample E:\jenkins\workspace\OpenDJ-Tests-Master-Daily-STD\Configs\results\20161202-030710\embedded_api_group\embedded\opendj

  

here is the piece of code for rebuildindex


...
/** Rebuild a specific index or all of them. */
    static void rebuildIndexTest(final EmbeddedDirectoryServer server, final String baseDn)
            throws EmbeddedDirectoryServerException {

        server.rebuildIndex(
                rebuildIndexParams()
                    .baseDN(baseDn));

    }
...



It fails with 

ERROR: -- rc -- returned 1, expected 0 -- stdout -- Password for user 'cn=Directory Manager': -- stderr -- You have provided options for scheduling this operation as a task but options provided for connecting to the server's tasks backend resulted in the following error: 'Connect Error'



because the default behaviour has changed and by default now, rebuild-index requires an offline option if the server is stopped.