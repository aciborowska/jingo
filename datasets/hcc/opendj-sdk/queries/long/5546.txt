Found with rev (32641bff6c6)

We set up a DJ with some data.
We generate a backup with -A option:

./DJ1/opendj/bin/backup -h nameserver.example.com -p 4444 -D "cn=Directory Manager" -w password -X -n userRoot -d /tmp/backup1 --hash



Then we stop DJ and restore this backup:


./DJ1/opendj/bin/stop-ds

./DJ1/opendj/bin/restore --offline -d /local/GIT/pyforge/results/20181003-164658/backends_group/tmp/backup1 -n
 ERROR:
-- rc --
returned 1, expected to be in [0]
-- stdout --

-- stderr --
[03/10/2018:16:47:24 +0200] category=TOOLS seq=0 severity=SEVERE msg=An unexpected error occurred while attempting to restore backup 20181003144719Z from /tmp/backup1:  Other: An error occurred while attempting to obtain the SHA-1 message digest to create the hash for the backup: NullPointerException (BackupManager.java:347 BackupManager.java:342 BackupManager.java:326 BackupManager.java:154 BackupManager.java:526 BackupManager.java:1149 JEStorage.java:1058 TracedStorage.java:463 BackendImpl.java:630 RestoreDb.java:272 TaskTool.java:282 RestoreDb.java:157 TaskTool.java:256 Utils.java:972 Utils.java:949 RestoreDb.java:82)


This is a regression.

To reproduce:


./run-pybot.py -n -s backends_group -t  create_a_backup_with_a  opendj

