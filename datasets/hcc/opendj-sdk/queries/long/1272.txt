Found using revision 10082.

Scenario

	install 2 servers
	enable replication (dsreplication enable and initialize-all)
	perform some operations (search, add,...)
	do a replication pre-external-initialization on the first instance
	stop the first instance
	check logs for specific errors (FATAL_ERROR, SEVERE_ERRORS, Exception,...)



=> in the logs/errors file for the second server we have the following traces:

...
[07/Jan/2014:16:22:30 +0100] category=CORE severity=FATAL_ERROR msgID=327820 msg=An uncaught exception during processing for thread Directory Server Shutdown Hook has caused it to terminate abnormally.  The stack trace for that exception is:  (JE 5.0.97) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.97) /tmp/opendj1/changelogDb Thread interrupted prior to logging the commit THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed. (ThreadInterruptedException.java:99 EnvironmentImpl.java:1594 Database.java:2154 Database.java:1939 ReplicationDbEnv.java:453 ReplicationDbEnv.java:431 JEChangelogDB.java:408 ReplicationServer.java:704 ReplicationServerListener.java:113 MultimasterReplication.java:557 DirectoryServer.java:7969 DirectoryServerShutdownHook.java:76)
[07/Jan/2014:16:22:30 +0100] category=SYNC severity=SEVERE_ERROR msgID=-1 msg=While clearing the database 8036 o=example , the following error happened: (JE 5.0.97) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.97) /tmp/opendj1/changelogDb Thread interrupted prior to logging the commit THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed. (JE 5.0.97) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.97) /tmp/opendj1/changelogDb Thread interrupted prior to logging the commit THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed. (ReplicationDbEnv.java:535 ReplicationDbEnv.java:495 ReplicationDB.java:859 JEReplicaDB.java:637 JEChangelogDB.java:566 ReplicationServerDomain.java:2187 ReplicationServerDomain.java:1913 ReplicationServerDomain.java:1957 ServerHandler.java:1206 ServerReader.java:188)
[07/Jan/2014:16:22:30 +0100] category=CORE severity=NOTICE msgID=458891 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID 327820):  An uncaught exception during processing for thread Directory Server Shutdown Hook has caused it to terminate abnormally.  The stack trace for that exception is:  (JE 5.0.97) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.97) /tmp/opendj1/changelogDb Thread interrupted prior to logging the commit THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed. (ThreadInterruptedException.java:99 EnvironmentImpl.java:1594 Database.java:2154 Database.java:1939 ReplicationDbEnv.java:453 ReplicationDbEnv.java:431 JEChangelogDB.java:408 ReplicationServer.java:704 ReplicationServerListener.java:113 MultimasterReplication.java:557 DirectoryServer.java:7969 DirectoryServerShutdownHook.java:76)

