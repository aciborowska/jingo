Using an attribute with telephoneNumber syntax in DN creates incorrect entry DN. To reproduce - 

Setup a new instance of DS

Import the attached 99-user.ldif schema 

Import the attached user ldif

Search the user entry and note the entryDN is not correct.

 


bin/ldapsearch -h localhost.localdomain -p 13899 -D "cn=Directory Manager" -w password -s sub -b 'o=example' "(msisdn=12345678912)" +
dn: msisdn=12345678912,ou=users,ou=people,o=example
entryDN: msisdn=#3132333435363738393132,ou=users,ou=people,o=example


 
The DN on the server is stored incorrectly, returned incorrectly but presented correctly with DS ldapsearch tool. Other ldaptools (such as default OS ones) presents the DN as returned (and identical to the entryDN operational attribute).



$ /usr/bin/ldapsearch -x -D cn=directory\ manager -w secret12 -p 1389 -h localhost -b o=example 'MSISDN=*'
# extended LDIF
#
# LDAPv3
# base <o=example> with scope subtree
# filter: MSISDN=*
# requesting: ALL
#

# #3132333435363738393132, example.com
dn: msisdn=#3132333435363738393132,dc=example,dc=com
objectClass: customer
objectClass: top
MSISDN: 12345678912

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1

