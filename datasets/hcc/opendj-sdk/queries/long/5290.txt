Found with a test created due to issue OPENDJ-5210. 
Server version and revision: 6.5.0-SNAPSHOT (c9327c5a58e)

To reproduce the issue run:


./run-pybot.py -v -c stress -s customer.MemoryLeakRequestWhileBindInProgress OpenDJ



The test use 6.5.0-SNAPSHOT with JAVA_ARGS set to "-Xms1G -Xms1G".  The server itself is under a load to be slow. A searchrate is running in a background and also a bindleak client which is hammering the DJ and it should slow down the server.

Commands:

   searchrate

 


./opendj-ldap-toolkit/bin/searchrate -h opendj.example.com -p 1389 -D "cn=Directory Manager" -w password -d 3600 -b uid=user.{1},ou=People,dc=com -S -g "rand(0,999)" -c 40 -t 3 -i 30 -F "objectclass=*"

   bindclient: 

 


./bindleak.jar opendj.example.com 1389 uid=user.0,ou=people,dc=com password	


Once those two commands are executed the test perform regularly an ldapsearch to check server is healthy. The whole run takes 60 minutes.

 

The WARNING appears during one of the ldapsearch after approximately 30 minutes:

 


[17/Jul/2018:13:09:19 +0200] category=org.opends.messages.external severity=WARNING msgID=1 msg=GRIZZLY0029: Error during Processor execution. Connection=TCPNIOConnection{localSocketAddress={/172.16.204.10:1389}, peerSocketAddress={/172.16.204.10:33408}} ioEvent=WRITE processor=DefaultFilterChain@3cc27ea1 {TransportFilter@50cf1d4e <-> LDAPAcceptor([TCPNIOConnection{localSocketAddress={/0:0:0:0:0:0:0:0:1389}, peerSocketAddress=null}]) <-> StartTlsFilter@4c6f41dd <-> SaslFilter@5710207c <-> ServerCodec@45b694ab <-> GrizzlyLdapSocketFilter@6d3bc43e} exception=NullPointerException (ProcessorExecutor.java:145 ProcessorExecutor.java:220 ProcessorExecutor.java:86 DefaultFilterChain.java:414 NIOConnection.java:431 NIOConnection.java:405 GrizzlyLdapSocketFilter.java:245 GrizzlyLdapSocketFilter.java:158 ScalarSubscription.java:55 GrizzlyLdapSocketFilter.java:238 FlowableJust.java:34 Flowable.java:13234 Flowable.java:13180 Flowable.java:13289 LdapServer.java:552 LdapServer.java:458 LdapClientConnection.java:475 LdapClientConnection.java:457 CallbackCompletableObserver.java:54 CompletableSubject.java:136 LdapClientConnection.java:580


 

 