Hi,
I'm currently porting some older OpenDJ client code based on SDK version 3.0.0-M2 to the latest 3.0.0-SNAPSHOT. I've been updating the code to use the new versions of the various APIs that have changed, so far so good. However it seems getRequestID() now behaves differently.

The old code I'm updating looks like this:


        FutureResult<SearchResultEntry> futureResult = cnxn.searchSingleEntryAsync(searchReq, handler);
        ...
        final int txnId = futureResult.getRequestID();



It gets txnId from futureResult and uses that to tie in the responses to the searches later on.
So I've updated the code to reflect the new API (using OPENDJ-1536 as a guide) and came up with something like below.



        LdapPromise<SearchResultEntry> promise = cnxn.searchSingleEntryAsync(searchReq);
        ...
        final int txnId = promise.getRequestID();



I noticed that getRequestID() is now always returning -1.

When I step through the code with Eclipse I can see searchSingleEntryAsync() internally calling GrizzlyLDAPConnection.searchAsync() that returns a wrapped promise with RequestID populated OK. But the outer promise seems to lose this id.