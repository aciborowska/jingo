With 6.5.0-SNAPSHOT rev. af0794a4c7372acc7e94e52959b46158e206eb9e in 2xDSRS topology, we are not able to use "Automatically trust" option, when requesting status of replication.

Two DJ instances configured in DSRS topology:


./setup directory-server \
 --instancePath ${PWD} \
 --rootUserDn cn=Directory\ Manager \
 --rootUserPassword password \
 --hostname pyforge.example.com \
 --adminConnectorPort 4444 \
 --ldapPort 1389 \
 --enableStartTls \
 --ldapsPort 1636 \
 --httpsPort 8443 \
 --addBaseEntry \
 --baseDn dc=example,dc=com



./setup directory-server \
 --instancePath ${PWD} \
 --rootUserDn cn=Directory\ Manager \
 --rootUserPassword password \
 --hostname pyforge.example.com \
 --adminConnectorPort 5444 \
 --ldapPort 2389 \
 --enableStartTls \
 --ldapsPort 2636 \
 --httpsPort 9443 \
 --addBaseEntry \
 --baseDn dc=example,dc=com



dsreplication configure \
 --host1 pyforge.example.com \
 --port1 4444 \
 --bindDn1 cn=directory\ manager \
 --bindPassword1 password \
 --host2 pyforge.example.com \
 --port2 5444 \
 --bindDn2 cn=directory\ manager \
 --bindPassword2 password \
 --replicationPort1 8989 \
 --replicationPort2 9898 \
 --baseDn dc=example,dc=com \
 --adminUid admin \
 --adminPassword password \
 --trustAll \
 --no-prompt



dsreplication initialize-all \
 --hostname pyforge.example.com \
 --port 4444 \
 --baseDn dc=example,dc=com \
 --adminUid admin \
 --adminPassword password \
 --trustAll \
 --no-prompt

 

A request for replication status fails, when we choose to automatically trust server certificate:

 


./dj1/opendj/bin/dsreplication status

>>>> Specify OpenDJ LDAP connection parameters
Directory server hostname or IP address [pyforge.example.com]:
Directory server administration port number [4444]:
How do you want to trust the server certificate?
1) Automatically trust
 2) Use a truststore
 3) Manually validate
Enter choice [3]: 1
Global Administrator User ID [admin]:
Password for user 'admin': password
Unable to connect to the server at pyforge.example.com on port 4444. Check this port is an administration port


 

 

This used to work before. 

I tried the option 3. Manually validate and this works.

 