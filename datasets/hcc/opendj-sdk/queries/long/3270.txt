Found with OpenDJ 4.0.0 rev 2a41434973ff9f172a41af0ad3704a73e2b5b327


	We set up 2 servers
	create a backend on each of them
	import some data on the first server in the newly created backend
	enable replication between these servers for this backend
	initialize replication
	we uninstall first server with the right parameters => it gets deleted successfully
	we try to uninstall the second server without specifying the referenced host name for replication and the admin account => we expect the usage of uninstall (RC=2)
but we get a 100 RC and the following error message in the tmp log file:




${INSTANCE2}/opendj/uninstall --cli -n -X --remove-all
Aug 25, 2016 3:50:12 PM org.forgerock.i18n.slf4j.LocalizedLogger info
INFO: Loaded extension from file '/tmp/DJ_DM2/opendj/lib/extensions/snmp-mib2605.jar' (build 4.0.0-SNAPSHOT, revision 2a41434973ff9f172a41af0ad3704a73e2b5b327)

See /tmp/opendj-uninstall-2280066988076635473.log for a detailed log of this operation.


and in this log:

[25/08/2016:15:46:46 +0200] category=ADMIN_TOOL seq=32 severity=INFO msg=exceptionMsgs: [Error on localhost: An error occurred connecting to the server.  Details: org.forgerock.opendj.ldap.AuthorizationExc
eption: Insufficient Access Rights: You do not have sufficient privileges to perform search operations in the Directory Server configuration]
[25/08/2016:15:46:46 +0200] category=ADMIN_TOOL seq=33 severity=WARNING msg=Exception: com.forgerock.opendj.cli.ClientException: This server is configured to replicate some of its base DNs.  There was an e
rror retrieving the references to it in the replicated servers.  Note that to be able to remove remote references you must provide Global Administrator credentials using the --adminUID and --bindPassword (
or --bindPasswordFile) options.
Check that the connection parameters you provided are correct.
If you want to uninstall the server even when remote references cannot be removed, you can use the --forceOnError option.

The error found was:

Error on localhost: An error occurred connecting to the server.  Details: org.forgerock.opendj.ldap.AuthorizationException: Insufficient Access Rights: You do not have sufficient privileges to perform sear
ch operations in the Directory Server configuration
[25/08/2016:15:46:46 +0200] category=QUICKSETUP seq=34 severity=SEVERE msg=Unexpected error: com.forgerock.opendj.cli.ClientException: This server is configured to replicate some of its base DNs.  There wa
s an error retrieving the references to it in the replicated servers.  Note that to be able to remove remote references you must provide Global Administrator credentials using the --adminUID and --bindPass
word (or --bindPasswordFile) options.
Check that the connection parameters you provided are correct.
If you want to uninstall the server even when remote references cannot be removed, you can use the --forceOnError option.

The error found was:

Error on localhost: An error occurred connecting to the server.  Details: org.forgerock.opendj.ldap.AuthorizationException: Insufficient Access Rights: You do not have sufficient privileges to perform sear
ch operations in the Directory Server configuration
[25/08/2016:15:46:46 +0200] category=QUICKSETUP seq=35 severity=INFO msg=returnValue: 100




script in attachment for reproducing the issue