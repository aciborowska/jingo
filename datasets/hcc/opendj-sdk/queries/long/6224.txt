When DS is started with a french locale (-Duser.language=.. option is not specified for the start-ds command in the config/java.properties file and LANG=fr_FR at the Unix shell level), the bin/status command fails with the following error:

./status -p 4444 -h Macaroon.local -w password --trustAll --no-prompt --bindDN “cn=directory manager”
IOException cannot happen with StringReader

Macaroon:bin $ java -version
java version “1.8.0_191"
Java(TM) SE Runtime Environment (build 1.8.0_191-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)
Macaroon:bin cyril$ ./status -V
ForgeRock Directory Services 6.5.0
Build 20181128095826


DJ was installed using that command:

./setup directory-server --hostname Macaroon.local --adminConnectorPort 4444 --rootUserDn cn=Directory\ Manager --rootUserPassword password --ldapPort 1389 --enableStartTls --ldapsPort 1636 --httpsPort 8443 --profile am-config --set am-config/amConfigAdminPassword:password --set am-config/baseDn:dc=openam,dc=forgerock,dc=com --acceptLicense



The following search shows that the server is returning JSON containing numbers formatted using the French locale, which is likely to be the issue:


ldapsearch -X --bindDN "cn=Directory Manager" -w password -p 1389 -h Macaroon.local  -b "cn=connection handlers,cn=monitor" -s sub "(objectClass=*)"
dn: cn=connection handlers,cn=monitor
objectclass: top
objectclass: ds-monitor
objectclass: ds-monitor-branch
cn: connection handlers

dn: cn=HTTPS,cn=connection handlers,cn=monitor
ds-mon-config-dn: cn=HTTPS,cn=connection handlers,cn=config
ds-mon-protocol: HTTPS
ds-mon-listen-address: 0.0.0.0:8443
ds-mon-active-connections-count: 0
ds-mon-bytes-read: {"count":9,"total":3804,000,"mean_rate":0,209,"m1_rate":0,000,"m5_rate":0,000,"m15_rate":0,000}
[...]


A workaround is to set for example start-ds.java-args=-server -Duser.language=en_US in the java.properties file and restart DJ.