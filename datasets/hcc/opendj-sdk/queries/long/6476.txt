With 7.0.0-SNAPSHOT rev. d082907910c I noticed an NPE, when restarting the server:

The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type 
org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The 
shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred 
while attempting to bootstrap the Directory Server: An error occurred while attempting to initialize the Directory Server synchronization provider 
referenced in configuration entry cn=Multimaster Synchronization,cn=Synchronization Providers,cn=config: NullPointerException (DurationUnit.java:209 
Topology.java:319 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:262 String.java:2994 
StringBuilder.java:131 ConcurrentHashMap.java:1321 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 
Topology.java:595 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 LocalizableMessage.java:526 ...)



Automated test:

python3 run-pybot.py -v -s logging_group.publisher_properties.loggingWriter -t Basic_Tests_On_Debug_Logger DJ



Manual steps:
1. setup DJ
2.  create new log publisher

./bin/dsconfig -h openam.example.com -p 4445 -D "cn=myself" -w password -X create-log-publisher --publisher-name "File-Based Debug Logger 2" --type file-based-debug --set enabled:true --set log-file:logs/mydebug --set asynchronous:false -n


3. stop the server
4. start the server 

[22/Jul/2019:12:59:47 +0000] category=CORE severity=NOTICE msgID=134 msg=ForgeRock Directory Services 7.0.0-SNAPSHOT (build 20190722102639, revision number d082907910c586e5734706c036c14d86c572d640) starting up
[22/Jul/2019:12:59:47 +0000] category=JVM severity=NOTICE msgID=21 msg=Installation Directory:  /root/workspace/OpenDJ-build_master-CPMER56E632EMKNXZEURRUYWFHY72MGZDGZHN7BYLM5SGO6GS6PA/results/20190722-110540/logging_group/DJ2/opendj
[22/Jul/2019:12:59:47 +0000] category=JVM severity=NOTICE msgID=23 msg=Instance Directory:      /root/workspace/OpenDJ-build_master-CPMER56E632EMKNXZEURRUYWFHY72MGZDGZHN7BYLM5SGO6GS6PA/results/20190722-110540/logging_group/DJ2/opendj
[22/Jul/2019:12:59:47 +0000] category=JVM severity=NOTICE msgID=17 msg=JVM Information: 1.8.0_181-b13 by Oracle Corporation, 64-bit architecture, 28631367680 bytes heap size
[22/Jul/2019:12:59:47 +0000] category=JVM severity=NOTICE msgID=18 msg=JVM Host: openam.example.com default/dj2, running Linux 3.10.0-862.3.2.el7.x86_64 amd64, 337829965824 bytes physical memory size, number of processors available 40
[22/Jul/2019:12:59:47 +0000] category=JVM severity=NOTICE msgID=19 msg=JVM Arguments: "-XX:+UnlockExperimentalVMOptions", "-XX:+UseCGroupMemoryLimitForHeap", "-Dorg.opends.server.scriptName=start-ds"
[22/Jul/2019:12:59:48 +0000] category=BACKEND severity=NOTICE msgID=513 msg=The database backend appData containing 63 entries has started
[22/Jul/2019:12:59:48 +0000] category=EXTENSIONS severity=NOTICE msgID=221 msg=DIGEST-MD5 SASL mechanism using a server fully qualified domain name of: openam.example.com
[22/Jul/2019:12:59:49 +0000] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while attempting to bootstrap the Directory Server: An error occurred while attempting to initialize the Directory Server synchronization provider referenced in configuration entry cn=Multimaster Synchronization,cn=Synchronization Providers,cn=config: NullPointerException (DurationUnit.java:209 Topology.java:319 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:262 String.java:2994 StringBuilder.java:131 ConcurrentHashMap.java:1321 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:595 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 LocalizableMessage.java:526 ...)
[22/Jul/2019:12:59:49 +0000] category=BACKEND severity=NOTICE msgID=370 msg=The backend appData is now taken offline
[22/Jul/2019:12:59:49 +0000] category=CORE severity=NOTICE msgID=203 msg=The Directory Server is now stopped



The debug log is created and I noticed following stack trace in it:

[23/Jul/2019:06:59:23 +0200] 1119 trace thread={main(1)} method={main(DirectoryServer.java:4043)} An error occurred while attempting to initialize the Directory Server synchronization provider referenced in configuration entry cn=Multimaster Synchronization,cn=Synchronization Providers,cn=config: NullPointerException (DurationUnit.java:209 Topology.java:319 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:262 String.java:2994 StringBuilder.java:131 ConcurrentHashMap.java:1321 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:595 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 LocalizableMessage.java:526 ...) caught={org.forgerock.opendj.config.server.ConfigException: An error occurred while attempting to initialize the Directory Server synchronization provider referenced in configuration entry cn=Multimaster Synchronization,cn=Synchronization Providers,cn=config: NullPointerException (DurationUnit.java:209 Topology.java:319 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:262 String.java:2994 StringBuilder.java:131 ConcurrentHashMap.java:1321 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 Formatter.java:2455 String.java:2940 Topology.java:595 Formatter.java:2886 Formatter.java:2763 Formatter.java:2520 LocalizableMessage.java:526 ...)}
Stack Trace:
  at org.opends.server.core.SynchronizationProviderConfigManager.initSynchronizationProvider(SynchronizationProviderConfigManager.java:165)
  at org.opends.server.core.SynchronizationProviderConfigManager.initAndRegister(SynchronizationProviderConfigManager.java:141)
  at org.opends.server.core.SynchronizationProviderConfigManager.initializeSynchronizationProviders(SynchronizationProviderConfigManager.java:83)
  at org.opends.server.core.DirectoryServer.startServer(DirectoryServer.java:1494)
  at org.opends.server.core.DirectoryServer.main(DirectoryServer.java:4041)
Caused by: java.lang.NullPointerException
  at com.forgerock.opendj.util.DurationUnit.toString(DurationUnit.java:209)
  at org.opends.server.replication.common.Topology$Replication.toString(Topology.java:319)
  at java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)
  at java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)
  at java.util.Formatter.format(Formatter.java:2520)
  at java.util.Formatter.format(Formatter.java:2455)
  at java.lang.String.format(String.java:2940)
  at org.opends.server.replication.common.Topology$Server.toString(Topology.java:262)
  at java.lang.String.valueOf(String.java:2994)
  at java.lang.StringBuilder.append(StringBuilder.java:131)
  at java.util.concurrent.ConcurrentHashMap.toString(ConcurrentHashMap.java:1321)
  at java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)
  at java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)
  at java.util.Formatter.format(Formatter.java:2520)
  at java.util.Formatter.format(Formatter.java:2455)
  at java.lang.String.format(String.java:2940)
  at org.opends.server.replication.common.Topology.toString(Topology.java:595)
  at java.util.Formatter$FormatSpecifier.printString(Formatter.java:2886)
  at java.util.Formatter$FormatSpecifier.print(Formatter.java:2763)
  at java.util.Formatter.format(Formatter.java:2520)
  at org.forgerock.i18n.LocalizableMessage.toString0(LocalizableMessage.java:526)
  at org.forgerock.i18n.LocalizableMessage.toString(LocalizableMessage.java:485)
  at org.forgerock.i18n.LocalizableMessage.toString(LocalizableMessage.java:467)
  at org.forgerock.i18n.slf4j.LocalizedLogger.trace(LocalizedLogger.java:4940)
  at org.opends.server.replication.common.Topology.setLocalReplicationDomains(Topology.java:553)
  at org.opends.server.replication.plugin.MultimasterReplication.initializeSynchronizationProvider(MultimasterReplication.java:440)
  at org.opends.server.replication.plugin.MultimasterReplication.initializeSynchronizationProvider(MultimasterReplication.java:106)
  at org.opends.server.core.SynchronizationProviderConfigManager.initSynchronizationProvider(SynchronizationProviderConfigManager.java:156)
  ... 4 more

