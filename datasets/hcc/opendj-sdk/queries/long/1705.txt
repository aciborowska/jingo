When purging the changelog, some log files may be deleted. What happens if there are cursors opened on any of these log files ?

When a purge is started on a log, there should be a check on the list of opened cursors. 

	If it is empty, then purge can be started.
	if it is not empty, then either purge must be aborted, or all opened cursors must be turned into empty cursors (i.e. like it is done when clearing the log).



Turning opened cursors to empty cursors seems the best approach, as aborting the purge may ultimately lead to a full file-system (for example if replication is very late).

Note that the whole purging is currently done with an exclusive lock. it could be optimized by only marking the file to delete, then the actual delete operation could be done in a separate task. 