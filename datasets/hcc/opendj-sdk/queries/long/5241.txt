Found with rev 5d6b47e05e2

We set up a proxy, in production mode, in front of 2 replicated servers with data.


./PROXY1/opendj/setup proxy-server --productionMode -q --proxyUsingStartTls --useJavaTrustStore /local/GIT/pyforge/results/20180703-115044/proxy_group/ProductionMode/PROXY1/opendj/tmp/proxy-truststore -T password --staticPrimaryServer nameserver.example.com:1392 --staticPrimaryServer nameserver.example.com:1393 --loadBalancingAlgorithm affinity -h nameserver.example.com -p 1394 -D "cn=Directory Manager" -w password --proxyUserBindDn "cn=proxy,dc=example,dc=com" --proxyUserBindPassword "password" --adminConnectorPort 4449 --monitorUserDn uid=Monitor --monitorUserPassword password -O



We check it is correctly configured:


./PROXY1/opendj/bin/ldapsearch -h nameserver.example.com -p 1394 -D "uid=user.0,ou=people,dc=example,dc=com" -w password -b "dc=example,dc=com" --useStartTLS -X "uid=user.0" 	
11:52:38.351 	INFO 	SUCCESS:
-- rc --
returned 0, expected [0]
-- stdout --
dn: uid=user.0,ou=People,dc=example,dc=com
objectClass: organizationalperson
objectClass: top
objectClass: person
objectClass: inetorgperson
cn: Aaccf Amar
description: This is the description for Aaccf Amar.
employeeNumber: 0
givenName: Aaccf
homePhone: +1 720 204 9090
initials: AAA
l: Harrisonburg
mail: user.0@example.com
mobile: +1 412 030 0042
pager: +1 439 180 6470
postalAddress: Aaccf Amar$31206 Spring Street$Harrisonburg, IL  04284
postalCode: 04284
sn: Amar
st: IL
street: 31206 Spring Street
telephoneNumber: +1 485 381 2060
uid: user.0
userPassword: {SSHA512}mUaA+Jags+0+WKiHiJPOUwL9BZ91Z8op9RBVsMfkPLQ7Mkq3pWFw+R9N1GVN4vK3WYUNi1TacyEoKfvXjmwG1oaQoDOFUA1J



We do an anonymous search on rootDSE for operational attributes, it fails with the following error:


./PROXY1/opendj/bin/ldapsearch -h nameserver.example.com -p 1394   -b "" -s base --useStartTLS -X "(objectclass=*)" + 	
11:52:41.871 	WARN 	ERROR:
-- rc --
returned 80, expected [0]
-- stdout --
# The LDAP search request failed: 80 (Other)
# Additional Information:  remove



To reproduce:



./run-pybot.py -n -v -s proxy_group.ProductionMode -t Anonymous_Read_Root_DSE opendj


