It's annoying that debug error messages are displayed to stdout when running the various OpenDJ tools (incl. start-ds) since this very frequently results in message duplication, for example:


[27/Jan/2012:17:22:47 +0100] category=PROTOCOL severity=SEVERE_ERROR msgID=2359728 msg=The LDAP connection handler defined in configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config was unable to bind to 0.0.0.0:389:  IOException(Address already in use)
[27/Jan/2012:17:22:47 +0100] 1 caught error thread={main(1)} method={getConnectionHandler(ConnectionHandlerConfigManager.java:451)} caught={java.lang.reflect.InvocationTargetException}
[27/Jan/2012:17:22:47 +0100] 2 caught error thread={main(1)} method={main(DirectoryServer.java:9538)} caught={org.opends.server.config.ConfigException: An error occurred while trying to initialize a connection handler loaded from class org.opends.server.protocols.ldap.LDAPConnectionHandler with the information in configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config:  The LDAP connection handler defined in configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config was unable to bind to 0.0.0.0:389:  IOException(Address already in use) (LDAPConnectionHandler.java:718 NativeMethodAccessorImpl.java:-2 NativeMethodAccessorImpl.java:39 DelegatingMethodAccessorImpl.java:25 Method.java:597 ConnectionHandlerConfigManager.java:447 ConnectionHandlerConfigManager.java:313 DirectoryServer.java:2731 DirectoryServer.java:1343 DirectoryServer.java:9522).  This connection handler will be disabled}
[27/Jan/2012:17:22:47 +0100] category=CORE severity=NOTICE msgID=458891 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID 458893):  The Directory Server has started the shutdown process.  The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while trying to start the Directory Server:  An error occurred while trying to initialize a connection handler loaded from class org.opends.server.protocols.ldap.LDAPConnectionHandler with the information in configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config:  The LDAP connection handler defined in configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config was unable to bind to 0.0.0.0:389:  IOException(Address already in use) (LDAPConnectionHandler.java:718 NativeMethodAccessorImpl.java:-2 NativeMethodAccessorImpl.java:39 DelegatingMethodAccessorImpl.java:25 Method.java:597 ConnectionHandlerConfigManager.java:447 ConnectionHandlerConfigManager.java:313 DirectoryServer.java:2731 DirectoryServer.java:1343 DirectoryServer.java:9522).  This connection handler will be disabled null
[27/Jan/2012:17:22:47 +0100] category=BACKEND severity=NOTICE msgID=9896306 msg=The backend userRoot is now taken offline
[27/Jan/2012:17:22:47 +0100] category=CORE severity=NOTICE msgID=458955 msg=The Directory Server is now stopped



Not only does duplication look sloppy it also adds many stack traces to the output which will look scary to most users.

Sometimes it is useful to be able to enable debug logging during start up so the fix for this issue should not prevent users from doing so. For example, invalid DNs in groups or referential integrity issues between groups are logged as debug messages during initialization (although this behavior is questionable).
