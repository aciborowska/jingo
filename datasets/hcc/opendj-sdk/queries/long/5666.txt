Using the profiles, Warren Strange reports he is seeing this for every backend:


[05/Nov/2018:21:46:48 +0000] category=EXTENSIONS severity=WARNING msgID=566 msg=The regular expression identity mapper defined in configuration entry cn=Regular Expression,cn=Identity Mappers,cn=config references attribute type uid which does not have an equality index defined in backend amCts



This warning is not harmless: identity mappers will issue searches with a uid=XXX on all public, top-level local backend; i.e. it may issue searches on a CTS backend resulting in a full scan of id2entry! Not good at all.

 

We have two options:

	add an index for uid for all the profiles. Drawback is that we have to remember to add it for all new profiles
	on JE backend creation, always add by default an index for uid. If an entry has no uid attribute, it does not consume any additional space.



 

According to Ludovic Poitou, identity mappers using uid have three main use cases:


	SASL bind
	certificate mapping
	Rest2LDAP



The latter is the biggest use by far, and it is widely used in the platform.

Given the wide use of Rest2LDAP, we think that using anything else than uid for identity mapping requires more work, thus users will prefer to stay close to our default config. Thus we think it is safer to add uid as a default index for new backends.

 

This issue can be closed once:

	uid is added as a default index for backends created during setup
	DS evaluation profile is modified to no longer add the uid index (this would now fail I think)

