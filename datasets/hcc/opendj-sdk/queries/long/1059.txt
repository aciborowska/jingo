Only one Directory Server, no Replication Server

Running dsreplication initialize-all with only one DS in the topology and no RS returns the following uninformative error message:

$ bin/dsreplication initialize-all --adminUID admin -h jeannoel-laptop -p 4500 -b dc=example,dc=com -w admin --trustAll --no-prompt

The provided credentials are not valid in server jeannoel-laptop:4500.
Details: [LDAP: error code 49 - Invalid Credentials]


Only one Directory Server, one or more Replication Servers

Running dsreplication initialize-all with only one DS in the topology and one or more RSs returns the following even less uninformative error message:

$ bin/dsreplication initialize-all --adminUID admin -h jeannoel-laptop -p 4500 -b dc=example,dc=com -w admin --trustAll --no-prompt

Initializing base DN dc=example,dc=com with the contents from jeannoel-laptop:4500:
0 entries processed (0 % complete).

Error during the initialization with contents from server
jeannoel-laptop:4500.  Last log details: [05/Jul/2013:15:36:10 +0200]
severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task
dsreplication-initialize1 started execution".  Task state: STOPPED_BY_ERROR.
Check the error logs of jeannoel-laptop:4500 for more information.
See /tmp/opendj-replication-5569442567420547668.log for a detailed log of this
operation.


Here is the content of /tmp/opendj-replication-5569442567420547668.log:

Jul 5, 2013 3:44:21 PM org.opends.guitools.controlpanel.util.ControlPanelLog initLogFileHandler
INFO: Application launched July 5, 2013 3:44:21 PM CEST
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
INFO: created task entry: {ds-task-initialize-replica-server-id=ds-task-initialize-replica-server-id: all, ds-task-initialize-domain-dn=ds-task-initialize-domain-dn: dc=example,dc=com, objectclass=objectclass: top, ds-task, ds-task-initialize-remote-replica, ds-task-class-name=ds-task-class-name: org.opends.server.tasks.InitializeTargetTask, ds-task-id=ds-task-id: dsreplication-initialize1}
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
INFO: Progress msg: 0 entries processed (0 % complete).
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
INFO: [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task dsreplication-initialize1 started execution"
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
INFO: Last task entry: : null:null:{ds-task-unprocessed-entry-count=ds-task-unprocessed-entry-count: 1002, ds-task-state=ds-task-state: STOPPED_BY_ERROR, ds-task-log-message=ds-task-log-message: [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task dsreplication-initialize1 started execution", [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=1 msgID=15139025 message="Starting total update: exporting 1002 entries in domain "dc=example,dc=com" from this directory server DS(20923) to all remote directory servers", [05/Jul/2013:15:44:22 +0200] severity="SEVERE_ERROR" msgCount=2 msgID=10747963 message="An error occurred while attempting to process the LDIF export:  I/O error occurred while exporting entry: IOException with nested DirectoryException", [05/Jul/2013:15:44:23 +0200] severity="NOTICE" msgCount=3 msgID=15139026 message="Finished total update: exported domain "dc=example,dc=com" from this directory server DS(20923) to all remote directory servers. When initializing remote server(s), the initialized server with serverId=-1 is potentially stopped or too slow", [05/Jul/2013:15:44:23 +0200] severity="SEVERE_ERROR" msgCount=4 msgID=-1 message="When initializing remote server(s), the initialized server with serverId=-1 is potentially stopped or too slow", [05/Jul/2013:15:44:23 +0200] severity="NOTICE" msgCount=5 msgID=9896350 message="Initialize Backend task dsreplication-initialize1 finished execution", ds-task-processed-entry-count=ds-task-processed-entry-count: 0}
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
WARNING: Processed errorMsg: Error during the initialization with contents from server jeannoel-laptop:4500.  Last log details: [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task dsreplication-initialize1 started execution".  Task state: STOPPED_BY_ERROR.  Check the error logs of jeannoel-laptop:4500 for more information.
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllSuffixTry
SEVERE: Throwing ApplicationException.
Jul 5, 2013 3:44:23 PM org.opends.server.tools.dsreplication.ReplicationCliMain initializeAllReplication
SEVERE: Complete error stack:
org.opends.server.tools.dsreplication.ReplicationCliException: Error during the initialization with contents from server jeannoel-laptop:4500.  Last log details: [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task dsreplication-initialize1 started execution".  Task state: STOPPED_BY_ERROR.  Check the error logs of jeannoel-laptop:4500 for more information.
	at org.opends.server.tools.dsreplication.ReplicationCliMain.initializeAllSuffix(ReplicationCliMain.java:8402)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.initializeAllReplication(ReplicationCliMain.java:4817)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.initializeAllReplication(ReplicationCliMain.java:751)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.execute(ReplicationCliMain.java:521)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.mainCLI(ReplicationCliMain.java:358)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.main(ReplicationCliMain.java:289)
Caused by: Error during the initialization with contents from server jeannoel-laptop:4500.  Last log details: [05/Jul/2013:15:44:22 +0200] severity="NOTICE" msgCount=0 msgID=9896349 message="Initialize Backend task dsreplication-initialize1 started execution".  Task state: STOPPED_BY_ERROR.  Check the error logs of jeannoel-laptop:4500 for more information.
	at org.opends.server.tools.dsreplication.ReplicationCliMain.initializeAllSuffixTry(ReplicationCliMain.java:8831)
	at org.opends.server.tools.dsreplication.ReplicationCliMain.initializeAllSuffix(ReplicationCliMain.java:8378)
	... 5 more


logs/server.out does not have any error or warning.

logs/errors has the following error messages:

[05/Jul/2013:15:44:06 +0200] category=JEB severity=NOTICE msgID=8847447 msg=Exported 1002 entries and skipped 0 in 0 seconds (average rate 2498.8/sec)
[05/Jul/2013:15:44:06 +0200] category=SYNC severity=NOTICE msgID=15138878 msg=Directory server DS(20923) has connected to replication server RS(25427) for domain "dc=example,dc=com" at jeannoel-laptop/127.0.1.1:8901 with generation ID 19449576
[05/Jul/2013:15:44:06 +0200] category=SYNC severity=NOTICE msgID=15138878 msg=Directory server DS(16628) has connected to replication server RS(25427) for domain "cn=admin data" at jeannoel-laptop/127.0.1.1:8901 with generation ID 159627
[05/Jul/2013:15:44:06 +0200] category=SYNC severity=NOTICE msgID=15138878 msg=Directory server DS(9851) has connected to replication server RS(25427) for domain "cn=schema" at jeannoel-laptop/127.0.1.1:8901 with generation ID 8408
[05/Jul/2013:15:44:07 +0200] category=SYNC severity=NOTICE msgID=15138959 msg=Starting total update: exporting 12 entries in domain "cn=admin data" from this directory server DS(16628) to remote directory server DS(25478)
[05/Jul/2013:15:44:08 +0200] category=SYNC severity=NOTICE msgID=15138960 msg=Finished total update: exported domain "cn=admin data" from this directory server DS(16628) to remote directory server DS(25478). 
[05/Jul/2013:15:44:22 +0200] category=BACKEND severity=NOTICE msgID=9896349 msg=Initialize Backend task dsreplication-initialize1 started execution
[05/Jul/2013:15:44:22 +0200] category=SYNC severity=NOTICE msgID=15139025 msg=Starting total update: exporting 1002 entries in domain "dc=example,dc=com" from this directory server DS(20923) to all remote directory servers
[05/Jul/2013:15:44:22 +0200] category=TOOLS severity=SEVERE_ERROR msgID=10747963 msg=An error occurred while attempting to process the LDIF export:  I/O error occurred while exporting entry: IOException with nested DirectoryException
[05/Jul/2013:15:44:22 +0200] category=SYNC severity=NOTICE msgID=15139026 msg=Finished total update: exported domain "dc=example,dc=com" from this directory server DS(20923) to all remote directory servers. When initializing remote server(s), the initialized server with serverId=-1 is potentially stopped or too slow
[05/Jul/2013:15:44:23 +0200] category=SYNC severity=SEVERE_ERROR msgID=-1 msg=When initializing remote server(s), the initialized server with serverId=-1 is potentially stopped or too slow
[05/Jul/2013:15:44:23 +0200] category=BACKEND severity=NOTICE msgID=9896350 msg=Initialize Backend task dsreplication-initialize1 finished execution


dsreplication initialize-all --help

Help for dsreplication initialize-all does not mention this command is only useful when there is more than one DS in the replication topology:

$ bin/dsreplication initialize-all --help
Usage:  dsreplication initialize-all {options}
Initialize the contents of the data under the specified base DN on all the servers whose contents are being replicated with the contents on the specified server.  This operation is required after enabling replication for replication to work ('initialize' applied to each server can also be used for this purpose)

Global Options:
    See "dsreplication --help"

SubCommand Options:
-h, --hostname {host}
    Directory server hostname or IP address
    Default value: jeannoel-laptop
-p, --port {port}
    Directory server administration port number
    Default value: 4444



Expected outcome

With the described error conditions, dsreplication initialize-all should return a meaningful error message and additional information. Maybe could we use UNWILLING_TO_PERFORM LDAP result code?