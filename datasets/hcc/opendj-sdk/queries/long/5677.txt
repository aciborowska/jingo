The following StackOverflowError exception is thrown when a simple ldapsearch for isMemberOf is requested when group entries have groupOfUrls.

Search

opendj; bin /$ ./ldapsearch --useSsl --trustAll --port 1636 --bindDN "cn=Directory Manager" --bindPasswordFile pass --baseDN dc=example,dc=com 'uid=*' isMemberOf
# The LDAP search request failed: 81 (Server Connection Closed)

DS 5.5.2

[17/Oct/2018:17:13:05 -0600] category=org.opends.messages.external severity=WARNING msgID=1 msg=GRIZZLY0013: Exception during FilterChain execution exception=StackOverflowError (Ava.java:109 Rdn.java:179 Dn.java:272 Dn.java:245 DistinguishedNameEqualityMatchingRuleImpl.java:41 MatchingRule.java:476 AttributeBuilder.java:503 AttributeBuilder.java:79 AttributeBuilder.java:333 AttributeBuilder.java:367 SmallSet.java:94 AttributeBuilder.java:483 AttributeBuilder.java:471 IsMemberOfVirtualAttributeProvider.java:70 VirtualAttributeProvider.java:148 VirtualAttribute.java:80 SearchFilter.java:1850 SearchFilter.java:1571 SearchFilter.java:1530 LDAPURL.java:931 DynamicGroup.java:178 ...)

DS 6.5.0

[17/Oct/2018:16:01:05 -0600] category=org.opends.messages.external severity=WARNING msgID=1 msg=GRIZZLY0013: Exception during FilterChain execution exception=StackOverflowError (Ava.java:109 Rdn.java:183 Dn.java:280 Dn.java:253 DistinguishedNameEqualityMatchingRuleImpl.java:41 MatchingRule.java:508 AbstractAttribute.java:235 AbstractAttribute.java:207 Matcher.java:910 Matcher.java:700 Matcher.java:568 Filter.java:1783 LDAPURL.java:906 DynamicGroup.java:170 Group.java:197 IsMemberOfVirtualAttributeProvider.java:75 AbstractVirtualAttribute.java:44 AbstractAttribute.java:233 AbstractAttribute.java:207 Matcher.java:910 Matcher.java:700 ...)

Works in versions 2.6.0-2.6.4

Fails in versions

	3.0.0-3.5.3
	5.0.0-5.5.2
	6.0.0-6.5.0



 

testcase.zip provided with an example.ldif, schema and search.

 

Potentially related to OPENDJ-5371 Potential stackoverflow errors due to deeply nested search filters