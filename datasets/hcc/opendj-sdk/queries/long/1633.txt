While trying to upgrade embedded DJ within OpenAM, we ran into an issue with the rebuild-index tool. Apparently when ${user.home}/tools.properties defines hostname and port settings, rebuild-index will always attempt to use those connection details for scheduling the rebuild-index task. This essentially prevents administrators from using the tool in offline mode.
Whilst it is possible to use the --noPropertiesFile option with rebuild-index, it feels a bit odd way to enforce offline mode for commands (similarly it is odd how providing host and port parameters will magically turn every command into an offline operation).
I would suggest a new --offline flag/argument for the tools that can be run in offline mode (I assume backup, restore and potentially other tools may be also affected) to enforce that they are ignoring connection related properties coming from tools.properties.

If --noPropertiesFile is the option to use, then we may need to update chapter 9.3.3 to explicitly mention this argument.