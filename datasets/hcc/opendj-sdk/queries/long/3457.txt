Description
During functional test run we hit issue with option P (-trustStorePath).
From my observation this option has no effect.

In our test we do a ldapsearch:

./opendj/bin/ldapsearch -h pyforge.example.com -p 1636  -o mech=EXTERNAL  -b "dc=com" -s base -E -K /tmp/keystore -N client-cert-1 -P /tmp/keystore -W password -Z --countEntries "(objectclass=*)" 



which ends with interactive mode:

Server Certificate:

User DN  : UID=server, DC=example, DC=com
Validity : From 'Fri Nov 04 10:32:53 CET 2016'
             To 'Mon Oct 30 10:32:53 CET 2017'
Issuer   : UID=server, DC=example, DC=com



Do you trust this server certificate?

  1) No
  2) Yes, for this session only
  3) Yes, also add it to a truststore
  4) View certificate details

Enter choice: [2]: 



I tried to re-run the test on my machine and confirm the choice 2 ^^ and the tool returned correct output.

I also tried to use option -X instead of -P and it succeeded. For me it looks like the trust store is not used at all. This is based mainly on my expectation that if the trust store is corrupted or doesn't contain correct entries, the command will fail instead of switch to interactive mode.

NOTE: script to reproduce attached