DS 6.5.x's LDAPS connection handler hangs up at random intervals in Grizzly, i.e org.glassfish.grizzly.ssl.SSLUtils.sslEngineUnwrap which requires a restart of the process.  Heap Dumps from the pre-production systems show massive numbers of Finalizer objects.

	All other connection handlers are active and responding during the hang.
	All stacks from each occurrence are always in the same code previously mentioned.
	Various 1.8 JVM versions were in use including Oracle and AdoptJDK 1.8.
	One customer tested older 1.8 JVM versions in pro-prod (below) and the instance still hung.
	The JVMs were both tuned and unturned, the hang still took place.
	High CPU on the Grizzly thread is always observed.
	High numbers of CLOSE_WAIT's build-up
	The thread is always the LDAPS Connection Handlers - SelectorRunner.



The following customer has hit this in 

 

DS 6.5.3 Prod

No Heap Dump captured

Prod JVM:

opendj-support-data-c2pudj2-20200616-085134.zip

 

        javaVersion       1.8.0_252
        javaVendor        Oracle Corporation
        usedMemory        4580651536 (4.26606 GB)
        maxMemory         6388776959 (5.95001 GB)
        avail disk space  18202550272 (16.9524 GB)
        available CPUs    2

        Operating System  3.10.0-1127.el7.x86_64

java.properties (start-ds.java-args)
        -server
        -d64
        -Xms6G
        -Xmx6G
        -XX:NewSize=512M
        -XX:MaxTenuringThreshold=1
        -XX:+UseCompressedOops
        -XX:+UseConcMarkSweepGC
        -Xloggc:/opt/app/opendj/logs/gc-%t.log
        -verbose:gc
        -XX:+PrintGCDetails
        -XX:+PrintGCDateStamps
        -XX:+PrintGCTimeStamps
        -XX:+UseGCLogFileRotation
        -XX:NumberOfGCLogFiles=50
        -XX:GCLogFileSize=20M

 

Prod stacks: opendj-support-data-c2pudj2-20200616-085134.zip

 

CPU = 93.8 % (nid=0x87d)
"LDAPS 0.0.0.0 port 1636(2) SelectorRunner" #123 daemon prio=5 os_prio=0 tid=0x00007fd845372000 nid=0x87d runnable [0x00007fd7e2ae9000]
   java.lang.Thread.State: RUNNABLE
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:626)
        at org.glassfish.grizzly.ssl.SSLUtils.sslEngineUnwrap(SSLUtils.java:465)
        at org.glassfish.grizzly.ssl.SSLConnectionContext.unwrap(SSLConnectionContext.java:193)
        at org.glassfish.grizzly.ssl.SSLUtils.handshakeUnwrap(SSLUtils.java:292)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:678)
        at org.glassfish.grizzly.ssl.SSLFilter.doHandshakeStep(SSLFilter.java:332)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:626)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.handleRead(SSLBaseFilter.java:333)
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
        at org.glassfish.grizzly.strategies.SameThreadIOStrategy.executeIoEvent(SameThreadIOStrategy.java:103)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.executeIoEvent(AbstractIOStrategy.java:89)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeyEvents(SelectorRunner.java:415)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeys(SelectorRunner.java:384)
        at org.glassfish.grizzly.nio.SelectorRunner.doSelect(SelectorRunner.java:348)
        at org.glassfish.grizzly.nio.SelectorRunner.run(SelectorRunner.java:279)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)
        at java.lang.Thread.run(Thread.java:748)

 

DS 6.5.3 Pre-prod

	Heap Dumps captured
	SSL Debug captured



Pre-prod JVM:

 


        javaVersion       1.8.0_192
        javaVendor        Oracle Corporation
        usedMemory        2256461944 (2.10149 GB)
        maxMemory         4241293311 (3.95001 GB)
        avail disk space  2721320960 (2.53443 GB)
        available CPUs    2

        Operating System  3.10.0-1127.8.2.el7.x86_64

java.properties (start-ds.java-args)
        -server
        -Djavax.net.debug=ssl,handshake,trustmanager
        -d64
        -Xms4G
        -Xmx4G
        -XX:NewSize=512M
        -XX:MaxTenuringThreshold=1
        -XX:+UseCompressedOops
        -XX:+UseConcMarkSweepGC
        -Xloggc:/opt/app/opendj/logs/gc-%t.log
        -verbose:gc
        -XX:+PrintGCDetails
        -XX:+PrintGCDateStamps
        -XX:+PrintGCTimeStamps
        -XX:+UseGCLogFileRotation
        -XX:NumberOfGCLogFiles=50
        -XX:GCLogFileSize=20M

 

Pre-prod stacks:

server 1: opendj-support-data-c3qudj1-20200614-114246.zip

 

CPU = 99.9 % (nid=0x1c26)
"LDAPS 0.0.0.0 port 1636(1) SelectorRunner" #125 daemon prio=5 os_prio=0 tid=0x00007fb7354e1800 nid=0x1c26 runnable [0x00007fb6d44c7000]
   java.lang.Thread.State: RUNNABLE
        at sun.security.ssl.SSLEngineImpl.getHSStatus(SSLEngineImpl.java:504)
        - locked <0x0000000770204320> (a sun.security.ssl.SSLEngineImpl)
        at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:808)
        at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:766)
        - locked <0x000000079735ec70> (a java.lang.Object)
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.glassfish.grizzly.ssl.SSLUtils.sslEngineUnwrap(SSLUtils.java:465)
        at org.glassfish.grizzly.ssl.SSLConnectionContext.unwrap(SSLConnectionContext.java:193)
        at org.glassfish.grizzly.ssl.SSLUtils.handshakeUnwrap(SSLUtils.java:292)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:678)
        at org.glassfish.grizzly.ssl.SSLFilter.doHandshakeStep(SSLFilter.java:332)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:626)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.handleRead(SSLBaseFilter.java:333)
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
        at org.glassfish.grizzly.strategies.SameThreadIOStrategy.executeIoEvent(SameThreadIOStrategy.java:103)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.executeIoEvent(AbstractIOStrategy.java:89)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeyEvents(SelectorRunner.java:415)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeys(SelectorRunner.java:384)
        at org.glassfish.grizzly.nio.SelectorRunner.doSelect(SelectorRunner.java:348)
        at org.glassfish.grizzly.nio.SelectorRunner.run(SelectorRunner.java:279)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)
        at java.lang.Thread.run(Thread.java:748)

server 2: opendj-support-data-c3qudj2-20200613-062434.zip

 

 

CPU = 99.9 % (nid=0xfdfa)
"LDAPS 0.0.0.0 port 1636(1) SelectorRunner" #125 daemon prio=5 os_prio=0 tid=0x00007efffcbd2000 nid=0xfdfa runnable [0x00007eff9c2c5000]
   java.lang.Thread.State: RUNNABLE
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:723)
        at org.glassfish.grizzly.ssl.SSLFilter.doHandshakeStep(SSLFilter.java:332)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:626)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.handleRead(SSLBaseFilter.java:333)
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
        at org.glassfish.grizzly.strategies.SameThreadIOStrategy.executeIoEvent(SameThreadIOStrategy.java:103)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.executeIoEvent(AbstractIOStrategy.java:89)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeyEvents(SelectorRunner.java:415)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeys(SelectorRunner.java:384)
        at org.glassfish.grizzly.nio.SelectorRunner.doSelect(SelectorRunner.java:348)
        at org.glassfish.grizzly.nio.SelectorRunner.run(SelectorRunner.java:279)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)
        at java.lang.Thread.run(Thread.java:748)

 

 

Pre-prod heap dumps:

opendj-support-data-c3qudj1-20200614-114246.zip

Class Name                                                                                              | Shallow Heap | Retained Heap | Percentage
----------------------------------------------------------------------------------------------------------------------------------------------------
class java.lang.ref.Finalizer @ 0x6e1661e28 System Class                                                |           16 |   303,278,048 |     38.28%
|- java.lang.ref.Finalizer @ 0x6ed147828                                                                |           40 |   303,278,016 |     38.28%
|  '- java.lang.ref.Finalizer @ 0x6ed147800                                                             |           40 |   303,277,976 |     38.28%
|     '- java.lang.ref.Finalizer @ 0x6ed145988                                                          |           40 |   303,277,936 |     38.28%
|        |- java.lang.ref.Finalizer @ 0x6ed1459b0                                                       |           40 |   303,269,336 |     38.28%
|        |  |- java.lang.ref.Finalizer @ 0x6ed1434d0                                                    |           40 |   303,261,104 |     38.27%
|        |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x79de58e50                       |           24 |         8,192 |      0.00%
|        |  |  |- java.util.ArrayList @ 0x79de594f8                                                     |           24 |         8,120 |      0.00%
|        |  |  |  '- java.lang.Object[6] @ 0x6ed145d98                                                  |           40 |         8,096 |      0.00%
|        |  |  |     |- org.forgerock.opendj.grizzly.GrizzlyLdapSocketFilter @ 0x7386ac0f8              |           32 |         7,976 |      0.00%
|        |  |  |     |- org.forgerock.opendj.grizzly.Codecs$ServerCodec @ 0x7386ac0d8                   |           32 |            32 |      0.00%
|        |  |  |     |- org.forgerock.opendj.grizzly.SaslFilter @ 0x79de59480                           |           24 |            24 |      0.00%
|        |  |  |     |- org.forgerock.opendj.grizzly.StartTlsFilter @ 0x79de594c8                       |           24 |            24 |      0.00%
|        |  |  |     '- Total: 4 entries                                                                |              |               |           
|        |  |  |- java.util.RegularEnumSet @ 0x7386ac0b8                                                |           32 |            32 |      0.00%
|        |  |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x79de594b0|           16 |            16 |      0.00%
|        |  |  '- Total: 3 entries                                                                      |              |               |           
|        |  '- Total: 2 entries                                                                         |              |               |           
|        |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x79ddb18c0                          |           24 |         8,488 |      0.00%
|        |  |- java.util.ArrayList @ 0x79ddb1878                                                        |           24 |         8,416 |      0.00%
|        |  |  '- java.lang.Object[6] @ 0x6ed1459d8                                                     |           40 |         8,392 |      0.00%
|        |  |     |- org.forgerock.opendj.grizzly.GrizzlyLdapSocketFilter @ 0x7386abab8                 |           32 |         8,272 |      0.00%
|        |  |     |- org.forgerock.opendj.grizzly.Codecs$ServerCodec @ 0x7386aba98                      |           32 |            32 |      0.00%
|        |  |     |- org.forgerock.opendj.grizzly.StartTlsFilter @ 0x79ddb1848                          |           24 |            24 |      0.00%
|        |  |     |- org.forgerock.opendj.grizzly.SaslFilter @ 0x79ddb1860                              |           24 |            24 |      0.00%
|        |  |     '- Total: 4 entries                                                                   |              |               |           
|        |  |- java.util.RegularEnumSet @ 0x7386aba78                                                   |           32 |            32 |      0.00%
|        |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x79ddb1890   |           16 |            16 |      0.00%
|        |  '- Total: 3 entries                                                                         |              |               |           
|        |- java.lang.String @ 0x79ddb8b20  20200614154241Z                                             |           24 |            72 |      0.00%
|        |  '- char[15] @ 0x79dd885b8  20200614154241Z                                                  |           48 |            48 |      0.00%
|        '- Total: 3 entries                                                                            |              |               |           
|- java.lang.Object @ 0x6e1675c80                                                                       |           16 |            16 |      0.00%
'- Total: 2 entries                                                                                     |              |               |           
----------------------------------------------------------------------------------------------------------------------------------------------------


 

server 2: opendj-support-data-c3qudj2-20200613-062434.zip

Class Name                                                                                              | Shallow Heap | Retained Heap | Percentage
----------------------------------------------------------------------------------------------------------------------------------------------------
class java.lang.ref.Finalizer @ 0x6e1744628 System Class                                                |           16 |   161,555,112 |     24.72%
|- java.lang.ref.Finalizer @ 0x6dccd52b8                                                                |           40 |   161,555,080 |     24.72%
|  '- java.lang.ref.Finalizer @ 0x6dccd5290                                                             |           40 |   161,555,040 |     24.72%
|     '- java.lang.ref.Finalizer @ 0x6ed0166a0                                                          |           40 |   161,555,000 |     24.72%
|        |- java.lang.ref.Finalizer @ 0x6ed016678                                                       |           40 |   161,546,400 |     24.71%
|        |  |- java.lang.ref.Finalizer @ 0x6ed011128                                                    |           40 |   161,537,800 |     24.71%
|        |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x767005e78                       |           24 |         8,560 |      0.00%
|        |  |  |- java.util.ArrayList @ 0x767005e90                                                     |           24 |         8,488 |      0.00%
|        |  |  |- java.util.RegularEnumSet @ 0x703906d68                                                |           32 |            32 |      0.00%
|        |  |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x767005ea8|           16 |            16 |      0.00%
|        |  |  '- Total: 3 entries                                                                      |              |               |           
|        |  '- Total: 2 entries                                                                         |              |               |           
|        |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x767007c60                          |           24 |         8,560 |      0.00%
|        |  |- java.util.ArrayList @ 0x767007c78                                                        |           24 |         8,488 |      0.00%
|        |  |- java.util.RegularEnumSet @ 0x7039074c8                                                   |           32 |            32 |      0.00%
|        |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x767007c90   |           16 |            16 |      0.00%
|        |  '- Total: 3 entries                                                                         |              |               |           
|        '- Total: 2 entries                                                                            |              |               |           
|- java.lang.Object @ 0x6e1749f20                                                                       |           16 |            16 |      0.00%
'- Total: 2 entries                                                                                     |              |               |           
----------------------------------------------------------------------------------------------------------------------------------------------------


 

DS 6.5.0 Prod

Heap Dump was captured, but looks to be truncated.

opendj-support-data-20200616-011801.zip

JVM:

 

        javaVersion       1.8.0_241
        javaVendor        Oracle Corporation
        usedMemory        3881646432 (3.61506 GB)
        maxMemory         6441926655 (5.99951 GB)
        avail disk space  990474240 (0.922451 GB)
        available CPUs    8
        Operating System  3.10.0-1062.9.1.el7.x86_64
java.properties (start-ds.java-args)
        -server
        -Xms6G
        -Xmx6G
        -XX:+UseCompressedOops
        -server

Stacks

 

 

CPU = 99.9 % (nid=0x1c8f)
"LDAPS 0.0.0.0 port 1636(1) SelectorRunner" #81 daemon prio=5 os_prio=0 tid=0x00007f5c80ab0000 nid=0x1c8f runnable [0x00007f5b92dee000]
   java.lang.Thread.State: RUNNABLE
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.glassfish.grizzly.ssl.SSLUtils.sslEngineUnwrap(SSLUtils.java:465)
        at org.glassfish.grizzly.ssl.SSLConnectionContext.unwrap(SSLConnectionContext.java:193)
        at org.glassfish.grizzly.ssl.SSLUtils.handshakeUnwrap(SSLUtils.java:292)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:675)
        at org.glassfish.grizzly.ssl.SSLFilter.doHandshakeStep(SSLFilter.java:332)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:623)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.handleRead(SSLBaseFilter.java:335)
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
        at org.glassfish.grizzly.strategies.SameThreadIOStrategy.executeIoEvent(SameThreadIOStrategy.java:103)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.executeIoEvent(AbstractIOStrategy.java:89)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeyEvents(SelectorRunner.java:415)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeys(SelectorRunner.java:384)
        at org.glassfish.grizzly.nio.SelectorRunner.doSelect(SelectorRunner.java:348)
        at org.glassfish.grizzly.nio.SelectorRunner.run(SelectorRunner.java:279)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)
        at java.lang.Thread.run(Thread.java:748)

 

opendj-support-data-20200616-024331.zip

This capture shows the same stacks but the heapdump showed the most objects in DictionaryPasswordValidator and Finalizers.

CPU = 99.9 % (nid=0x1c8f)
"LDAPS 0.0.0.0 port 1636(1) SelectorRunner" #81 daemon prio=5 os_prio=0 tid=0x00007f5c80ab0000 nid=0x1c8f runnable [0x00007f5b92dee000]
   java.lang.Thread.State: RUNNABLE
        at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
        at org.glassfish.grizzly.ssl.SSLUtils.sslEngineUnwrap(SSLUtils.java:465)
        at org.glassfish.grizzly.ssl.SSLConnectionContext.unwrap(SSLConnectionContext.java:193)
        at org.glassfish.grizzly.ssl.SSLUtils.handshakeUnwrap(SSLUtils.java:292)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:675)
        at org.glassfish.grizzly.ssl.SSLFilter.doHandshakeStep(SSLFilter.java:332)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.doHandshakeStep(SSLBaseFilter.java:623)
        at org.glassfish.grizzly.ssl.SSLBaseFilter.handleRead(SSLBaseFilter.java:335)
        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)
        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)
        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)
        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:539)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)
        at org.glassfish.grizzly.strategies.SameThreadIOStrategy.executeIoEvent(SameThreadIOStrategy.java:103)
        at org.glassfish.grizzly.strategies.AbstractIOStrategy.executeIoEvent(AbstractIOStrategy.java:89)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeyEvents(SelectorRunner.java:415)
        at org.glassfish.grizzly.nio.SelectorRunner.iterateKeys(SelectorRunner.java:384)
        at org.glassfish.grizzly.nio.SelectorRunner.doSelect(SelectorRunner.java:348)
        at org.glassfish.grizzly.nio.SelectorRunner.run(SelectorRunner.java:279)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:593)
        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:573)
        at java.lang.Thread.run(Thread.java:748)


Class Name                                                                                           | Shallow Heap | Retained Heap | Percentage
-------------------------------------------------------------------------------------------------------------------------------------------------
org.opends.server.extensions.DictionaryPasswordValidator @ 0x6410c7b68                               |           24 |    43,978,472 |     18.28%
class java.lang.ref.Finalizer @ 0x6401cf9b8 System Class                                             |           16 |    35,358,344 |     14.70%
|- java.lang.ref.Finalizer @ 0x6e4f194e0                                                             |           40 |    35,358,312 |     14.70%
|  '- java.lang.ref.Finalizer @ 0x6e49ca588                                                          |           40 |    35,358,272 |     14.70%
|     |- java.lang.ref.Finalizer @ 0x6e42d5880                                                       |           40 |    35,266,120 |     14.66%
|     |  |- java.lang.ref.Finalizer @ 0x6e3bdc788                                                    |           40 |    35,173,968 |     14.62%
|     |  |  |- java.lang.ref.Finalizer @ 0x6e36c3570                                                 |           40 |    35,081,816 |     14.58%
|     |  |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x6e3bdc7b0                    |           24 |        92,112 |      0.04%
|     |  |  '- Total: 2 entries                                                                      |              |               |           
|     |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x6e42d3978                       |           24 |        92,112 |      0.04%
|     |  |  |- java.util.ArrayList @ 0x6e42d39b0                                                     |           24 |        92,040 |      0.04%
|     |  |  |  '- java.lang.Object[6] @ 0x6e42d39c8                                                  |           40 |        92,016 |      0.04%
|     |  |  |     |- org.forgerock.opendj.grizzly.GrizzlyLdapSocketFilter @ 0x6e42d39f0              |           32 |        91,608 |      0.04%
|     |  |  |     |- org.glassfish.grizzly.ssl.SSLFilter @ 0x6e42d42e0                               |           56 |           240 |      0.00%
|     |  |  |     |- org.forgerock.opendj.grizzly.Codecs$ServerCodec @ 0x6e42d4278                   |           32 |            80 |      0.00%
|     |  |  |     |- org.forgerock.opendj.grizzly.SaslFilter @ 0x6e42d42c8                           |           24 |            24 |      0.00%
|     |  |  |     |- org.glassfish.grizzly.ssl.SSLBaseFilter$SSLTransportFilterWrapper @ 0x6e42d43c0 |           24 |            24 |      0.00%
|     |  |  |     '- Total: 5 entries                                                                |              |               |           
|     |  |  |- java.util.RegularEnumSet @ 0x6e42d3990                                                |           32 |            32 |      0.00%
|     |  |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x6e42d43e8|           16 |            16 |      0.00%
|     |  |  '- Total: 3 entries                                                                      |              |               |           
|     |  '- Total: 2 entries                                                                         |              |               |           
|     |- org.glassfish.grizzly.filterchain.DefaultFilterChain @ 0x6e49ca5b0                          |           24 |        92,112 |      0.04%
|     |  |- java.util.ArrayList @ 0x6e49ca5e8                                                        |           24 |        92,040 |      0.04%
|     |  |  '- java.lang.Object[6] @ 0x6e49ca600                                                     |           40 |        92,016 |      0.04%
|     |  |     |- org.forgerock.opendj.grizzly.GrizzlyLdapSocketFilter @ 0x6e49ca628                 |           32 |        91,608 |      0.04%
|     |  |     |- org.glassfish.grizzly.ssl.SSLFilter @ 0x6e49cc190                                  |           56 |           240 |      0.00%
|     |  |     |- org.forgerock.opendj.grizzly.Codecs$ServerCodec @ 0x6e49cc128                      |           32 |            80 |      0.00%
|     |  |     |- org.forgerock.opendj.grizzly.SaslFilter @ 0x6e49cc178                              |           24 |            24 |      0.00%
|     |  |     |- org.glassfish.grizzly.ssl.SSLBaseFilter$SSLTransportFilterWrapper @ 0x6e49cc270    |           24 |            24 |      0.00%
|     |  |     '- Total: 5 entries                                                                   |              |               |           
|     |  |- java.util.RegularEnumSet @ 0x6e49ca5c8                                                   |           32 |            32 |      0.00%
|     |  |- org.glassfish.grizzly.filterchain.DefaultFilterChain$FiltersStateFactory @ 0x6e49cc298   |           16 |            16 |      0.00%
|     |  '- Total: 3 entries                                                                         |              |               |           
|     '- Total: 2 entries                                                                            |              |               |           
|- java.lang.Object @ 0x6401d0c50                                                                    |           16 |            16 |      0.00%
'- Total: 2 entries                                                                                  |              |               |           
sun.security.ssl.SSLSessionContextImpl @ 0x644483d40                                                 |           32 |    24,388,120 |     10.14%
|- sun.security.util.MemoryCache @ 0x644483d60                                                       |           32 |    24,387,952 |     10.14%
|  |- java.util.LinkedHashMap @ 0x644483d80                                                          |           56 |    12,611,184 |      5.24%
|  |- sun.security.ssl.SessionId @ 0x645b05620                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648afed88                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648ddfb60                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8d618                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8d838                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8dac0                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8dd48                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8dfd0                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8e258                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8e4e0                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8e768                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8e9f0                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8ec78                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8eec8                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8f150                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8f3d8                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8f660                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8f8e8                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8fb70                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f8fdf8                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f90080                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f90308                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f90590                                                       |           16 |            64 |      0.00%
|  |- sun.security.ssl.SessionId @ 0x648f90818                                                       |           16 |            64 |      0.00%
|  '- Total: 25 of 210,300 entries; 210,275 more                                                     |              |               |           
|- sun.security.util.MemoryCache @ 0x6445e4a10                                                       |           32 |           136 |      0.00%
|  |- java.util.LinkedHashMap @ 0x6445e4a30                                                          |           56 |            56 |      0.00%
|  |- java.lang.ref.ReferenceQueue @ 0x6445e4a68                                                     |           32 |            48 |      0.00%
|  |  '- java.lang.ref.ReferenceQueue$Lock @ 0x6445e4a88                                             |           16 |            16 |      0.00%
|  '- Total: 2 entries                                                                               |              |               |           
'- Total: 2 entries                                                                                  |              |               |           
-------------------------------------------------------------------------------------------------------------------------------------------------


 

 