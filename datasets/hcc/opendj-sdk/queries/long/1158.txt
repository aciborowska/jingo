Rebuilding indexes while a backup is running fails to build the indexes and leaves the backend offline.

The rebuild-index output in this case is reasonably clear on the cause for the failure, but it should either a) bring the backend online again or b) note the backend is offline before exiting. My preference is for a).


Rebuild Index task 20130930132823428 scheduled to start immediately
[30/Sep/2013:13:28:23 +0100] severity="NOTICE" msgCount=0 msgID=9896349 message="Rebuild Index task 20130930132823428 started execution"
[30/Sep/2013:13:28:23 +0100] severity="INFORMATION" msgCount=1 msgID=9437595 message="Local DB backend userRoot does not specify the number of lock tables: defaulting to 97"
[30/Sep/2013:13:28:23 +0100] severity="INFORMATION" msgCount=2 msgID=9437594 message="Local DB backend userRoot does not specify the number of cleaner threads: defaulting to 24 threads"
[30/Sep/2013:13:28:23 +0100] severity="NOTICE" msgCount=3 msgID=9896306 message="The backend userRoot is now taken offline"
[30/Sep/2013:13:28:23 +0100] severity="SEVERE_ERROR" msgCount=4 msgID=10748759 message="An error occurred while attempting to acquire a exclusive lock for backend userRoot:  The attempt to obtain an exclusive lock on file /Users/cjr/Documents/workspace/example/ds1/./locks/backend-userRoot.lock was rejected because a shared lock was already held on that file.  This generally means that some other process has an lock on this backend or the server is running with this backend online. The rebuild process cannot continue"
[30/Sep/2013:13:28:23 +0100] severity="NOTICE" msgCount=5 msgID=9896350 message="Rebuild Index task 20130930132823428 finished execution"
Rebuild Index task 20130930132823428 did not complete successfully

