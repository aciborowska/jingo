After running modify attribute (add/delete attribute in same modifyRequest) tests for several hours there is a NoSuchElementException thrown in java.util.TreeMap.key(TreeMap.java:1221).

Full stack from errors log:

[25/May/2012:16:08:39 +0200] category=CORE severity=NOTICE msgID=458891 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerStarted, alert ID 458887):  The Directory Server has started successfully
[25/May/2012:23:39:10 +0200] category=SYNC severity=NOTICE msgID=15138869 msg=Exception when reading messages from Replication server RS(8235) for domain "dc=europe,dc=com"
[26/May/2012:09:21:49 +0200] category=CORE severity=FATAL_ERROR msgID=327820 msg=An uncaught exception during processing for thread Replication server RS(207) monitor publisher for domain "dc=europe,dc=com" has caused it to terminate abnormally.  The stack trace for that exception is:  java.util.NoSuchElementException
  java.util.TreeMap.key(TreeMap.java:1221)
  java.util.TreeMap.firstKey(TreeMap.java:285)
  org.opends.server.replication.server.MsgQueue.first(MsgQueue.java:62)
  org.opends.server.replication.server.MessageHandler.getOlderUpdateCN(MessageHandler.java:571)
  org.opends.server.replication.server.ServerHandler.getApproxFirstMissingDate(ServerHandler.java:445)
  org.opends.server.replication.server.ReplicationServerDomain.initializePendingMonitorData(ReplicationServerDomain.java:2723)
  org.opends.server.replication.server.ReplicationServerDomain.computeDomainMonitorData(ReplicationServerDomain.java:2591)
  org.opends.server.replication.server.MonitoringPublisher.run(MonitoringPublisher.java:111)

[26/May/2012:09:21:49 +0200] category=CORE severity=NOTICE msgID=458891 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID 327820):  An uncaught exception during processing for thread Replication server RS(207) monitor publisher for domain "dc=europe,dc=com" has caused it to terminate abnormally.  The stack trace for that exception is:  java.util.NoSuchElementException
  java.util.TreeMap.key(TreeMap.java:1221)
  java.util.TreeMap.firstKey(TreeMap.java:285)
  org.opends.server.replication.server.MsgQueue.first(MsgQueue.java:62)
  org.opends.server.replication.server.MessageHandler.getOlderUpdateCN(MessageHandler.java:571)
  org.opends.server.replication.server.ServerHandler.getApproxFirstMissingDate(ServerHandler.java:445)
  org.opends.server.replication.server.ReplicationServerDomain.initializePendingMonitorData(ReplicationServerDomain.java:2723)
  org.opends.server.replication.server.ReplicationServerDomain.computeDomainMonitorData(ReplicationServerDomain.java:2591)
  org.opends.server.replication.server.MonitoringPublisher.run(MonitoringPublisher.java:111)

[27/May/2012:03:01:04 +0200] category=SYNC severity=NOTICE msgID=15138869 msg=Exception when reading messages from Replication server RS(8235) for domain "dc=europe,dc=com"
[27/May/2012:03:01:04 +0200] category=SYNC severity=SEVERE_ERROR msgID=14942389 msg=The connection from this replication server RS(207) to replication server RS(8235) at m1.europe.com/127.0.0.1:1989 for domain "dc=europe,dc=com" has failed
[28/May/2012:10:56:42 +0200] category=SYNC severity=NOTICE msgID=15138869 msg=Exception when reading messages from Replication server RS(8235) for domain "dc=europe,dc=com"

Setup is 2 OpenDJ servers (M1 and M2) configured for replication.

OpenDJ 2.5.0
Build ID: 20120523095419Z
Revision Number: 8001

Client is OpenDJ SDK running ModifyRequest vs M1 only.

  final ModifyRequest request =
     Requests.newModifyRequest(dnString).addModification(
        ModificationType.DELETE, attribute).addModification(
        ModificationType.ADD, attribute, value);

Exception is seen in errors log for M2.
