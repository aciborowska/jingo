After installing the opendj package on OpenIndiana, sudo /usr/opendj/configure runs, but pfexec /usr/opendj/configure returns permission denied even when the user has the role root.

/usr/opendj/configure and /usr/opendj/unconfigure have permissions 744. It appears that the permissions are evaluated before pfexec gets a chance to run. Granted, these scripts should not be executed by non-root users, but such users can still run sh /usr/opendj/unconfigure.

So perhaps the alternative is for the script to check that it's being run by root. I describe one workaround in my blog at http://marginnotes2.wordpress.com/2011/05/09/opendj-register-with-smf-on-openindiana/.