Found using OpenDJ 4.0.0 rev c38f72900e121badd214396309a318991940f01d

Scenario
1. install and configure 3.0.0 server
2. stop 3.0.0 server
3. unpack 4.0.0 binaries on top of 3.0.0 server
4. unintall the instance

$ ./opendj/uninstall --cli -n --server-libraries --databases --backup-files --ldif-files --forceOnError	
Deleting Files under the Installation Path ..... Done.

The Uninstall Completed Successfully.
To complete the uninstallation, you must delete manually the following files
and directories:
/tmp/opendj-clu_before_upgrade-inst1/opendj/lib
See /tmp/opendj-uninstall-2152253831577193831.log for a detailed log of this operation.



Uninstall works but we get an exception in the error log:

[02/Jun/2016:01:40:47 +0100] category=CORE severity=NOTICE msgID=org.opends.messages.core.139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while trying to start the Directory Server: InitializationException: The OpenDJ binary version '4.0.0.c38f72900e121badd214396309a318991940f01d' does not match the installed version '3.0.0.185acee3ba68d8da1782007eebacb3701dc996d6'. Please run upgrade before continuing (DirectoryServer.java:1439 DirectoryServer.java:6413)



This has changed compared to the same test with upgrade to OpenDJ 4.0.0 rev 27d6fa4d5acd2cb46d620876f65a6633b82c6be8
The uninstall was successful but we did not have exception in the error log.