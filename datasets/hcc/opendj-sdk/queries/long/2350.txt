With OpenDJ 3.0.0, rev 00bc759fabe809563e9425ae196ec60ba7d61fb4
using je backend or pdb backend.

We set up a server, create indexes and stop the server.
Then we use the verify-index:

[13/10/2015:18:04:23 +0200] category=PLUGGABLE seq=29 severity=INFO msg=Due to changes in the configuration, index dc=com_l is currently operating in a degraded state and must be rebuilt before it can be used
[13/10/2015:18:04:23 +0200] category=PLUGGABLE seq=30 severity=INFO msg=Due to changes in the configuration, index dc=com_homePhone is currently operating in a degraded state and must be rebuilt before it can be used
[13/10/2015:18:04:24 +0200] category=PLUGGABLE seq=31 severity=INFO msg=Checked 102 entries and found 0 error(s) in 0 seconds (average rate 149.1/sec)



when trying to clear the degraded state flag, we get the following error:


[13/10/2015:18:04:25 +0200] category=EXTENSIONS seq=0 severity=INFO msg=Loaded extension from file '/local/GIT/pyforge/DJ1/opendj/lib/extensions/snmp-mib2605.jar' (build 3.0.0-SNAPSHOT, revision 00bc759fabe809563e9425ae196ec60ba7d61fb4)
[13/10/2015:18:04:26 +0200] category=JEB seq=1 severity=FINE msg=Local DB backend userRoot does not specify the number of lock tables: defaulting to 97
[13/10/2015:18:04:26 +0200] category=JEB seq=2 severity=FINE msg=Local DB backend userRoot does not specify the number of cleaner threads: defaulting to 24 threads
[13/10/2015:18:04:26 +0200] category=PLUGGABLE seq=29 severity=INFO msg=Due to changes in the configuration, index dc=com_l is currently operating in a degraded state and must be rebuilt before it can be used
[13/10/2015:18:04:26 +0200] category=PLUGGABLE seq=30 severity=INFO msg=Due to changes in the configuration, index dc=com_homePhone is currently operating in a degraded state and must be rebuilt before it can be used
[13/10/2015:18:04:27 +0200] category=JEB seq=31 severity=FINE msg=Local DB backend userRoot does not specify the number of lock tables: defaulting to 97
[13/10/2015:18:04:27 +0200] category=JEB seq=32 severity=FINE msg=Local DB backend userRoot does not specify the number of cleaner threads: defaulting to 24 threads
[13/10/2015:18:04:27 +0200] category=TOOLS seq=59 severity=SEVERE msg=An error occurred while attempting to perform index rebuild:  There is no index configured for attribute type 'l'




see script attached for reproducing the bug.



