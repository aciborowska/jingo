Found with OpenDJ 4.0.0 rev 0c41b32e5c8

We setup an embedded opendj server using the following command:


/usr/bin/java -cp /tmp/archives/opendj-embedded-server-examples-4.0.0-SNAPSHOT.jar:/tmp/opendj/lib/opendj-slf4j-adapter.jar org.forgerock.opendj.examples.SetupServer /tmp/archives/opendj-4.0.0-SNAPSHOT.zip /tmp/API/opendj

Configuring Directory Server ..... Done.
...



Then we start the server with the examples:

/usr/bin/java -cp /tmp/archives/opendj-embedded-server-examples-4.0.0-SNAPSHOT.jar:/tmp/opendj/lib/opendj-slf4j-adapter.jar org.forgerock.opendj.examples.StartStopServer /tmp/API/opendj



Then we add an entry on default base dn:

/tmp/API/opendj/bin/ldapmodify -h localhost -p 1500 -D "cn=Directory Manager" -w password -a
dn: o=example
objectclass: top
objectclass: domain
dc: example

/tmp/API/opendj/bin/ldapsearch -h localhost -p 1500 -D "cn=Directory Manager" -w password -T -b "o=example"  "(objectclass=*)"
dn: o=example
objectClass: top
objectClass: domain
dc: example
o: example



We use configure example to set base dn to dc=com:

/usr/bin/java -cp /tmp/archives/opendj-embedded-server-examples-4.0.0-SNAPSHOT.jar:/tmp/opendj/lib/opendj-slf4j-adapter.jar org.forgerock.opendj.examples.ConfigureServer /tmp/API/opendj dc=com
The current base Dn(s) of the user backend are: [o=example]
The base Dn of the user backend has been set to: dc=com



We try adding the top entry of dc=com:

/tmp/API/opendj/bin/ldapmodify -h localhost -p 1500 -D "cn=Directory Manager" -w password -a
dn: dc=com
objectclass: top
objectclass: domain
dc: com

ADD operation failed
Result Code:  32 (No Such Entry)
Additional Information:  The provided entry dc=com cannot be added because it does not have a parent and is not defined as one of the suffixes within the Directory Server



The base dn dc=com does not seem to be configured as expected.