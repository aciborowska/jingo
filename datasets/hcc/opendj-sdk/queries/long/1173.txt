Server had been running. I added some additional indexes using the control panel, and then used control panel to rebuild all the indexes.


Equivalent command line to rebuild indexes in 'o=example':
 /Users/cjr/Documents/workspace/foo/ds1/bin/rebuild-index \
           --baseDN o=example \
           --rebuildAll \
           --hostName rih.local \
           --port 4444 \
           --bindDN cn=Directory\ Manager \
           --bindPassword ******** \
           --trustAll



The rebuild failed with: 


[10/Oct/2013:13:20:28 +0100] category=BACKEND severity=NOTICE msgID=9896349 msg=Rebuild Index task 20131010132028559 started execution
[10/Oct/2013:13:20:28 +0100] category=CONFIG severity=SEVERE_ERROR msgID=3408518 msg=org.opends.server.admin.server.ConfigChangeListenerAdaptor.applyConfigurationChange failed for entry ds-cfg-backend-id=userRoot,cn=Backends,cn=config:  result code=Other, admin action required=false, messages="An unexpected error occurred while attempting to determine whether the backend associated with configuration entry ds-cfg-backend-id=userRoot,cn=Backends,cn=config should be enabled or disabled:  Unclosed Database: o_example_street.substring
Databases left open: 1
 (Environment.java:384 RootContainer.java:529 BackendImpl.java:421 BackendConfigManager.java:537 BackendConfigManager.java:69 ServerManagedObjectChangeListenerAdaptor.java:74 ConfigChangeListenerAdaptor.java:342 ConfigFileHandler.java:1759 LocalBackendModifyOperation.java:607 LocalBackendWorkflowElement.java:551 WorkflowImpl.java:197 WorkflowTopologyNode.java:100 ModifyOperationBasis.java:520 InternalClientConnection.java:1640 InternalClientConnection.java:1611 TaskUtils.java:321 RebuildTask.java:233 Task.java:1152 TaskThread.java:207).  It will be disabled"
[10/Oct/2013:13:20:28 +0100] category=CONFIG severity=SEVERE_ERROR msgID=3408518 msg=org.opends.server.admin.server.ConfigChangeListenerAdaptor.applyConfigurationChange failed for entry ds-cfg-backend-id=userRoot,cn=Backends,cn=config:  result code=Other, admin action required=false, messages="Attempt to use non-open Environment object(). (Environment.java:2153 Environment.java:1776 RootContainer.java:789 RootContainer.java:61 ServerManagedObjectChangeListenerAdaptor.java:74 ConfigChangeListenerAdaptor.java:342 ConfigFileHandler.java:1759 LocalBackendModifyOperation.java:607 LocalBackendWorkflowElement.java:551 WorkflowImpl.java:197 WorkflowTopologyNode.java:100 ModifyOperationBasis.java:520 InternalClientConnection.java:1640 InternalClientConnection.java:1611 TaskUtils.java:321 RebuildTask.java:233 Task.java:1152 TaskThread.java:207)"
[10/Oct/2013:13:20:28 +0100] category=CONFIG severity=SEVERE_ERROR msgID=3408518 msg=org.opends.server.admin.server.ConfigChangeListenerAdaptor.applyConfigurationChange failed for entry ds-cfg-backend-id=userRoot,cn=Backends,cn=config:  result code=Other, admin action required=false, messages="An error occurred while attempting to register base DN o=example in the Directory Server:  java.lang.IllegalStateException: Attempt to use non-open Environment object()."
[10/Oct/2013:13:20:28 +0100] category=TASK severity=SEVERE_ERROR msgID=11796482 msg=The task could not disable a backend: ds-cfg-backend-id=userRoot,cn=Backends,cn=config
[10/Oct/2013:13:20:28 +0100] category=BACKEND severity=NOTICE msgID=9896350 msg=Rebuild Index task 20131010132028559 finished execution



I restarted the server, re-enabled the backend, and tried repeating the reindex, but that still failed.