Found with DJ 6.0.0 rev 4376a5d99a7

We set up a server and pass it a token for its http listen port:


./DJ1/opendj/bin/dsconfig --offline set-connection-handler-prop --handler-name "HTTP Connection Handler" --set listen-port:&{listen.port} -n



We use a json file to resolve this token with a bad content:

more myjson.json 
listen.port=5555



We set the PROPERTY_RESOLVER_DIRS env variable to point to the correct directory and start the server:


./DJ1/opendj/bin/start-ds

An error occurred while attempting to bootstrap the Directory Server: IllegalStateException: Failed to load JSON file /local/GIT/pyforge/results/20180131-093855/commons_config_group/tmp/myjson.json (JsonFileResolver.java:91 PropertyResolvers.java:102 PropertyResolvers.java:89 ReduceOps.java:80 Spliterators.java:948 AbstractPipeline.java:481 AbstractPipeline.java:471 ReduceOps.java:708 AbstractPipeline.java:234 ReferencePipeline.java:484 PropertyResolvers.java:80 ReferencePipeline.java:193 ReferencePipeline.java:175 Spliterators.java:948 AbstractPipeline.java:481 AbstractPipeline.java:471 ReduceOps.java:708 AbstractPipeline.java:234 ReferencePipeline.java:499 PropertyResolvers.java:66 DirectoryEnvironmentConfig.java:360 ...)
[31/Jan/2018:09:39:22 +0100] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServerShutdownHook and the reason provided for the shutdown was The Directory Server shutdown hook detected that the JVM is shutting down. This generally indicates that JVM received an external request to stop (e.g., through a kill signal)
[31/Jan/2018:09:39:22 +0100] category=CORE severity=ERROR msgID=140 msg=An uncaught exception during processing for thread Directory Server Shutdown Hook has caused it to terminate abnormally. The stack trace for that exception is: NullPointerException (DirectoryServer.java:3505 DirectoryServerShutdownHook.java:53)
[31/Jan/2018:09:39:22 +0100] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID org.opends.messages.core-140): An uncaught exception during processing for thread Directory Server Shutdown Hook has caused it to terminate abnormally. The stack trace for that exception is: NullPointerException (DirectoryServer.java:3505 DirectoryServerShutdownHook.java:53)




The error message is correct but:
1) there is a very large useless stack trace for it.
2) when in the shutdown part, there is a NPE