Trying enable replication with dsreplcation from a DJ3.0 fresh install to an existing DJ2.6.2 replica (DS+RS CTS Store), I get:


./dsreplication
What do you want to do?

    1)  Enable Replication
    2)  Disable Replication
    3)  Initialize Replication on one Server
    4)  Initialize All Servers
    5)  Pre External Initialization
    6)  Post External Initialization
    7)  Display Replication Status
    8)  Purge Historical

    c)  cancel

Enter choice: 1


>>>> Specify server administration connection parameters for the first server

Directory server hostname or IP address [lab04-fr]:

Directory server administration port number [4444]:

Global Administrator User ID, or bind DN if no Global Administrator is defined
[admin]: cn=Directory Manager

Password for user 'cn=Directory Manager':
Replication port for the first server (the port must be free) [8989]: 4989

Do you want replication to use encrypted communication when connecting to
replication port 4989 on the first server? (yes / no) [no]:



>>>> Specify server administration connection parameters for the second server

Directory server hostname or IP address [lab04-fr]: lab03-fr

Directory server administration port number [4444]: 1444

Global Administrator User ID, or bind DN if no Global Administrator is defined
[admin]:

Server Certificate:

User DN  : CN=lab03-fr.internal.forgerock.com, O=Administration Connector
Self-Signed Certificate
Validity : From 'Mon Dec 22 12:35:42 CET 2014'
             To 'Sun Dec 17 12:35:42 CET 2034'
Issuer   : CN=lab03-fr.internal.forgerock.com, O=Administration Connector
Self-Signed Certificate


Do you trust this server certificate?

    1)  No
    2)  Yes, for this session only
    3)  Yes, also add it to a truststore
    4)  View certificate details

Enter choice [2]: 2
The Certificate presented by the server lab04-fr:1444 could not be trusted.
There is a name mismatch between the name of the server (lab04-fr) and the
subject DN of the certificate.  This could be caused because you are connected
to a server pretending to be lab04-fr:1444.
Before accepting this certificate, you should examine the server's certificate
carefully.

Server Certificate:

User DN  : CN=lab03-fr.internal.forgerock.com, O=Administration Connector
Self-Signed Certificate
Validity : From 'Mon Dec 22 12:35:42 CET 2014'
             To 'Sun Dec 17 12:35:42 CET 2034'
Issuer   : CN=lab03-fr.internal.forgerock.com, O=Administration Connector
Self-Signed Certificate


Do you trust this server certificate?

    1)  No
    2)  Yes, for this session only
    3)  Yes, also add it to a truststore
    4)  View certificate details

Enter choice [2]: 2

There are no base DNs available to enable replication between the two servers.



though same suffi xbase dn is supposed to beconfigured on both servers:

# ldapsearch -B -1 -h lab04-fr -p 4389 -b "" -s base "objectclass=*" namingContexts

namingContexts=dc=openam,dc=forgerock,dc=com
# ldapsearch -B -1 -h lab03-fr -p 1389 -b "" -s base "objectclass=*" namingContexts

namingContexts=dc=openam,dc=forgerock,dc=com

