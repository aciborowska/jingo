Found using OpenDJ 3.0.0 in split install/instance mode.


	Scenario *


	unzip the archive and create a file "instance.loc" containing the path to the instance

$ cd opendj
$ echo "/tmp/opendj-instance" > ./instance.loc


	setup the server
	enable the SNMP Connection Handler

$ /tmp/opendj/bin/dsconfig -h localhost -p 4444 -D "cn=myself" -w password -X set-connection-handler-prop --handler-name "SNMP Connection Handler" --set enabled:true --set opendmk-jarfile:/tmp/opendmk/lib/jdmkrt.jar --set listen-port:11161 --set trap-port:11162 -n
Nov 18, 2015 11:45:53 AM org.forgerock.i18n.slf4j.LocalizedLogger error
SEVERE: The extensions directory /tmp/opendj-instance/lib/extensions does not exist, therefore no extensions will be loaded
$ echo $?
0


	check the status of the connection handler

$ /tmp/opendj/bin/status -D cn=myself -w password -X -n 
..
          --- Server Details ---
Host Name:                localhost
Administrative Users:     cn=myself
Installation Path: /tmp/opendj
Instance Path: /tmp/opendj-instance
...
          --- Connection Handlers ---
Address:Port  : Protocol : State
--------------:----------:---------
--            : LDIF     : Disabled
0.0.0.0:1389  : LDAP     : Enabled
0.0.0.0:1636  : LDAPS    : Enabled
0.0.0.0:1689  : JMX      : Disabled
0.0.0.0:8080  : HTTP     : Disabled
0.0.0.0:11161 : SNMP     : Enabled
...





So despite the error message during dsconfig the connection handler seems to be enabled.

But when I look at the "logs/errors" file, I can see that the connection handler is not initialized:

[18/Nov/2015:11:45:07 +0100] category=org.opends.server.snmp.SNMPConnectionHandler severity=ERROR msgID=org.opends.messages.protocol.1465 msg=Cannot initialize the SNMP Connection Handler. Please check the configuration attributes



This is confirmed when I try to do a snmp walk:

$ snmpwalk  -v 2c -c OpenDJ@OpenDJ localhost:11161 
Timeout: No Response from localhost:11161


