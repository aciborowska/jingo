Summary:
A bug has been identified during stability testing of the TTL Reaper feature which results in a drop in performance during the test run.

Test Description:

A stability test was conducted to run for 3 days. The test setup consists of one AM instance and two DJ instances. During the test run an error was noticed 20 hours into the test which indicated that the TTL Reaper had encountered an error.

Expected Behaviour

TTL Reaper is able to maintain stable token cleanup behaviour for the duration of the test.

Actual Behaviour

The test run proceeded normally for the first 20 hours of the test run. Then the following error was noticed in the error log at 16:15:11, 19:50:11, 19:58:31, 20:43:21, ...):


[23/Nov/2017:16:15:11 +0100] category=BACKEND severity=ERROR msgID=646 msg=An unexpected error occurred while purging expired entries: java.lang.NullPointerException exception=ExecutionException: 
java.lang.NullPointerException (
FutureTask.java:122 
FutureTask.java:192 
EntryContainer.java:1660 
RootContainer.java:202 
RootContainer.java:175 
CronExecutorService.java:257 
Executors.java:511 
FutureTask.java:266 
ThreadPoolExecutor.java:1142 
ThreadPoolExecutor.java:617 
Thread.java:745)



OpenDJ version: OpenDJ Server 3.5.2+OPENDJ-2071-TEST starting import (build 20171102105417, R8f9ba021a826cc860c9c5cb4b2738562cf2f7318)