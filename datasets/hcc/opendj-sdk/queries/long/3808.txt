I have configured two DJs with following commands:


./setup directory-server -h pyforge.example.com -p 1389 -D "cn=myself" -w password --adminConnectorPort 4444 -Z 1636 -b dc=example,dc=com -t je -d 100





./setup directory-server -h pyforge.example.com -p 1390 -D "cn=myself" -w password --adminConnectorPort 4445 -Z 1637 -b dc=example,dc=com -t je



and I enabled replication between these two DJs:



./dsreplication configure --host1 pyforge.example.com --port1 4444 --bindDN1 "cn=myself" --bindPassword1 "password" --replicationPort1 8989 --host2 pyforge.example.com --port2 4445 --bindDN2 "cn=myself" --bindPassword2 "password" --replicationPort2 8990 -b dc=example,dc=com -I admin -w password  -X -n

./dsreplication initialize-all -h pyforge.example.com -p 4444 -b dc=example,dc=com -I admin -w password  -X -n



than I added privileges:


./dsconfig -h pyforge.example.com -p 4444 -D "cn=myself" -w password -X set-root-dn-prop --add default-root-privilege-name:proxied-auth -n

./dsconfig -h pyforge.example.com -p 4445 -D "cn=myself" -w password -X set-root-dn-prop --add default-root-privilege-name:proxied-auth -n




after that I configured proxy with ssl with following command:


./setup proxy-server --proxyUserBindDn cn=myself --proxyUserBindPassword password --proxyUsingSsl --useJvmTrustStore --staticPrimaryServer pyforge.example.com:1636 --staticPrimaryServer pyforge.example.com:1637 --loadBalancingAlgorithm affinity -h pyforge.example.com -p 1391 -D "cn=myself" -w password --adminConnectorPort 4446 



after all I noticed following message in errors log of proxy instance:



category=org.opends.messages.external severity=WARNING msgID=1 msg=GRIZZLY0013: Exception during FilterChain execution exception=IllegalArgumentException: Protocols may not be null (ProtocolList.java:79 ProtocolList.java:52 SSLEngineImpl.java:2081 SSLEngineConfigurator.java:243 SSLEngineConfigurator.java:215 SSLFilter.java:347 SSLFilter.java:241 SSLFilter.java:168 ExecutorResolver.java:111 DefaultFilterChain.java:284 DefaultFilterChain.java:201 DefaultFilterChain.java:133 DefaultFilterChain.java:112 ProcessorExecutor.java:77 DefaultFilterChain.java:414 NIOConnection.java:431 NIOConnection.java:405 GrizzlyLdapConnection.java:600 GrizzlyLdapConnection.java:311 GrizzlyLdapConnection.java:304 Utils.java:56 ...)


