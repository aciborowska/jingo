Reported on OpenDJ 3.5.2, but also applies to 3.5.3 and 5.5.0.

If backups of different backends are made to the same directory, the resulting backend.info file has the backend_dn of the first backend that was backed up.

E.g. on DS 5.5.0


$ ./backup --backendID backend1 --backupDirectory /backup --offline
$ ./backup --backendID backend2 --backupDirectory /backup --offline


 

 


$ more /backup/backup.info
backend_dn=ds-cfg-backend-id=backend1,cn=Backends,cn=config

backup_id=20180223024941Z
...
property.archive_file=backup-backend1-20180223024941Z
...

backup_id=20180223030101Z
...
property.archive_file=backup-backend2-20180223030101Z
...

 

 

When a restore is done, the backups are restored to backend1, because the backend_dn in the backup.info points to backend1.

=> It would be good to document this clearly in the admin guide, that the backups need to go to separate backupDirectory for each backendID.

 