Replicating changes to an RS on a disk without enough space eventually fails with this error:


[19/Aug/2015:13:15:33 +0100] category=CORE severity=NOTICE msgID=org.opends.messages.core.139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.extensions.DiskSpaceMonitor (alert type This alert type will be used to provide notification that the free disk space has reached the full threshold., alert ID org.opends.messages.core-750): The disk containing directory /Volumes/smalldisk used by userRoot is full (50864128 bytes free). Write operations to the backend, replication updates included, will fail until the free space rises above the threshold
[19/Aug/2015:13:15:37 +0100] category=SYNC severity=ERROR msgID=org.opends.messages.replication.67 msg=Could not replay operation AddOperation(connID=-1, opID=581, dn=cn=Kiet Blaufus,ou=test2,dc=example,dc=com) with ChangeNumber 0000014f45e2ba3d4dbf000000ac error Unwilling to Perform There is not enough space on the disk for the database to perform the write operation



After making a bit of space, restarting the server reveals an issue in the new changelog:


[19/Aug/2015:13:18:15 +0100] category=SYNC severity=ERROR msgID=org.opends.messages.replication.274 msg=The following log '/Volumes/smalldisk/opendj/changelogDb/2.dom/19903.server' must be released but it is not referenced."
[19/Aug/2015:13:18:15 +0100] category=SYNC severity=ERROR msgID=org.opends.messages.replication.11 msg=The replication server failed to start because the database /Volumes/smalldisk/opendj/changelogDb could not be read : Could not get or create replica DB for baseDN 'dc=example,dc=com', serverId '19903', generationId '8970'

