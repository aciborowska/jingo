Steps to reproduce (trivial):

1. Unzip an OpenDJ archive of one of the versions mentioned above
2. Run the following commands:


$ bin/authrate -p 1389 -D %3$s -w password -f -c 10 -b "ou=people,dc=example,dc=com" -s one -g "rand(0,10)" "(uid=user.%d)"
Conversion = '3'




$ bin/authrate -p 1389 -D '%3$s' -w password -f -c 10 -b "ou=people,dc=example,dc=com" -s one -g "rand(0,10)" "(uid=user.%d)"
Format specifier '%3$s'



Actual vs Expected behavior

Error message is a bit cryptic for the brave user which has tried  to use substitution format without success.
We should try to output a more clear one.

Quick investigation summary

Trying to debug actual code shows that the exception is thrown in the last line of AuthRate#validateparameters:


        void validateParameters(final LdapClient factory) throws ClientException, ArgumentException {
            validateDataSourcesForParameters();
            try (LdapClientSocket socket = factory.connect().blockingGet()) {
                [...]
                socket.send(getBindRequest(data, null)).blockingLast(); // Boom !!
            }
        }


And it's caught by the global catch (final Exception e) of Utils#runTool. That would explains why the message is not really helpfull.

An alternative to fix would be to try to perform a dry run call of String#format() to catch exceptions.