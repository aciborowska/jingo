Product Versions Used:

	OpenIDM 7.0.0-SNAPSHOT 83f3afa
	OpenDJ 7.0.0-M2020-6.1



PyForge Test Reproduction:

config.cfg:


[OpenIDM]
host_name = ${Default:host_name}
java_home = ${Default:java_home}
java_args = ${Default:java_args}
version = 7.0.0-SNAPSHOT
previous_version = 6.5.0
protocol = http
repo_type = external_dj
use_docker_repo = False
jvm_debug_options = ${Default:jvm_debug_options}


Test case command:


./run-pybot.py -s managed_objects -t crud_on_user_with_special_characters_in_id openidm


Test Description:

Starts IDM with external dj as it's repo type and DJ is launched with the 'idm-repo' profile.

Creates a user with special characters:

@&()§-_^¨$*€£<>.:=

Performs more CRUD operations and the test succeeds, but during teardown there are unexpected errors logged on the DJ server's logs/errors.

[12/May/2020:15:58:56 -0700] category=SYNC severity=NOTICE msgID=204 msg=Replication server RS(Nelson_Ormsby) started listening for new connections on address 0.0.0.0 port 8989
[12/May/2020:15:58:56 -0700] category=SYNC severity=NOTICE msgID=62 msg=Directory server DS(Nelson_Ormsby) has connected to replication server RS(Nelson_Ormsby) for domain "dc=openidm,dc=forgerock,dc=com" at 127.0.0.1:8989 with generation ID 532443
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on Administration Connector 0.0.0.0:34444
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAP 0.0.0.0:31389
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAPS 0.0.0.0:1636
[12/May/2020:15:58:56 -0700] category=CORE severity=NOTICE msgID=135 msg=The Directory Server has started successfully
[12/May/2020:15:58:56 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerStarted, alert ID org.opends.messages.core-135): The Directory Server has started successfully
[12/May/2020:15:59:22 -0700] category=CORE severity=ERROR msgID=140 msg=An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: RuntimeException: org.opends.server.replication.server.changelog.api.ChangelogException: Could not decode a record from data read in log file 'java.io.RandomAccessFile@3a1dd0dc' (ChangeNumberIndexer.java:614)
[12/May/2020:15:59:22 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID org.opends.messages.core-140): An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: RuntimeException: org.opends.server.replication.server.changelog.api.ChangelogException: Could not decode a record from data read in log file 'java.io.RandomAccessFile@3a1dd0dc' (ChangeNumberIndexer.java:614)
[12/May/2020:15:59:46 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServerShutdownHook and the reason provided for the shutdown was The Directory Server shutdown hook detected that the JVM is shutting down. This generally indicates that JVM received an external request to stop (e.g., through a kill signal)
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on Administration Connector 0.0.0.0:34444
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on LDAP 0.0.0.0:31389
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on LDAPS 0.0.0.0:1636
[12/May/2020:15:59:46 -0700] category=BACKEND severity=NOTICE msgID=370 msg=The backend idmRepo is now taken offline

and

[12/May/2020:15:58:56 -0700] category=SYNC severity=NOTICE msgID=62 msg=Directory server DS(Nelson_Ormsby) has connected to replication server RS(Nelson_Ormsby) for domain "dc=openidm,dc=forgerock,dc=com" at 127.0.0.1:8989 with generation ID 532443
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on Administration Connector 0.0.0.0:34444
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAP 0.0.0.0:31389
[12/May/2020:15:58:56 -0700] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAPS 0.0.0.0:1636
[12/May/2020:15:58:56 -0700] category=CORE severity=NOTICE msgID=135 msg=The Directory Server has started successfully
[12/May/2020:15:58:56 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerStarted, alert ID org.opends.messages.core-135): The Directory Server has started successfully
[12/May/2020:15:59:22 -0700] category=CORE severity=ERROR msgID=140 msg=An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: RuntimeException: org.opends.server.replication.server.changelog.api.ChangelogException: Could not decode a record from data read in log file 'java.io.RandomAccessFile@3a1dd0dc' (ChangeNumberIndexer.java:614)
[12/May/2020:15:59:22 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID org.opends.messages.core-140): An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: RuntimeException: org.opends.server.replication.server.changelog.api.ChangelogException: Could not decode a record from data read in log file 'java.io.RandomAccessFile@3a1dd0dc' (ChangeNumberIndexer.java:614)
[12/May/2020:15:59:46 -0700] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServerShutdownHook and the reason provided for the shutdown was The Directory Server shutdown hook detected that the JVM is shutting down. This generally indicates that JVM received an external request to stop (e.g., through a kill signal)
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on Administration Connector 0.0.0.0:34444
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on LDAP 0.0.0.0:31389
[12/May/2020:15:59:46 -0700] category=PROTOCOL severity=NOTICE msgID=277 msg=Stopped listening for new connections on LDAPS 0.0.0.0:1636
[12/May/2020:15:59:46 -0700] category=BACKEND severity=NOTICE msgID=370 msg=The backend idmRepo is now taken offline
