Reading all operational attributes from the following entry causes a NPE inside the GoverningStructureRuleVirtualAttributeProvider:


dn: ou=dashboardService,ou=services,dc=amreplication,dc=org
objectClass: sunService
objectClass: top
ou: dashboardService
createTimestamp: 20150315093848Z
creatorsName: cn=Directory Manager,cn=Root DNs,cn=config
entryUUID: c5ec06b4-8cad-4bdb-a2d2-7c9ff8ae7ca3




$ bin/ldapsearch -D "cn=Directory manager" -w password -h localhost -p 1389 -b ou=dashboardservice,ou=services,dc=amreplication,dc=org -s base "(&)" +
SEARCH operation failed
Result Code:  80 (Other)
Additional Information:  An unexpected error was encountered while processing a search in one of the Directory Server backends:  NullPointerException()



The schema definition for 'sunService' is not present.

The NPE is thrown at the start of GoverningStructureRuleVirtualAttributeProvider.getDITStructureRule(), because getNameForm is being called with a null oc.


  private DITStructureRule getDITStructureRule(Entry entry)
  {
    ObjectClass oc = entry.getStructuralObjectClass();
    List<NameForm> listForms = DirectoryServer.getNameForm(oc);
[...]

