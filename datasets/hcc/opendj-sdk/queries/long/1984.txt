Install DJ3 (rev 12168) with persistit and add CTS store schema.
Try to run CTS token creation load with addrate:


 ./addrate -p 4389 -h lab03-fr -D "cn=Directory Manager" -w password  -f -c 40 -C off $PWD/tokenroot.template



=> the command unexpectedly hangs.

From a jstack output, it looks like we get a deadlock between the following 2 threads:

"Worker Thread 40" #99 prio=5 os_prio=0 tid=0x00007f2fe54a4800 nid=0x599c waiting for monitor entry [0x00007f2de38f7000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:469)
        - waiting to lock <0x00000006b6cb3168> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:473)
        - locked <0x00000006b6cb2dc8> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromCache(LockManager.java:443)
        at org.opends.server.types.LockManager.tryWriteLockEntry(LockManager.java:381)
        at org.opends.server.workflowelement.localbackend.LocalBackendAddOperation.processAdd(LocalBackendAddOperation.java:247)
        at org.opends.server.workflowelement.localbackend.LocalBackendAddOperation.processLocalAdd(LocalBackendAddOperation.java:176)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.execute(LocalBackendWorkflowElement.java:616)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.executeOnNonRootDSE(LocalBackendWorkflowElement.java:906)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.execute(LocalBackendWorkflowElement.java:777)
        at org.opends.server.core.AddOperationBasis.run(AddOperationBasis.java:573)
        at org.opends.server.extensions.TraditionalWorkerThread.run(TraditionalWorkerThread.java:158)
  
  [...]
  
  "Worker Thread 57" #116 prio=5 os_prio=0 tid=0x00007f2fe54c5800 nid=0x59ad waiting for monitor entry [0x00007f2de27e6000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:469)
        - waiting to lock <0x00000006b6cb2dc8> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:473)
        - locked <0x00000006b6cb3088> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:473)
        - locked <0x00000006b6cb3168> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromLockTable(LockManager.java:473)
        - locked <0x00000006b6cb3228> (a java.util.LinkedList)
        at org.opends.server.types.LockManager.acquireLockFromCache0(LockManager.java:452)
        at org.opends.server.types.LockManager.acquireLockFromCache(LockManager.java:443)
        at org.opends.server.types.LockManager.tryWriteLockEntry(LockManager.java:381)
        at org.opends.server.workflowelement.localbackend.LocalBackendAddOperation.processAdd(LocalBackendAddOperation.java:247)
        at org.opends.server.workflowelement.localbackend.LocalBackendAddOperation.processLocalAdd(LocalBackendAddOperation.java:176)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.execute(LocalBackendWorkflowElement.java:616)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.executeOnNonRootDSE(LocalBackendWorkflowElement.java:906)
        at org.opends.server.workflowelement.localbackend.LocalBackendWorkflowElement.execute(LocalBackendWorkflowElement.java:777)
        at org.opends.server.core.AddOperationBasis.run(AddOperationBasis.java:573)
        at org.opends.server.extensions.TraditionalWorkerThread.run(TraditionalWorkerThread.java:158)

