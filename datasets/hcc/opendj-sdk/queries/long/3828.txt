Whilst upgrading AM to use DJ 4.0.0-RC1 a problem was flagged up by the AM Functional Tests.

The problem seems to be when attempting to create an equality filter with an attribute description containing an "=" (i,e. "sunxmlKeyValue=action") will cause an error to be thrown.

After some investigation I found if i revert the change to org.forgerock.opendj.ldap.Filter#equality made in commit 07811ee21cc, the test passes.


Reproduction steps:

	Build https://stash.forgerock.org/projects/OPENAM/repos/openam/pull-requests/2390/overview
	Run AM FT (Temper): ./temper functional-tests --deploy PATH_TO_AM_WAR -H openam.example.com --only-classes TestRESTPolApplicationsV1Create




Stacktrace:


org.forgerock.i18n.LocalizedIllegalArgumentException: The attribute description "sunxmlKeyValue=actions" could not be parsed because it contains an invalid character "=" at position 14
	at org.forgerock.opendj.ldap.AttributeDescription.illegalCharacter(AttributeDescription.java:1116)
	at org.forgerock.opendj.ldap.AttributeDescription.valueOf0(AttributeDescription.java:941)
	at org.forgerock.opendj.ldap.AttributeDescription.validateAttributeDescription(AttributeDescription.java:824)
	at org.forgerock.opendj.ldap.Filter.equality(Filter.java:539)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitEqualsFilter(SmsQueryFilterVisitor.java:47)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitEqualsFilter(SmsQueryFilterVisitor.java:33)
	at org.forgerock.util.query.QueryFilter$EqualsImpl.accept(QueryFilter.java:197)
	at org.forgerock.util.query.QueryFilter.accept(QueryFilter.java:945)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.getSubFilters(SmsQueryFilterVisitor.java:71)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitAndFilter(SmsQueryFilterVisitor.java:37)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitAndFilter(SmsQueryFilterVisitor.java:33)
	at org.forgerock.util.query.QueryFilter$AndImpl.accept(QueryFilter.java:63)
	at org.forgerock.util.query.QueryFilter.accept(QueryFilter.java:945)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.getSubFilters(SmsQueryFilterVisitor.java:71)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitAndFilter(SmsQueryFilterVisitor.java:37)
	at org.forgerock.openam.entitlement.configuration.SmsQueryFilterVisitor.visitAndFilter(SmsQueryFilterVisitor.java:33)
	at org.forgerock.util.query.QueryFilter$AndImpl.accept(QueryFilter.java:63)
	at org.forgerock.util.query.QueryFilter.accept(QueryFilter.java:945)
	at org.forgerock.openam.entitlement.configuration.ResourceTypeConfigurationImpl.getResourceTypes(ResourceTypeConfigurationImpl.java:241)

