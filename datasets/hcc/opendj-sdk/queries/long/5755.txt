The AM identity store and IDM repo profiles store users and groups. Therefore they must configure default user indexes, as is the case for the DS evaluation profile.

We may also want to consider adding them for AM config store, or at least verify with the AM team that the indexes are not needed.

Note that the CTS profile definitely does not need these indexes.

The affected profiles should contain similar logic to the DS evaluation profile. Specifically:



// Add default indexes for example user data
ds.addIndex "cn", "equality", "substring"
ds.addIndex "givenName", "equality", "substring"
ds.addIndex "mail", "equality", "substring"
ds.addIndex "sn", "equality", "substring"
ds.addIndex "telephoneNumber", "equality", "substring"
ds.addIndex "member", "equality"
ds.addIndex "uniqueMember", "equality"



Alternatively, we should expose SetupUtils#createBackendWithDefaultIndexes() in scripts as a Groovy method called something like "addBackendWithDefaultUserIndexes" in Profile.ScriptOperations.