Found using OpenDJ 4.0.0 rev 6046d9bc32174e9fad927bd08947aa0d3ad0e2c5.

Scenario
1. install a server (for instance 3.5.0 version)
2. stop and upgrade the server to 4.0.0
3. start the server and we get the following error:

$ ./opendj/bin/start-ds
-- rc --
returned 1, expected 0
-- stdout --
[02/Jan/2017:05:05:39 +0000] category=com.forgerock.opendj.ldap.config.config severity=NOTICE msgID=571 msg=Loaded extension from file '/tmp/opendj/lib/extensions/snmp-mib2605.jar' (build 4.0.0-SNAPSHOT, revision 6046d9bc32174e9fad927bd08947aa0d3ad0e2c5)
[02/Jan/2017:05:05:39 +0000] category=CORE severity=NOTICE msgID=134 msg=OpenDJ Server 4.0.0-SNAPSHOT (build 20170102011235, revision number 6046d9bc32174e9fad927bd08947aa0d3ad0e2c5) starting up
[02/Jan/2017:05:05:41 +0000] category=JVM severity=NOTICE msgID=21 msg=Installation Directory:  /tmp/opendj
[02/Jan/2017:05:05:41 +0000] category=JVM severity=NOTICE msgID=23 msg=Instance Directory:  /tmp/opendj
[02/Jan/2017:05:05:41 +0000] category=JVM severity=NOTICE msgID=17 msg=JVM Information: 1.8.0_45-b14 by Oracle Corporation, 64-bit architecture, 921174016 bytes heap size
[02/Jan/2017:05:05:41 +0000] category=JVM severity=NOTICE msgID=18 msg=JVM Host: ig-robot-linux2.internal.forgerock.com, running Linux 4.4.0-38-generic amd64, 4143775744 bytes physical memory size, number of processors available 2
[02/Jan/2017:05:05:41 +0000] category=JVM severity=NOTICE msgID=19 msg=JVM Arguments: "-Dorg.opends.server.scriptName=start-ds"
[02/Jan/2017:05:05:42 +0000] category=BACKEND severity=NOTICE msgID=513 msg=The database backend userRoot containing 208 entries has started
[02/Jan/2017:05:05:42 +0000] category=EXTENSIONS severity=NOTICE msgID=221 msg=DIGEST-MD5 SASL mechanism using a server fully qualified domain name of: ig-robot-linux2.internal.forgerock.com
[02/Jan/2017:05:05:47 +0000] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while trying to start the Directory Server: ConfigException: An error occurred while trying to decode the managed object configuration entry cn=LDAP Connection Handler,cn=Connection Handlers,cn=config: The LDAP Connection Handler could not be decoded due to the following reason: The value "org.opends.server.protocols.ldap.LDAPConnectionHandler" is not a valid value for the "java-class" property, which must have the following syntax: CLASS <= org.opends.server.api.ConnectionHandler (ConfigExceptionFactory.java:71 ServerManagementContext.java:354 ServerManagedObject.java:411 RootCfgDefn.java:2338 ConnectionHandlerConfigManager.java:229 DirectoryServer.java:1753 DirectoryServer.java:1483 DirectoryServer.java:5035)
[02/Jan/2017:05:05:47 +0000] category=BACKEND severity=NOTICE msgID=370 msg=The backend userRoot is now taken offline
[02/Jan/2017:05:05:47 +0000] category=CORE severity=NOTICE msgID=203 msg=The Directory Server is now stopped

