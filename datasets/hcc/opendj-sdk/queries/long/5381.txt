After the change to publish api descriptors in rest2ldap servlet  (commit f15a4ecfc14), we get this exception in subsequent tests, mentioning `The given Schema name "frapi:opendj:rest2ldap:user:1.0" already exists but the Schema objects are not equal`:


javax.servlet.ServletException: org.eclipse.jetty.servlet.ServletHolder$1: java.lang.IllegalStateException: The given Schema name &apos;frapi:opendj:rest2ldap:user:1.0&apos; already exists but the Schema objects are not equal at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:531) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:319) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:175) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:133) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:754) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:672) at java.lang.Thread.run(Thread.java:748)
Caused by: org.eclipse.jetty.servlet.ServletHolder$1: java.lang.IllegalStateException: The given Schema name &apos;frapi:opendj:rest2ldap:user:1.0&apos; already exists but the Schema objects are not equal at org.eclipse.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:628) at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:687) at org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:518) at org.eclipse.jetty.servlet.ServletHolder.prepare(ServletHolder.java:802) at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:530) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:146) at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:548) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:257) at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1595) at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1253) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203) at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:473) at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1564) at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201) at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1155) at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144) at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:219) at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:126) at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) at org.eclipse.jetty.server.Server.handle(Server.java:531) at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:352) at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:260) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:281) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:102) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) ... 3 more Caused by: java.lang.IllegalStateException: The given Schema name &apos;frapi:opendj:rest2ldap:user:1.0&apos; already exists but the Schema objects are not equal at org.forgerock.api.CrestApiProducer.merge(CrestApiProducer.java:121) at org.forgerock.api.CrestApiProducer.merge(CrestApiProducer.java:37) at org.forgerock.services.routing.AbstractRouter.buildApi(AbstractRouter.java:361) at org.forgerock.services.routing.AbstractRouter.notifyDescriptorChange(AbstractRouter.java:334) at org.forgerock.services.routing.AbstractRouter.api(AbstractRouter.java:282) at org.forgerock.json.resource.InternalConnection.api(InternalConnection.java:100) at org.forgerock.json.resource.InternalConnection.api(InternalConnection.java:18) at org.forgerock.json.resource.http.HttpAdapter.updateDescriptor(HttpAdapter.java:834) at org.forgerock.json.resource.http.HttpAdapter.api(HttpAdapter.java:823) at org.forgerock.json.resource.http.HttpAdapter.api(HttpAdapter.java:162) at org.forgerock.http.handler.Handlers$HandlerDescribableAsDescribableHandler.api(Handlers.java:151) at org.forgerock.http.handler.Handlers$HandlerDescribableAsDescribableHandler.api(Handlers.java:135) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:58) at org.forgerock.http.handler.Handlers$1.api(Handlers.java:50) at org.forgerock.http.servlet.HttpFrameworkServlet.init(HttpFrameworkServlet.java:165) at javax.servlet.GenericServlet.init(GenericServlet.java:244) at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:669) ... 28 more

The simplest way to reproduce:


./run-pybot.py -s rest2ldap_group.ApiDescriptorsJetty -s rest2ldap_group.JsonAttrJetty -v DJ


(the issue appears in the JsonAttrJetty suite)