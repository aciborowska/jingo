Noticed this while debugging something else, but when building a HostPort with the allAddresses(int) method, the host is NULL and may result in NPE in the equals method.