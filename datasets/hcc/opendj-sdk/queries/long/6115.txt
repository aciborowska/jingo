Found with rev 15871913657

When trying to modify rest2ldap servlet configuration, we set up the filter template with the following value:


"search": {
                "searchLdapConnectionFactory": "root",
                "bindLdapConnectionFactory": "bind",
                "baseDn": "dc=com",
                "scope": "sub",
                "filterTemplate": "(&(objectClass=inetOrgPerson)(|(cn={username})(uid={username})))"
            }



Then we try performing a query through rest2ldap and it fails with error 500.
In rest2ldap.log:

07-Mar-2019 16:51:20.241 SEVERE [OpenDJ LDAP SDK Client Worker(0)] org.forgerock.i18n.slf4j.LocalizedLogger.error A runtime exception occurred wile processing the request 'GEThttp://localhost:8084/rest2ldap/api/read/users/user.1000?_prettyPrint=true': 'Format specifier '%s''
 java.util.MissingFormatArgumentException: Format specifier '%s'
        at java.util.Formatter.format(Formatter.java:2519)
        at java.util.Formatter.format(Formatter.java:2455)
        at java.lang.String.format(String.java:2940)
        at org.forgerock.opendj.ldap.Filter.format(Filter.java:958)
        at org.forgerock.opendj.rest2ldap.authz.SearchThenBindStrategy.lambda$authenticate$0(SearchThenBindStrategy.java:71)
        at org.forgerock.util.promise.PromiseImpl$1.handleStateChange(PromiseImpl.java:459)
        at org.forgerock.util.promise.PromiseImpl.handleCompletion(PromiseImpl.java:536)
        at org.forgerock.util.promise.PromiseImpl.setState(PromiseImpl.java:577)
        at org.forgerock.util.promise.PromiseImpl.tryHandleResult(PromiseImpl.java:258)
        at org.forgerock.util.promise.PromiseImpl.handleResult(PromiseImpl.java:208)
        at io.reactivex.internal.observers.ConsumerSingleObserver.onSuccess(ConsumerSingleObserver.java:63)
        at io.reactivex.internal.operators.single.SingleDoFinally$DoFinallyObserver.onSuccess(SingleDoFinally.java:75)
        at io.reactivex.internal.operators.single.SingleObserveOn$ObserveOnSingleObserver.run(SingleObserveOn.java:81)
        at io.reactivex.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38)




This looks like a parsing issue in Rest2LdapHttpApplication.parseUserNameTemplate()

(seen with Yannick)
