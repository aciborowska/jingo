This code in ReplicationServer.java is unsafe, as lastGeneratedDraftCN might be altered in parallel.

ReplicationServer.java
// The database was empty, just keep increasing numbers since last time
// we generated one DraftCN.
firstDraftCN += lastGeneratedDraftCN;
lastDraftCN += lastGeneratedDraftCN;



The code has been fixed on the trunk already.