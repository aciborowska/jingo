With the following LDIF the DN should change from "cn=Test user, dc=example, dc=com" to "cn=Test User, dc=example,dc=com":


dn: cn=Test user,dc=example,dc=com
changetype: add
objectclass: person
sn: user

dn: cn=Test user,dc=example,dc=com
changetype: moddn
newrdn: cn=Test User
deleteoldrdn: 1
newsuperior: dc=example,dc=com



Note that the new RDN contains an uppercase "U" whereas the original RDN contains a lowercase "u".

OpenDJ currently rejects such requests with the following error:


modifying rdn of entry "cn=Test user,dc=example,dc=com"
ldap_rename: Already exists (68)
     additional info: The entry cannot be renamed to 'cn=Test User,dc=example,dc=com' because an entry with that name already exists



The attached patch (hopefully) addresses this issue.