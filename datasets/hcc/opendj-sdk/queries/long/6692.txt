Found with rev 39cd13d7c85

In our upgrade tests, we have a template corruption test that removes 02-config.ldif before performing the upgrade.
Before: it used to fail printing out on stderr:

Replacing schema file '02-config.ldif'.   0%       Replacing schema file '02-config.ldif'......   20%       Replacing schema file '02-config.ldif'..............................   FAIL
  Replacing schema file '02-config.ldif'..............................   FAIL

 ** An error occurred while copying the schema file '02-config.ldif':
 '/root/workspace/OpenDJ-7.0.x/tests_daily/Configs/results/20190926-013349/upgrade_group/TemplateCorruption/DJ_CORRUPT6/opendj/template/db/schema/02-config.ldif'
 is missing or empty, it is probably corrupted



Now it fails with this in upgrade.log:


[01/10/2019:10:25:12 +0200] category=org.opends.server.tools.upgrade.UpgradeTasks seq=200 severity=FINE msg=Modifying entry 'cn=config' : [replace: ds-cfg-version
ds-cfg-version: 7.0.0.39cd13d7c85729a852ce3d3aff19baa8398c5af1
-
, replace: ds-cfg-upgrade-version
ds-cfg-upgrade-version: 112
-
]
[01/10/2019:10:25:12 +0200] category=org.opends.server.tools.upgrade.UpgradeCli seq=201 severity=INFO msg=OpenDJ was successfully upgraded to version 7.0.0.39cd13d7c85729a852ce3d3aff19baa8398c5af1
[01/10/2019:10:25:12 +0200] category=org.opends.server.tools.upgrade.UpgradeCli seq=202 severity=INFO msg=Performing post upgrade tasks
[01/10/2019:10:25:12 +0200] category=org.opends.server.tools.upgrade.UpgradeTasks seq=203 severity=FINE msg=Rebuilding index(es) '[.caseIgnoreJsonQueryMatch, .caseExactJsonQueryMatch, ds-sync-hist.changeSequenceNumberOrderingMatch, .telephoneNumberMatch, .telephoneNumberSubstringsMatch]' for base dn(s) '[dc=com]'
[01/10/2019:10:25:12 +0200] category=org.opends.server.tools.upgrade.UpgradeTasks seq=204 severity=FINE msg=The rebuild index tool arguments are [--index, .caseIgnoreJsonQueryMatch, --index, .caseExactJsonQueryMatch, --index, ds-sync-hist.changeSequenceNumberOrderingMatch, --index, .telephoneNumberMatch, --index, .telephoneNumberSubstringsMatch, --configFile, /Users/carole.forel/wks/pyforge/results/20191001-102421/upgrade_group/TemplateCorruption/DJ_CORRUPT6/opendj/config/config.ldif, --baseDN, dc=com]
[01/10/2019:10:25:13 +0200] category=CORE seq=205 severity=SEVERE msg=An error occurred while attempting to register backend __config.ldif__ with the Directory Server: IllegalArgumentException(For attribute type 'ds-mon-backend-is-private': An attribute type should be defined in the schema)
[01/10/2019:10:25:13 +0200] category=CORE seq=206 severity=SEVERE msg=An error occurred while attempting to register backend __config.ldif__ with the Directory Server: IllegalArgumentException(For attribute type 'ds-mon-backend-is-private': An attribute type should be defined in the schema)
[01/10/2019:10:25:13 +0200] category=CORE seq=207 severity=SEVERE msg=An error occurred while attempting to register backend adminRoot with the Directory Server: IllegalArgumentException(For attribute type 'ds-mon-backend-is-private': An attribute type should be defined in the schema)
[01/10/2019:10:25:13 +0200] category=CORE seq=208 severity=SEVERE msg=An error occurred while attempting to register backend adminRoot with the Directory Server: IllegalArgumentException(For attribute type 'ds-mon-backend-is-private': An attribute type should be defined in the schema)
An error occurred while attempting to initialize server components to run the
tool: An error occurred while initializing server backends: An error occurred
while attempting to register backend adminRoot with the Directory Server:
IllegalArgumentException(For attribute type 'ds-mon-backend-is-private': An
attribute type should be defined in the schema)
[01/10/2019:10:25:13 +0200] category=TOOLS seq=209 severity=WARNING msg=An error occurred during post upgrade task. Process aborted. Please check log for further details



To reproduce:

./run-pybot.py -nvs upgrade_group.TemplateCorruption -t Upgrade_Template_02config_Schema_File_Missing opendj

