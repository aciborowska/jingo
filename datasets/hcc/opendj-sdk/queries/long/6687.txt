Found with 7.0.0-SNAPSHOT rev. a1054916dff.

The failing test is:

python3 run-pybot.py -v -s dsconfig_group.offlineOption DJ


This test was disabled for some time, so I don't know when it passed last time. It start to fail after changes on the user which runs tests on jenkins. Now it is a non-root user.

The test checks a behavior of dsconfig tool which modifies a config file to which it has no rights. The test expects failure and return code 1 while the tool now returns 81.

This change in behavior is probably expected but the return code doesn't look correct (accurate) maybe the original return code or return code 82 (Local Error) is more accurate.

Example of dsconfig command:

dsconfig --offline --configFile /tmp/DJ1/opendj/config/config.ldif-test create-key-manager-provider --provider-name "JKSPROVIDER" --type file-based --set enabled:true --set key-store-file:/tmp/serverkeystore --set key-store-pin:keystorepass --set key-store-type:JKS -n


The config file config.ldif-test is a copy of /tmp/DJ1/opendj/config/config.ldif with modified permissions.

Permissions changes (python):

os.chmod('/tmp/DJ1/opendj/config/config.ldif-test', 0o0444)

