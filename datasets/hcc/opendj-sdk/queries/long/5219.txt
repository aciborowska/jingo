Found with rev 78ecc1d87fe

We set up 4 servers so as to have 2 DS and 2 RS
We configure replication between 'DJ1' and 'RS2',
then 'DJ1' and 'RS1'
then 'DJ1' and 'DJ2'
We set replication group for DS and RS:


\DJ1\opendj\bat\dsconfig.bat -h dj-robot-windows.internal.forgerock.com -p 4444 -D "cn=myself" -w password -X set-replication-domain-prop --provider-name "Multimaster Synchronization" --domain-name "dc=com" --set group-id:"my group 1" -n

\RS1\opendj\bat\dsconfig.bat -h dj-robot-windows.internal.forgerock.com -p 4445 -D "cn=myself" -w password -X set-replication-server-prop --provider-name "Multimaster Synchronization" --set group-id:"my group 1" -n

\DJ2\opendj\bat\dsconfig.bat -h dj-robot-windows.internal.forgerock.com -p 4446 -D "cn=myself" -w password -X set-replication-domain-prop --provider-name "Multimaster Synchronization" --domain-name "dc=com" --set group-id:"my group 2" -n

\RS2\opendj\bat\dsconfig.bat -h dj-robot-windows.internal.forgerock.com -p 4447 -D "cn=myself" -w password -X set-replication-server-prop --provider-name "Multimaster Synchronization" --set group-id:"my group 2" -n



We initialize all replication.

Then we check through the cn=monitor entry that a DS is connected with the RS of the same group but that does not seem to be the case anymore:

DJ1 server id 1, group id my group 1
DJ2 server id 3, group id my group 2
RS1 server id 2
RS2 server id 4

\DJ1\opendj\bat\ldapsearch.bat -h dj-robot-windows.internal.forgerock.com -p 1389 -D "cn=myself" -w password -b "ds-mon-domain-name=dc=com,cn=replicas,cn=replication,cn=monitor" "(objectclass=*)" ds-mon-connected-to-server-id

=> DJ2 connected to server id 2




This used to work as expected in previous builds (latest rev where it worked: (e34681d9f1d))

To reproduce:



./run-pybot.py -v -s replication_group1.GroupIdAsString opendj

