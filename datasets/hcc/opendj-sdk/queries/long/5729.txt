When using debugsearchindex to check an ldapsearch using a presence index the result is not as expected, for example,

Install DS6,

Use the built in aci presence index in a search:


$ ldapsearch --port 1389 --bindDN "cn=Directory Manager" --bindPassword password --baseDN dc=example,dc=com -s sub "(aci=*)" debugsearchindex

dn: cn=debugsearch
debugsearchindex: filter=(aci=*)[INDEX:aci.presence][NOT-INDEXED][INDEX:aci.pres
 ence][COUNT:0] final=[COUNT:0]


Not only does it have a [NOT-INDEXED] result it also mentions [INDEX:aci.presence] twice.

 

Doing the same search in 2.6.4 returns the expected result:


dn: cn=debugsearch
debugsearchindex: filter=(aci=*)[INDEX:aci.presence][COUNT:0] final=[COUNT:0]


Checked in 6.5 and the result appears ok again, so seems to be an issue with versions 3.0 to 6.0.