Double clicking any of our app bundles on a Mac results in an error dialog:


"ControlPanel" is damaged and can't be opened. You should move it to the Trash.

[Cancel] [Move to Trash]



Running bin/control-panel from the Terminal works fine.

This appears to be an issue caused by the signature on the JavaApplicationStub binary not matching each bundle. eg:


$ codesign -vvv ds1/bin/ControlPanel.app
ds1/bin/ControlPanel.app: invalid Info.plist (plist or signature have been modified)
In architecture: x86_64



If you sign it - even with an ad-hoc identity - the problem goes away and OS X allows the app to run based on the identity of the signer. (i.e. the normal Gatekeeper settings apply.)


$ codesign -s - --force ds1/bin/ControlPanel.app
ds1/bin/ControlPanel.app: replacing existing signature



Codesigning modifies the JavaApplicationStub binary, so this means that the stub in ControlPanel.app will now be different from the stub in QuickSetup.app, etc.