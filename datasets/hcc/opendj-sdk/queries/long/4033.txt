Found with OpenDJ 4.1.0 rev 88d29f7446197cf0f9bcb49aa137495978e76a67

We setup 2Â DJs with data, replicated.
We setup a proxy server to forward requests to these DJs.
We test our configuration with an authentified user:


./PROXY1/opendj/bin/ldapsearch -h localhost -p 1391 -D "uid=user.0,ou=people,dc=example,dc=com" -w password -b "dc=example,dc=com"  "uid=user.0"

dn: uid=user.0,ou=People,dc=example,dc=com
objectClass: top
objectClass: inetorgperson
objectClass: organizationalperson
objectClass: person
mail: user.0@example.com
initials: AAA
homePhone: +1 720 204 9090
pager: +1 439 180 6470
employeeNumber: 0
telephoneNumber: +1 485 381 2060
mobile: +1 412 030 0042
...



But anonymous search fails:


./PROXY1/opendj/bin/ldapsearch -h localhost -p 1391   -b "dc=example,dc=com"  "(objectclass=*)"

# The LDAP search request failed: 123 (Authorization Denied)
# Additional Information:  Authorization as 'anonymous' specified in the proxied authorization control is not permitted



This error is triggrered on the backend side.

script attached to reproduce this.