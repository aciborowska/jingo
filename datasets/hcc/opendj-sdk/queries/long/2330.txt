With OpenDJ-3.0.0 rev dc749edd290f8a9a5f64b15ef0b214ca580ac044
we have 2 servers, with replication enabled, with pdb backends.

We have a stress test that performs a lot of add/delete on one server during 2 hours. (using sdk add rate)

./bin/addrate -h cantal.internal.forgerock.com -p 1389 -D "cn=Directory Manager" -w password -d 7200 -S -C random -c 10 -t 3 -i 60 -F -s 10000 ./token.template



Then it checks the number of entries on both server and the missing changes for a while, waiting for servers to be in sync and with the expected number of entries.

After 1h30, we can see exception messages raised in replication log file:

[09/Oct/2015:10:39:51 +0200] category=SYNC severity=ERROR msgID=org.opends.messages.replication.32 msg=An unexpected error happened handling connection with Replication
 server RS(21713) for domain "dc=com" AbortedChangelogCursorException: Cursor on log '/external/testuser/jenkins/workspace/OpenDJ-Stress-Tests-Persistit-CTS/results/201
51009-090133/replication/Cts/DJ1/opendj/changelogDb/1.dom/7400.server' has been aborted after a purge or a clear (Log.java:1368 Log.java:1363 Log.java:1468 FileReplicaD
BCursor.java:107 ReplicaCursor.java:120 CompositeDBCursor.java:178 CompositeDBCursor.java:118 DomainDBCursor.java:43 MessageHandler.java:377 MessageHandler.java:275 Ser
verHandler.java:936 ServerWriter.java:104).  This connection is going to be closed

purge delay on servers is 720 seconds.

Servers do not get to synchronize at the end of the test.



