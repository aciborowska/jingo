Found using OpenDJ 6.5.0-SNAPSHOT (c71442fb6dc).

Found the problem running the functional test for issue OPENDJ-3507:

./run-pybot.py -s replication_group3.failover -t ds_sync_hist_after_restart DJ



Scenario:

	install 3 DSRS, import 200k entries and configure replication
	perform lot of modifications on mail attribute on instance with lowest id
	perform lot of modifications on description attribute on instance with biggest id
	perform few modifications on mail attribute on the third instance
	stop and start the third instance



In the log of the third instance (while doing stop) we got:

[23/Aug/2018:03:04:20 +0100] category=CORE severity=ERROR msgID=140 msg=An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: NullPointerException (ChangeNumberIndexer.java:487 ChangeNumberIndexer.java:398)	
[23/Aug/2018:03:04:20 +0100] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.api.DirectoryThread (alert type org.opends.server.UncaughtException, alert ID org.opends.messages.core-140): An uncaught exception during processing for thread Change number indexer has caused it to terminate abnormally. The stack trace for that exception is: NullPointerException (ChangeNumberIndexer.java:487 ChangeNumberIndexer.java:398)

