CC/ Ludovic Poitou Laszlo Hordos - this may explain some of the problems you've seen. It seems quite environment specific. In this case, I'm able to reproduce the problem using microk8s but not minikube nor when running outside of K8S on bare-metal Linux.

Steps to reproduce:


	start ds-empty container in microk8s with dns, registry, and dashboard enabled
	server takes 1 minute to start listening on admin connector:


[ds-0 ds] Lazily initializing directory "./config"
[ds-0 ds] Lazily initializing directory "data/var"
[ds-0 ds] Lazily initializing directory "data/db"
[ds-0 ds] Upgrading configuration and data...
[ds-0 ds]  * OpenDJ has already been upgraded to version
[ds-0 ds]  7.0.0.6a1fc7a1ac1210ebd0932020e733365c0f0e4d35
[ds-0 ds] Starting server with group ID "default" and server ID "ds-0"
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=CORE severity=NOTICE msgID=134 msg=ForgeRock Directory Services 7.0.0-SNAPSHOT (build 20190424115437, revision number 6a1fc7a1ac1210ebd0932020e733365c0f0e4d35) starting up
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=JVM severity=NOTICE msgID=21 msg=Installation Directory:  /opt/opendj
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=JVM severity=NOTICE msgID=23 msg=Instance Directory:      /opt/opendj
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=JVM severity=NOTICE msgID=17 msg=JVM Information: 11.0.2+9-Debian-3bpo91 by Oracle Corporation, 64-bit architecture, 194641920 bytes heap size
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=JVM severity=NOTICE msgID=20 msg=JVM Host: ds-0.ds.default.svc.cluster.local, running Linux 5.0.0-13-generic amd64, unknown physical memory size, number of processors available 1
[ds-0 ds] [26/Apr/2019:09:32:39 +0000] category=JVM severity=NOTICE msgID=19 msg=JVM Arguments: "-XX:MaxGCPauseMillis=100", "-Dorg.opends.server.scriptName=start-ds"
[ds-0 ds] WARNING: An illegal reflective access operation has occurred
[ds-0 ds] WARNING: Illegal reflective access by org.opends.server.util.Platform$PlatformIMPL (file:/opt/opendj/lib/opendj.jar) to constructor sun.security.tools.keytool.CertAndKeyGen(java.lang.String,java.lang.String)
[ds-0 ds] WARNING: Please consider reporting this to the maintainers of org.opends.server.util.Platform$PlatformIMPL
[ds-0 ds] WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
[ds-0 ds] WARNING: All illegal access operations will be denied in a future release
[ds-0 ds] [26/Apr/2019:09:32:41 +0000] category=EXTENSIONS severity=NOTICE msgID=221 msg=DIGEST-MD5 SASL mechanism using a server fully qualified domain name of: localhost
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on Administration Connector 0.0.0.0 port 4444
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAP 0.0.0.0 port 1389
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on HTTP 0.0.0.0 port 8080
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on HTTPS 0.0.0.0 port 8443
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAPS 0.0.0.0 port 1636
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=CORE severity=NOTICE msgID=135 msg=The Directory Server has started successfully
[ds-0 ds] [26/Apr/2019:09:33:32 +0000] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerStarted, alert ID org.opends.messages.core-135): The Directory Server has started successfully





Debugged by exec'ing into the running pod and forcing a stack trace:



$ k exec -it ds-0 /bin/bash
$ kill -3 1



In the pod's stdout we see:



[ds-0 ds] "main" #1 prio=5 os_prio=0 cpu=2551.37ms elapsed=10.70s tid=0x00007fc2b8011000 nid=0x7e runnable  [0x00007fc2c1578000]
[ds-0 ds]    java.lang.Thread.State: RUNNABLE
[ds-0 ds] 	at java.net.Inet6AddressImpl.getHostByAddr(java.base@11.0.2/Native Method)
[ds-0 ds] 	at java.net.InetAddress$PlatformNameService.getHostByAddr(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetAddress.getHostFromNameService(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetAddress.getHostName(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetAddress.getHostName(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetSocketAddress$InetSocketAddressHolder.getHostName(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetSocketAddress.getHostName(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at org.opends.server.protocols.ldap.LDAPConnectionHandler.doInitializeConnectionHandler(LDAPConnectionHandler.java:429)
[ds-0 ds] 	at org.opends.server.protocols.ldap.LDAPConnectionHandler.doInitializeConnectionHandler(LDAPConnectionHandler.java:123)
[ds-0 ds] 	at org.opends.server.api.ConnectionHandler.initializeConnectionHandler(ConnectionHandler.java:188)
[ds-0 ds] 	at org.opends.server.config.AdministrationConnector.initializeAdministrationConnector(AdministrationConnector.java:95)
[ds-0 ds] 	at org.opends.server.core.ConnectionHandlerConfigManager.initializeAdministrationConnectorConfig(ConnectionHandlerConfigManager.java:179)
[ds-0 ds] 	at org.opends.server.core.ConnectionHandlerConfigManager.initializeConnectionHandlerConfig(ConnectionHandlerConfigManager.java:155)
[ds-0 ds] 	at org.opends.server.core.DirectoryServer.initializeConnectionHandlers(DirectoryServer.java:1674)
[ds-0 ds] 	at org.opends.server.core.DirectoryServer.startServer(DirectoryServer.java:1472)
[ds-0 ds] 	- locked <0x00000000f8371b48> (a org.opends.server.core.DirectoryServer)
[ds-0 ds] 	at org.opends.server.core.DirectoryServer.main(DirectoryServer.java:4066)



And:



[ds-0 ds] "Thread-0" #21 daemon prio=5 os_prio=0 cpu=1.35ms elapsed=8.42s tid=0x00007fc2b9191000 nid=0x92 runnable  [0x00007fc2916ae000]
[ds-0 ds]    java.lang.Thread.State: RUNNABLE
[ds-0 ds] 	at java.net.Inet6AddressImpl.getHostByAddr(java.base@11.0.2/Native Method)
[ds-0 ds] 	at java.net.InetAddress$PlatformNameService.getHostByAddr(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetAddress.getHostFromNameService(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at java.net.InetAddress.getCanonicalHostName(java.base@11.0.2/Unknown Source)
[ds-0 ds] 	at org.forgerock.opendj.setup.model.SetupUtils$1.run(SetupUtils.java:533)
[ds-0 ds] 	at java.lang.Thread.run(java.base@11.0.2/Unknown Source)


