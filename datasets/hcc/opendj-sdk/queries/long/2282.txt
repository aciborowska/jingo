With OpenDJ 3.0.0.f0bfe52b31dd16e7b8f740e69c1a68d839323758, with je backend.

When upgrading from OpenDJ 2.6.3 Build 20150715092400Z, for which we have enabled the debug file:


0150916 15:46:19.321 - INFO - /local/GIT/pyforge/results/20150916-154601/upgrade_group/opendj-basic-inst1/opendj/bin/dsconfig -h localhost -p 4448 -D "cn=myself" -w password -X create-debug-target --publisher-name "File-Based Debug Logger" --type generic --target-name org.server --set debug-level:all -n

20150916 15:46:20.588 - INFO - /local/GIT/pyforge/results/20150916-154601/upgrade_group/opendj-basic-inst1/opendj/bin/dsconfig -h localhost -p 4448 -D "cn=myself" -w password -X set-log-publisher-prop --publisher-name "File-Based Debug Logger" --set enabled:true -n



when starting opendj server, we get this error message:

$ ./start-ds 
[16/Sep/2015:15:59:30 +0200] category=EXTENSIONS severity=NOTICE msgID=org.opends.messages.extension.571 msg=Loaded extension from file '/local/GIT/pyforge/results/20150916-152000/upgrade_group/opendj-basic-inst1/opendj/lib/extensions/snmp-mib2605.jar' (build 3.0.0-SNAPSHOT, revision f0bfe52b31dd16e7b8f740e69c1a68d839323758)
[16/Sep/2015:15:59:30 +0200] category=CORE severity=NOTICE msgID=org.opends.messages.core.134 msg=OpenDJ 3.0.0-SNAPSHOT (build 20150916014420, Rf0bfe52b31dd16e7b8f740e69c1a68d839323758) starting up
[16/Sep/2015:15:59:30 +0200] category=CORE severity=NOTICE msgID=org.opends.messages.core.139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while trying to start the Directory Server: An error occurred at or near line 825 while trying to parse the configuration from LDIF file /local/GIT/pyforge/results/20150916-152000/upgrade_group/opendj-basic-inst1/opendj/config/config.ldif: org.opends.server.util.LDIFException: Entry ds-cfg-debug-scope=org.server,cn=Debug Targets,cn=File-Based Debug Logger,cn=Loggers,cn=config read from LDIF starting at line 825 is not valid because it violates the server's schema configuration: Entry ds-cfg-debug-scope=org.server,cn=Debug Targets,cn=File-Based Debug Logger,cn=Loggers,cn=config violates the Directory Server schema configuration because it is missing attribute ds-cfg-enabled which is required by objectclass ds-cfg-debug-target
[16/Sep/2015:15:59:30 +0200] category=CORE severity=NOTICE msgID=org.opends.messages.core.203 msg=The Directory Server is now stopped



When upgrading to pdb backend, we encounter this error at the import-ldif time, after upgrading and trying to import data:


20150916 15:48:33.817 - INFO - /local/GIT/pyforge/results/20150916-154601/upgrade_group/opendj-basic-inst3/opendj/bin/import-ldif  -n userRoot -O  --skipFile /local/GIT/pyforge/results/20150916-154601/upgrade_group/tmp/skip-opendj-basic-inst3.txt --rejectFile /local/GIT/pyforge/results/20150916-154601/upgrade_group/tmp/reject-opendj-basic-inst3.txt -l /local/GIT/pyforge/results/20150916-154601/upgrade_group/tmp/opendj-basic-inst3_export_pre_upgrade.ldif

An error occurred while trying to load the Directory Server schema:  An error
occurred at or near line 825 while trying to parse the configuration from LDIF
file
/local/GIT/pyforge/results/20150916-154601/upgrade_group/opendj-basic-inst3/opendj/config/config.ldif:
org.opends.server.util.LDIFException: Entry
ds-cfg-debug-scope=org.server,cn=Debug Targets,cn=File-Based Debug
Logger,cn=Loggers,cn=config read from LDIF starting at line 825 is not valid
because it violates the server's schema configuration: Entry
ds-cfg-debug-scope=org.server,cn=Debug Targets,cn=File-Based Debug
Logger,cn=Loggers,cn=config violates the Directory Server schema configuration
because it is missing attribute ds-cfg-enabled which is required by
objectclass ds-cfg-debug-target


