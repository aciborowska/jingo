Prerequisites

	VirtualBox 4.3.26 r98988.
	Linux based system
	Java JDK 7 or 8



Steps to reproduce

	Download OpenDJ 3.0.0 in revision 11980
	Move it on your Virtual Machine
	Unzip the archive
	try one of following things
	
		./bin/start-ds -F
		Setup the server with default values.
		./setup -V
	
	



All above commands cause problem with memory.
Output snippet:
Exception in thread "main" java.lang.ExceptionInInitializerError
Caused by: java.lang.IllegalArgumentException: used = 499995152 should be <= committed = 32440320
	at java.lang.management.MemoryUsage.<init>(MemoryUsage.java:156)
	at org.opends.server.core.MemoryQuota.getOldGenInfo(MemoryQuota.java:86)
	at org.opends.server.core.MemoryQuota.<init>(MemoryQuota.java:58)
	at org.opends.server.core.DirectoryServer.<init>(DirectoryServer.java:932)
	at org.opends.server.core.DirectoryServer.<init>(DirectoryServer.java:910)
	at org.opends.server.core.DirectoryServer.<clinit>(DirectoryServer.java:243)

Remaining outputs in attachment.

During this procedure I had around 3GB of free memory on my machine and I configure my VMs with 2GB of memory (5GB in total). The VM has more than 1,5 GB of free memory in the moment of running above commands.

I tried above systems, but the problem will occurs probably on another systems  too. It only occurs using Virtual Box. 
Doesn't matter on Java version, the problem occurs with Java 7 and 8, but probably same problem with Java 6.

I have older build of OpenDJ 3.0.0 already installed with revision 11636 and above commands are working well on all Systems and Java versions.

I think there is regression between revisions 11636 and 11980.