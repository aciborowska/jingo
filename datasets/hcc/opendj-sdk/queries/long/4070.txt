In OpenIDM when an unknown operator is specified in a query filter expression we return a 500 error (https://bugster.forgerock.org/jira/browse/OPENIDM-8426). In Rest2Ldap when a query filter with an unknown operator is sent we get back an empty result set. If we were able to get back some resource exception instead we would be able to continue sending an error when an unknown operator is used. Currently we have no way of distinguishing between an empty result set because the query filter didn't match, and a malformed query filter with an unknown operator.

 

To see this you can run the following command in rest2ldap


curl -X GET \
'http://localhost:8080/api/users?_queryFilter=%2FuserName%20blah%20%22bob%40example.com%22' \
-H 'authorization: Basic YW5vbnltb3VzOmFub255bW91cw==' \
-H 'cache-control: no-cache' \
-H 'content-type: application/json'

{
"result": [],
"resultCount": 0,
"pagedResultsCookie": null,
"totalPagedResultsPolicy": "NONE",
"totalPagedResults": -1,
"remainingPagedResults": -1
}


That command returns an empty result set, but since the "blah" operator is not a valid operator I would argue that it should return some ResourceException.