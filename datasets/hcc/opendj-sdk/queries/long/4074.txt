Functions read() and readProperties() in the EL expressions in config.ldif don't parse correctly on windows. Probable reason is escaping of the backslashes in the file path.

Steps to reproduce:

1) Setup OpenDJ, stop the server

2) Create a file with some text in it (e.g. C:\path\to\opendj\test_file.txt)

3) Update the config.ldif file to include the following expression:


${read('C:\\path\\to\\opendj\\test_file.txt')}

(for testing purposes I use ds-cfg-openam-token-info-url from "cn=HTTP OAuth2 OpenAM,cn=HTTP Authorization Mechanisms,cn=config")

4) Start the server and search for the value set in config


ldapsearch.bat -h localhost -p 1389 -D "cn=Directory Manager" -w password -b "cn=HTTP OAuth2 OpenAM,cn=HTTP Authorization Mechanisms,cn=config" "(objectclass=*)" ds-cfg-openam-token-info-url


Current behavior:

The expressions remains unparsed

Correct behavior:

The parser should first unescape the backslashes to get the correct filename, and then read the file with the read() function.

For example:


${trim('   C:\\path\\to\\opendj\\test_file.txt   ')}


works correctly and returns the right filename.