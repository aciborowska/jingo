While working on non-regression tests for the Security Guide examples with the LDAP keystore, it seems I can no longer set the LDAPS Connection Handler to use an LDAP keystone-based key manager provider:


$ /Users/mark/Documents/opendj-docs/target/bats/opendj/bin/dsconfig \
>  set-connection-handler-prop \
>  --hostname Marks-MacBook-Pro.local \
>  --port 50889 \
>  --bindDN "cn=Directory Manager" \
>  --bindPassword password \
>  --handler-name "LDAPS Connection Handler" \
>  --set key-manager-provider:LDAP \
>  --set ssl-cert-nickname:private-key \
>  --trustAll \
>  --no-prompt

The LDAP Connection Handler could not be modified because of the following
reason:

    *  Unwilling to Perform: Entry cn=LDAPS Connection Handler,cn=Connection
       Handlers,cn=config cannot be modified because one of the configuration
       change listeners registered for that entry rejected the change: An error
       occurred while attempting to initialize the SSL context for use in the
       LDAP Connection Handler:
       UnsupportedOperationException(Converters.java:683)



Or trust manager provider:


$ /Users/mark/Documents/opendj-docs/target/bats/opendj/bin/dsconfig \
>  set-connection-handler-prop \
>  --hostname Marks-MacBook-Pro.local \
>  --port 50889 \
>  --bindDN "cn=Directory Manager" \
>  --bindPassword password \
>  --handler-name "LDAPS Connection Handler" \
>  --set trust-manager-provider:LDAP \
>  --trustAll \
>  --no-prompt

The LDAP Connection Handler could not be modified because of the following
reason:

    *  Unwilling to Perform: Entry cn=LDAPS Connection Handler,cn=Connection
       Handlers,cn=config cannot be modified because one of the configuration
       change listeners registered for that entry rejected the change: An error
       occurred while attempting to initialize the SSL context for use in the
       LDAP Connection Handler: An error occurred while trying to create a
       trust manager factory to access the contents of LDAP keystore with base
       DN 'ou=keystore,dc=example,dc=com':
       UnsupportedOperationException(Converters.java:683)
       (id=org.opends.messages.extension-641)



I think this might be a regression, since the same examples seemed to have worked for me a week ago as shown in the comment on OPENDJ-3358.

Here's the version I'm using:


$ ./target/bats/opendj/bin/status -V
OpenDJ Server 4.0.0-SNAPSHOT
Build 20161115004140
--
           Name                 Build number         Revision number
Extension: snmp-mib2605         4.0.0-SNAPSHOT       7028d9f1483d6f1e77bb0f5ebd0ecc6239e431c5

