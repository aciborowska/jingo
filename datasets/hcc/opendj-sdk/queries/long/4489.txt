Found with 6.0.0 rev f637c88f1a2bc9eab772d4f9c55dcb9911705519

In our interactive setup tests for RS, we do:

1) setup 2 DS and start them:

./DJ1/opendj/setup directory-server -h localhost -p 1389 -D cn=myself -w password --adminConnectorPort 4444 -Z 1636 -b  dc=com  -a

./DJ2/opendj/setup directory-server -h localhost -p 1390 -D cn=myself -w password --adminConnectorPort 4445 -Z 1637 -b  dc=com  -a
 


2) setup a RS:

/tmp/RS1/opendj/setup replication-server --rootUserDn "cn=myself" --rootUserPassword password -h localhost --adminConnectorPort 4446 --replicationPort 8991 --secureReplication



3) configure and initialize replication between DJ1/RS1 and DJ2/RS1:

/tmp/DJ1/opendj/bin/dsreplication configure --host1 localhost --port1 4444 --bindDN1 "cn=myself" --bindPassword1 "password" --noReplicationServer1 --host2 localhost --port2 4446 --bindDN2 "cn=myself" --bindPassword2 "password" --replicationPort2 8991 --onlyReplicationServer2 -b dc=com -I admin -w password -X -n

/tmp/DJ2/opendj/bin/dsreplication configure --host1 localhost --port1 4445 --bindDN1 "cn=myself" --bindPassword1 "password" --noReplicationServer1 --host2 localhost --port2 4446 --bindDN2 "cn=myself" --bindPassword2 "password" --replicationPort2 8991 --onlyReplicationServer2 -b dc=com -I admin -w password -X -n

/tmp/DJ1/opendj/bin/dsreplication initialize-all -h localhost -p 4444 -b dc=com -I admin -w password  -X -n



4) setup a second RS interactively to join the topology.
When trying to do that, the setup fails because it cannot validate the self-signed certificate:


To join an existing replication topology, the server must connect to a running
replication server

Hostname of running replication server: localhost
Administration port of running replication server: 4446

The certificate 'CN=localhost, O=OpenDJ RSA Self-Signed Certificate' is not
trusted for the following reason: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to find
valid certification path to requested target

Server Certificate:

User DN  : CN=localhost, O=OpenDJ RSA Self-Signed Certificate
Validity : From 'Fri Nov 10 17:33:18 CET 2017'
             To 'Thu Nov 05 17:33:18 CET 2037'
Issuer   : CN=localhost, O=OpenDJ RSA Self-Signed Certificate

Do you trust this server certificate?

  1) No
  2) Yes, for this session only
  3) Yes, also add it to a truststore
  4) View certificate details

Enter choice: [2]: 

An unexpected error has been raised during setup:
'org.forgerock.opendj.server.config.meta.SynchronizationProviderCfgDefn$SynchronizationProviderCfgClientImpl
cannot be cast to
org.forgerock.opendj.server.config.client.ReplicationSynchronizationProviderCfgClient'
See /tmp/opendj-setup-2471151458087902840.log for a detailed log of the failed
operation.
Please report this error and provide the log file mentioned above.



 This is a regression.

 