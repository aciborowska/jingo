Steps to reproduce:


	create two-way replicated topology
	create proxy configured using replication service discovery
	perform searchrate against proxy and verify both backend servers are active
	kill -STOP backend server: observe that proxy reacts ok
	kill -CONT backend server: observe that proxy reacts ok after 30-60 seconds monitoring delay
	shutdown (stop-ds) backend server: observe proxy reacts badly but searchrate is ok
	restart backend server: observer proxy fail and searchrate fail.



Sample logs from proxy:

{unformatted}
[02/Feb/2017:09:11:59 +0100] category=BACKEND severity=WARNING msgID=632 msg=The server 'matts-laptop:2389' for proxy backend 'proxy' is unavailable. The last failure that prevented the server from being used was: Connect Error: Connection refused
[02/Feb/2017:09:12:59 +0100] category=CORE severity=ERROR msgID=762 msg=Could not retrieve the list of replicas from replication server 'matts-laptop:2389' for replication server group 'replication'. Exception : ConnectionException: Connect Error: Connection refused (LdapException.java:153 LdapException.java:114 GrizzlyLdapConnectionFactory.java:119 GrizzlyLdapConnectionFactory.java:92 TCPNIOConnectorHandler.java:268 TCPNIOConnectorHandler.java:221 TCPNIOConnectorHandler.java:158 TCPNIOConnection.java:258 TCPNIOTransport.java:517 AbstractIOStrategy.java:112 WorkerThreadIOStrategy.java:117 WorkerThreadIOStrategy.java:103 AbstractIOStrategy.java:89 SelectorRunner.java:415 SelectorRunner.java:384 SelectorRunner.java:348 SelectorRunner.java:279 AbstractThreadPool.java:593 AbstractThreadPool.java:573 Thread.java:745)
[02/Feb/2017:09:12:59 +0100] category=CORE severity=ERROR msgID=763 msg=Could not retrieve auto-configuration data from directory server 'matts-laptop:2389' for replication server group 'replication'. Exception : ConnectionException: Connect Error: Connection refused (LdapException.java:153 LdapException.java:114 GrizzlyLdapConnectionFactory.java:119 GrizzlyLdapConnectionFactory.java:92 TCPNIOConnectorHandler.java:268 TCPNIOConnectorHandler.java:221 TCPNIOConnectorHandler.java:158 TCPNIOConnection.java:258 TCPNIOTransport.java:517 AbstractIOStrategy.java:112 WorkerThreadIOStrategy.java:117 WorkerThreadIOStrategy.java:103 AbstractIOStrategy.java:89 SelectorRunner.java:415 SelectorRunner.java:384 SelectorRunner.java:348 SelectorRunner.java:279 AbstractThreadPool.java:593 AbstractThreadPool.java:573 Thread.java:745)"
[02/Feb/2017:09:12:59 +0100] category=BACKEND severity=NOTICE msgID=620 msg=Remote servers changed for the proxy backend 'proxy'. The proxy was using: primary servers=[matts-laptop:1389, matts-laptop:2389], secondary servers=[]; and it will now be using: primary servers=[matts-laptop:1389], secondary servers=[]
[02/Feb/2017:09:12:59 +0100] category=BACKEND severity=WARNING msgID=613 msg=Proxy backend 'proxy' cannot failover: only primary servers have been discovered via the service discovery mechanism 'replication'. Primary servers are [matts-laptop:1389]
[02/Feb/2017:09:12:59 +0100] category=SDK severity=ERROR msgID=-1 msg=A run-time error occurred while processing a load-balancer event
[02/Feb/2017:09:12:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:13:59 +0100] category=BACKEND severity=NOTICE msgID=620 msg=Remote servers changed for the proxy backend 'proxy'. The proxy was using: primary servers=[matts-laptop:1389], secondary servers=[]; and it will now be using: primary servers=[matts-laptop:1389, matts-laptop:2389], secondary servers=[]
[02/Feb/2017:09:13:59 +0100] category=BACKEND severity=WARNING msgID=613 msg=Proxy backend 'proxy' cannot failover: only primary servers have been discovered via the service discovery mechanism 'replication'. Primary servers are [matts-laptop:1389, matts-laptop:2389]
[02/Feb/2017:09:13:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:14:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:15:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:16:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:17:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:18:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed
[02/Feb/2017:09:19:59 +0100] category=BACKEND severity=ERROR msgID=611 msg=Proxy backend 'proxy' could not discover remote servers capabilities: RefCountedConnectionFactory is already closed{unformatted}
