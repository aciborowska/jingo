The following problem can be reproduced using PyBot OpenAM perf test AuthN using a pluggable je backend for the CTS:

run.pybot -s authn -c perf openam



In config.cfg, one has to set:

[OpenDJ]
...
backend_type = je



In the test, OpenAM is configured with DJ3 as a CTS external store.
We generate some AuthN REST load using tool gatling.

Trying to run the test for 60 sec, we quickly get in access log:

[ WARN ] (ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=45 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122371
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=52 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122264
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=46 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122359
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=47 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122356
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=38 op=10 msgID=11 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122424
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=49 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122315
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=40 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122405
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=43 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122438
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=39 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122452
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=48 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122352
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=41 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122440
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=37 op=10 msgID=11 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122278
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=35 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122337
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=44 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122439
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=33 op=10 msgID=11 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122453
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=42 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122455
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=24 op=12 msgID=13 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122272
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=29 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122421
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=26 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122376
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=50 op=4 msgID=5 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122318
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=25 op=10 msgID=11 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122374
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=36 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122309
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=30 op=7 msgID=8 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122281
(ERROR) [23/Oct/2015:10:54:07 +0200] DELETE RES conn=28 op=10 msgID=11 result=80 message="com.sleepycat.je.ThreadInterruptedException: (JE 5.0.104) Environment must be closed, caused by: com.sleepycat.je.ThreadInterruptedException: Environment invalid because of previous exception: (JE 5.0.104) /local/wks/pyforge/results/20151023-104713/AuthN/CTS/opendj/db/userRoot java.lang.InterruptedException THREAD_INTERRUPTED: InterruptedException may cause incorrect internal state, unable to continue. Environment is invalid and must be closed." etime=122366

