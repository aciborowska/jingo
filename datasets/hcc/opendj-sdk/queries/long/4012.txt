Found with OpenDJ 4.1.0 rev (bdccc6d4a5d)

Scenario:


	we setup 2 servers, replicated
	we perform an offline initialization with dsreplication pre-external-initialization/post-external-initialization by importing data in one server and performing a backup => restore on second server.

./DJ1/opendj/bin/dsreplication pre-external-initialization -h dj-robot-linux2.internal.forgerock.com -p 4444 -b dc=com -I admin -w password -X -n

./DJ1/opendj/bin/stop-ds 

./DJ2/opendj/bin/stop-ds

./DJ1/opendj/bin/import-ldif --offline -n userRoot -O --skipFile /tmp/skip-DJ1-20170428-040233.txt --rejectFile /tmp/reject-DJ1-20170428-040233.txt -l /tmp/data/replication_startup.ldif

./DJ1/opendj/bin/backup --offline -n userRoot -d /tmp/backup_offline 

./DJ2/opendj/bin/restore --offline -d /tmp/backup_offline

./DJ1/opendj/bin/start-ds 

./DJ2/opendj/bin/start-ds

./DJ1/opendj/bin/dsreplication post-external-initialization -h dj-robot-linux2.internal.forgerock.com -p 4444 -b dc=com -I admin -w password -X -n


	Then we add an entry on the first instance and check the entry is replicated

./DJ1/opendj/bin/ldapmodify -h dj-robot-linux2.internal.forgerock.com -p 1389 -D "cn=myself" -w password 	
05:03:48.161 	INFO 	dn: uid=tfitter,ou=people,dc=example,dc=com
cn: Tom Fitter
sn: Fitter
givenname: Tom
objectclass: top
objectclass: person
objectclass: organizationalPerson
objectclass: inetOrgPerson
ou: Accounting
ou: People
l: Sunnyvale
uid: tfitter
mail: tfitter@example.com
userpassword: hamstring

./DJ1/opendj/bin/dsreplication status -h dj-robot-linux2.internal.forgerock.com -p 4444 -b dc=com -I admin -w password --script-friendly -X -n 	

dc=com	dj-robot-linux2.internal.forgerock.com:4444	166	true	16594	30027	8989	0		false
dc=com	dj-robot-linux2.internal.forgerock.com:4445	166	true	6169	705	8990	0		false






	We continue with the second test that just calls the dsreplication pre-external-initialization again:

./DJ1/opendj/bin/dsreplication pre-external-initialization -h dj-robot-linux2.internal.forgerock.com -p 4444 -b dc=com -I admin -w password -X -n





At that point we get an error message in errors log of DJ1 and in replication log file too:

28/Apr/2017:04:04:04 +0100] category=SYNC severity=ERROR msgID=269 msg=When closing log '/tmp/DJ1/opendj/changelogDb/2.dom/16594.server', found 2 cursor(s) still opened on the log



See script in attachment to reproduce