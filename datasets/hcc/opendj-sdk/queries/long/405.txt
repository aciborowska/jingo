The upgrade tool does not handle very well cases where the configuration of the server to be upgraded differs from the default configuration settings. Here are some examples.

[1] userRoot backend has been deleted from an OpenDS or OpenDJ server

If the userRoot backend has been deleted from an OpenDS or OpenDJ server, upgrading to a newer version will fail with errors like this :
Error processing delete operation of
ds-cfg-backend-id=userRoot,cn=Backends,cn=config: Entry
ds-cfg-backend-id=userRoot,cn=Backends,cn=config cannot be removed from the
Directory Server configuration because the specified entry has one or more
subordinate entries

Error processing delete operation of
cn=Index,ds-cfg-backend-id=userRoot,cn=Backends,cn=config: Entry
cn=Index,ds-cfg-backend-id=userRoot,cn=Backends,cn=config cannot be removed
from the Directory Server configuration because the specified entry has 
one or
more subordinate entries

This happens because the upgrade computes a diff but fails to detect that the userRoot configuration is actually a subtree of entries. The order in which the deletes are replayed is the order of the entries and not reversed.

[2] When new backend has been added.

If a new backend is added to the configuration, then during the upgrade process, it seems that the upgrade can spend an inordinate amount of time in the following stage:

"Applying Configuration Customizations..."

This is due to the configuration for the new backend being removed (including the config. for the indexes) as part of the upgrade, but then prior to applying the new configuration for the upgraded server, the backend is re-initialized resulting in processing of the backend, which in turns invokes a search which will be unindexed (no indexe configuration). Net result of this is a full scan of the database which can take a long time depending on the size of the db, etc.,
