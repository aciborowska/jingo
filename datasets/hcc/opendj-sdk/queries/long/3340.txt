Scenario
With one DJ installed and HTTP connection handler enabled I tried to request for API description of admin endpoint. I received the description of API, but I expected to get return code 403 - insufficient access rights.

Current behavior
Doing a request on:

http://user.0:password@localhost:8080/admin/config/


I receive

{"code":403,"reason":"Forbidden","message":"Insufficient Access Rights: You do not have sufficient privileges to perform search operations in the Directory Server configuration"}


as expected. However doing a request on:

http://user.0:password@localhost:8080/admin/config/?_crestApi
http://user.0:password@localhost:8080/admin/config/?_api


I receive a description of the API

{"id":"frapi:opendj:admin:1.0","version":"4.0.0","definitions":{"file-based-http-access-log-publisher":{"allOf":[{"$ref":"#/definitions/http-access-log-publisher"},{"type":"object","discriminator":"_schema","required":["_schema","java-class","asynchronous","log-file","log-file-permissions"],"properties":{"_schema":{"type":"string"},"_rev":{"type":"string","readOnly":true,"errorOnWritePolicyFailure":true},"java-class":{"type":"string","description":"The fully-qualified name of the Java class that provides the File Based HTTP Access Log Publisher implementation.","default":"org.opends.server.loggers.TextHTTPAccessLogPublisher"},"rotation-policy":{"type":"string"},"buffer-size":{"type":"string","description":"Specifies the log file buffer size.","default":"64kb"},"asynchronous": .......



Expected behavior
Due to OPENDJ-3103 issue's description I expect same security access restrictions for standard users, because the issue says:

Security settings for the REST endpoints equally apply when requesting the API descriptions. No more, no less.


Link to the issue: https://bugster.forgerock.org/jira/browse/OPENDJ-3103