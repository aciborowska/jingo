When creating a Static Service Discovery Mechanism as described in the doc, an NPE is thrown:


$ /path/to/opendj/setup directory-server --hostname opendj.example.com --ldapPort 1389 --adminConnectorPort 4444 --rootUserDN "cn=Directory Manager" --rootUserPassword password  --acceptLicense --ldifFile /path/to/Example.ldif --baseDN dc=example,dc=com

$ dsconfig \
>  create-service-discovery-mechanism \
>  --hostname opendj.example.com \
>  --port 4444 \
>  --bindDN "cn=Directory Manager" \
>  --bindPassword password \
>  --mechanism-name "Static Service Discovery Mechanism" \
>  --type static \
>  --set primary-server:local1.example.com:636 \
>  --set primary-server:local2.example.com:636 \
>  --set secondary-server:remote1.example.com:636 \
>  --set secondary-server:remote2.example.com:636 \
>  --set use-ssl:true \
>  --trustAll \
>  --no-prompt

The Static Service Discovery Mechanism could not be created due to a
communications problem: Other: The attempt to apply the configuration add
failed. The preliminary checks were all successful and the entry was added to
the server configuration, but at least one of the configuration add listeners
reported an error when attempting to apply the change: While adding Service
Discovery Mechanism 'Static Service Discovery Mechanism' an error occurred :
NullPointerException (ConcurrentHashMap.java:936 DirectoryServer.java:2782
DirectoryServer.java:1009 SslUtils.java:103 SslUtils.java:91 SslUtils.java:72
SslUtils.java:55 StaticServiceDiscoveryMechanism.java:114
StaticServiceDiscoveryMechanism.java:52
ServiceDiscoveryMechanismConfigManager.java:127
ServiceDiscoveryMechanismConfigManager.java:40
ServerManagedObjectAddListenerAdaptor.java:50
ConfigAddListenerAdaptor.java:159 ConfigurationHandler.java:490
ConfigurationBackend.java:416 LocalBackendAddOperation.java:465
LocalBackendAddOperation.java:163 LocalBackendWorkflowElement.java:473
LocalBackendWorkflowElement.java:602 AddOperationBasis.java:498
SynchronousStrategy.java:39 ...)



Found by the non-regression tests for docs.