This issue must be resolved in order for OpenDJ to be the default repo for OpenIDM.

The OpenIDM team have found that the behavior of presence filters differs between Rest2Ldap and OpenIDM. In particular the field "x" in the following object is treated as not present in OpenIDM, but present in Rest2Ldap: 


{
  "x": null
}

 After much discussion we agreed that both interpretations are reasonable. However, OpenIDM's REST APIs have a larger existing user base, so we should avoid introducing incompatibilities if possible. In addition, CREST's query filter support was originally modeled on the evolving SCIM specification which was quite vague at the time. However, the SCIM RFC is far more explicit regarding presence filters:



If the attribute has a non-empty or non-null value, or if it contains a non-empty node for complex attributes, there is a match.





This closely corresponds to IDM's interpretation. It is probably not important to continue to align CREST filters with SCIM's. Regardless, this topic has clearly been discussed by the SCIM community and I assume that they have converged on the behavior that people found the most intuitive, so we should probably do likewise.

Suggested fix:

Rest2Ldap SHOULD treat field "X"  in the following JSON objects as not present:


// Missing field
{
}

// field is null
{
  "x" : null
}

// field is empty array
{
  "x" : []
}
// field is empty complex object
{
  "x" : {}
}


Rest2Ldap MAY treat field "X"  in the following JSON object as not present (needs confirming):


// field is empty string
{
  "x" : ""
}

 