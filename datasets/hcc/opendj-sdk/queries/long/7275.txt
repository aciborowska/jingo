After commit b07a484e8411cdd134350608fc77dbc1080a3e17Â we see a bit random issue in proxy tests.

When searching entries with ldapsearch like:


ldapsearch -h pyforge.example.com -p 1392 -D "uid=data admin,o=example" -w password --useStartTls  -X  -b "o=example" -s one --countEntries "(objectclass=*)" dn


we sometimes don't retrieve all entries. Sometimes we retrieve all entries and if not we retrieve one entry less then expected. For instance if we expect to have 101 entries in the output we got 100.

The issue can be reproduced with following suite:

python3 run-pybot.py -v -s proxy_group.writeDistribution dj

The failed test should be Multiple_Partition_Base_Dn. This test use 1 proxy and 3 DJs behind proxy and 3 shards used.