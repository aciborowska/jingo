Found with opendj 4.1.0 rev  (ce07ead4fd1)

Scenario:

we setup 2 DJs with some data, replicated.
we setup a proxy, with static discovery, least-requests LB algorithm, with DJ1 as primary server and DJ2 as secondary server.
We stop DJ1, add an entry through the proxy, check the entry has been added.
We start DJ1 again, stop DJ2, add an entry through the proxy, we get the following error message in the proxy errors log file:


(ERROR) [24/Jul/2017:11:12:35 +0100] category=org.opends.messages.external severity=ERROR msgID=1 msg=Ignored unexpected exception thrown by ExceptionHandler exception=NullPointerException (ReferenceCountedObject.java:60 LoadBalancer.java:349 PromiseImpl.java:275 PromiseImpl.java:373 PromiseImpl.java:531 PromiseImpl.java:572 PromiseImpl.java:233 PromiseImpl.java:188 PromiseImpl.java:384 PromiseImpl.java:531 PromiseImpl.java:572 PromiseImpl.java:233 PromiseImpl.java:188 CachedConnectionPool.java:121 CachedConnectionPool.java:92 PromiseImpl.java:275 PromiseImpl.java:373 PromiseImpl.java:531 PromiseImpl.java:572 PromiseImpl.java:233 PromiseImpl.java:188 ...)



Behavior seems to be ok though, entry is added correctly.

Note: I have reproduced it on windows but not on linux.