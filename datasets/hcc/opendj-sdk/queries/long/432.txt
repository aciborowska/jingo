The LDAPURL class decode method doesn't url-decode the baseDN when the fullyDecode argument is false. This causes problems with url-encoded ldap urls in acis, because OpenDJ is matching the decoded ldap name with the url-encoded one and obviously fails. Because of this bug it is impossible to assign acis to entries containing quotes or utf-8 characters.

The LDAPURL.decode method is used at various places in the ControlPanel where it could cause some trouble when refreshing encoded referral entries. It's likely that referral mapping at the server side (in DN2URI.java) will also fail with url-encoded references.

The attached patch always url-decodes the baseDN part of the ldap url (and still only parses the dn when fullyDecode is true).