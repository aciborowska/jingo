The Replication Service discovery mechanism seems broken at present.

If configured with route-all:true as shown in the attached setupRSDM.sh script, the proxy cannot determine the naming contexts from the DS/RS servers, and cannot route a search:

$ /path/to/proxy-1/bin/ldapsearch -p 1389 -b "" -s base "(&)" namingContexts
dn:

$ /path/to/proxy-1/bin/ldapsearch -p 1389 -b dc=example,dc=com "(uid=user.0)"
# The LDAP search request failed: 32 (No Such Entry)


If reconfigured with a base-dn and route-all:false as shown:

dsconfig set-backend-prop \
          --backend-name proxyRoot \
          --set route-all:false \
          --set base-dn:dc=example,dc=com \
          --hostname opendj.example.com \
          --port 4444 \
          --bindDn cn=Directory\ Manager \
          --trustAll \
          --bindPassword ****** \
          --no-prompt


Then it can find the naming context, but still cannot route a search:

$ /path/to/proxy-1/bin/ldapsearch -p 1389 -b "" -s base "(&)" namingContexts
dn:
namingContexts: dc=example,dc=com

$ /path/to/proxy-1/bin/ldapsearch -p 1389 -b dc=example,dc=com "(uid=user.0)"
# The LDAP search request failed: 91 (Connect Error)
