Two servers are replicating; the "slave" server has its backend writability-mode property set to "internal-only" as per the "read-only replica" documentation at http://docs.forgerock.org/en/opendj/2.6.0/admin-guide/#read-only-repl

Add an entry on the master server. It is replayed and added on the slave.

Delete an entry on the master server. It is replayed and deleted on the slave.

Modify an entry on the master server. It is rejected by the slave, logging:


[17/Jan/2014:15:58:43 +0000] category=SYNC severity=MILD_ERROR msgID=14876739 msg=Could not replay operation ModifyOperation(connID=-1, opID=1944, dn=dc=example,dc=com) with ChangeNumber 00000143a0ed01592a4b00000003 error Unwilling to Perform Unable to modify entry dc=example,dc=com because the backend that holds that entry is configured in read-only mode



This is not correct. The test for writability in the add and modify code is very subtly different:


if (! (isInternalOperation() || isSynchronizationOperation()))
if (! isInternalOperation() || isSynchronizationOperation())

