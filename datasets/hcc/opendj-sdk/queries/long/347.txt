When setting up OpenDJ with SSL using an existing Java keystore and truststore there is a misleading error returned.

Execute the following command:-


	/opt/OpenDJ/setup --cli --baseDN dc=example,dc=com --addBaseEntry --ldapPort 389 --ldapsPort 636 --useJavaKeystore /opt/OpenDJ/config/keystore --keyStorePassword password --adminConnectorPort 4444 --rootUserDN cn=Directory\ Manager --rootUserPassword password --enableStartTLS --certNickname server-cert --no-prompt --noPropertiesFile



OpenDJ 2.4.3
Please wait while the setup program initializes...

See /tmp/opends-setup-5962213131515589468.log for a detailed log of this operation.

Configuring Directory Server ..... Done.
Configuring Certificates .....

Error Configuring Certificates.  Details: java.security.KeyStoreException: The following error occured when adding a certificate with alias server-cert to the keystore: The trusted certificate associated with alias server-cert could not be added to keystore because of the following reason: A certificate with the alias server-cert already exists in the key store
If you want to report this error, provide the contents of file /tmp/opends-setup-5962213131515589468.log

The actual issue is that the certificate exists in the truststore. After deleting the existing truststore the command completes without errors.