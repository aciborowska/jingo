After performing a modrate test and aborting OpenDJ the recovery is pretty quick and now transactions are discarded:


[main] INFO Akiban Persistit Copyright (c) 2012 Akiban Technologies Inc.
[main] INFO Recovery plan: will recover 794 pages and 1 committed transactions; will discard 0 uncommitted transactions
[main] INFO  Allocating 99,774 buffers of size 16,384 bytes
[main] INFO Opening volume dj (/home/matt/opendj-test/db/test/dj)
[main] INFO Recovery done: 710 retained pages, 1 committed transactions, 0 errors



However, after an addrate we see something very different:


[main] INFO Akiban Persistit Copyright (c) 2012 Akiban Technologies Inc.
[main] INFO Recovery plan: will recover 6,430 pages and 1 committed transactions; will discard 789,871 uncommitted transactions
[main] INFO  Allocating 99,774 buffers of size 16,384 bytes
[main] INFO Opening volume dj (/home/matt/opendj-test/db/test/dj)
[main] INFO Recovery progress: 0 committed transactions applied, 10,000 uncommitted transactions rolled back, 779,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 20,000 uncommitted transactions rolled back, 769,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 30,000 uncommitted transactions rolled back, 759,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 40,000 uncommitted transactions rolled back, 749,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 50,000 uncommitted transactions rolled back, 739,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 60,000 uncommitted transactions rolled back, 729,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 70,000 uncommitted transactions rolled back, 719,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 80,000 uncommitted transactions rolled back, 709,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 90,000 uncommitted transactions rolled back, 699,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 100,000 uncommitted transactions rolled back, 689,872 remaining 
[main] INFO Recovery progress: 0 committed transactions applied, 110,000 uncommitted transactions rolled back, 679,872 remaining 
...



In addition, recovery was extremely slow. It was discarding about 10k txns every 20 seconds.

It would be good to know why the add/delete operations were considered "uncommitted". No errors are reported in the access logs.