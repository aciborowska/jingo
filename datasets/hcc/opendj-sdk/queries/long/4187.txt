Since SNMP configuration has been merged in the template config.ldif file (done in commit e778f64 ), the evaluation template/config/config.ldif is missing a blank line between the two last configuration objects:


dn: cn=Administration Connector,cn=config
objectClass: top
objectClass: ds-cfg-administration-connector
cn: Administration Connector
ds-cfg-listen-address: 0.0.0.0
ds-cfg-listen-port: 4444
ds-cfg-ssl-cert-nickname: admin-cert
ds-cfg-key-manager-provider: cn=Default Key Manager,cn=Key Manager Providers,cn=config
ds-cfg-trust-manager-provider: cn=JVM Trust Manager,cn=Trust Manager Providers,cn=config
#
# Copyright 2017 ForgeRock AS. All Rights Reserved
#
# Use of this code requires a commercial software license with ForgeRock AS.
# or with one of its affiliates. All use shall be exclusively subject
# to such license between the licensee and ForgeRock AS.
#
dn: cn=Backstage Connect,cn=Plugins,cn=config
objectClass: top
objectClass: ds-cfg-plugin
cn: Backstage Connect
ds-cfg-java-class: org.forgerock.opendj.backstage.BackstageConnectPlugin
ds-cfg-enabled: true
ds-cfg-plugin-type: startup
ds-cfg-plugin-type: shutdown



Thus, when the template file is updated during setup, we end up with the following content:



dn: cn=Administration Connector,cn=config
objectClass: top
objectClass: ds-cfg-administration-connector
objectClass: ds-cfg-plugin
cn: Administration Connector
cn: Backstage Connect
ds-cfg-listen-address: 0.0.0.0
ds-cfg-listen-port: 5444
ds-cfg-ssl-cert-nickname: server-cert
ds-cfg-key-manager-provider: cn=Default Key Manager,cn=Key Manager Providers,cn=config
ds-cfg-trust-manager-provider: cn=JVM Trust Manager,cn=Trust Manager Providers,cn=config
dn: cn=Backstage Connect,cn=Plugins,cn=config
ds-cfg-java-class: org.forgerock.opendj.backstage.BackstageConnectPlugin
ds-cfg-enabled: true
ds-cfg-plugin-type: startup
ds-cfg-plugin-type: shutdown



Note that the issue was also present before the commit mentioned above if the evaluation archive was built without SNMP (i.e if the former extension configuration file opendj-server-legacy/src/snmp/resource/config/config.snmp.ldif was not amended to the template).

As a consequence, the server can be setup and start correctly but the backstage plugin is no longer called during startup.