To reproduce:

1) Set up 2xDJ servers in multi-master replication and a dc=example,dc=com base entry.
2) Run the following operations against Server1:



dn: cn=testgroup,dc=example,dc=com
changetype: delete

dn: cn=testgroup,dc=example,dc=com
changetype: add
objectclass: groupofuniquenames
cn: testgroup
description: First Description

dn: cn=testgroup,dc=example,dc=com
changetype: modify
add: description
description: Second description

dn: cn=testgroup,dc=example,dc=com
changetype: modify
delete: description
description: Second Description

dn: cn=testgroup,dc=example,dc=com
changetype: modify
add: description
description: Second description




Expected result: Both servers should have an identical entry that looks like:



dn: cn=testgroup,dc=example,dc=com
description: First Description
description: Second description



Actual result:

Server1 has the above entry, but server2 is missing the second description.



dn: cn=testgroup,dc=example,dc=com
description: First Description



The combination of adding+deleting+adding and using a different casing for the delete causes the replay operation on server2 to silently do nothing. It looks like it interprets the ds-sync-hist on the entry and decides that no operation needs to be made.

Some notes: 

1) If running this with breakpoints you need to separate out the last 3 operations and play them independently, otherwise the order of the operations on server2 can change due to the breakpoints and this causes different issues.
2) This does not occur on 2.6.4