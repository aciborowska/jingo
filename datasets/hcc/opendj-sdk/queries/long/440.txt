After installing OpenDJ, if you set the OPENDS_JAVA_HOME to a non existing directory then the setup program (in cli mode) silently changes the JRE to the O/S default.

To reproduce:-

Install OpenDJ


	export OPENDS_JAVA_HOME=/usr/java/jdk1.6.0_300/jre
                                               ^ typo




	/opt/opendj/setup --cli --ldapPort 389 --adminConnectorPort 4444 --rootUserDN cn=Directory\ Manager --rootUserPassword password --no-prompt --noPropertiesFile --doNotStart



OpenDJ 2.4.4
Please wait while the setup program initializes...

See /tmp/opends-setup-4760362644533851355.log for a detailed log of this operation.

Configuring Directory Server ..... Done.

To see basic server configuration status and configuration you can launch /opt/opendj/bin/status


	grep "default.java-home" opendj/config/java.properties




	default.java-home=/usr/jdk1.6
default.java-home=/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre



If you correct the export syntax then you get:-


	grep "default.java-home" opendj/config/java.properties




	default.java-home=/usr/jdk1.6
default.java-home=/usr/java/jdk1.6.0_30/jre



Even if you only get a warning message it would be better than silently changing it.