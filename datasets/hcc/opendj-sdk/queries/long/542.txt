There is a java.lang.ExceptionInInitializerError when doing upgrade from OpenDJ 2.4.5 on Windows.

See C:\Users\Gary\AppData\Local\Temp\opendj-setup-7255024888798134392.log for a detailed log of this operation.

 Downloading Build ..... Done.
 Extracting Build ..... Done.
 Initializing Upgrade ..... Done.
 Calculating Schema Customizations ..... Done.
 Calculating Configuration Customizations ..... Done.
 Backing Up Files ..... Done.
 Upgrading Components ..... Done.
 Preparing Customizations ..... Error.
    An unexpected error occurred. Details: java.lang.ExceptionInInitializerError
Canceling Upgrade ..... The following could not be restored after the failed upgrade attempt. You should restore this file/directory manually: C:\Users\Gary\OpenDJ\history\1342730633442\files\lib to C:\Users\Gary\OpenDJError.
    Error Stopping Directory Server. Details: Error Stopping Directory Server. Error code: -1. Details: Error Stopping Directory Server. Error code: -1.
If you want to report this error, provide the contents of file C:\Users\Gary\AppData\Local\Temp\opendj-setup-7255024888798134392.log


Extract from opendj-setup-7255024888798134392.log
Error Stopping Directory Server.  Details: Error Stopping Directory Server.  Error code: -1.
        at org.opends.quicksetup.util.ServerController.stopServer(ServerController.java:279)
        at org.opends.quicksetup.util.ServerController.stopServer(ServerController.java:117)
        at org.opends.quicksetup.upgrader.Upgrader.abort(Upgrader.java:1584)
        at org.opends.quicksetup.upgrader.Upgrader.run(Upgrader.java:1378)
        at org.opends.quicksetup.installandupgrader.InstallAndUpgrader.run(InstallAndUpgrader.java:157)
        at java.lang.Thread.run(Unknown Source)
Caused by: Error Stopping Directory Server.  Error code: -1.
        at org.opends.quicksetup.util.ServerController.stopServer(ServerController.java:263)
        ... 5 more
Jul 19, 2012 10:47:03 PM org.opends.quicksetup.upgrader.Upgrader run
INFO: upgrade completed with errors
An unexpected error occurred.
        at org.opends.quicksetup.upgrader.Upgrader.run(Upgrader.java:1334)
        at org.opends.quicksetup.installandupgrader.InstallAndUpgrader.run(InstallAndUpgrader.java:157)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ExceptionInInitializerError
        at org.opends.server.types.FilePermission.setUsingJava(FilePermission.java:850)
        at org.opends.server.types.FilePermission.setPermissions(FilePermission.java:548)
        at org.opends.server.backends.jeb.RootContainer.open(RootContainer.java:201)
        at org.opends.server.backends.jeb.BackendImpl.initializeRootContainer(BackendImpl.java:1733)
        at org.opends.server.backends.jeb.BackendImpl.initializeBackend(BackendImpl.java:318)
        at org.opends.server.core.BackendConfigManager.initializeBackend(BackendConfigManager.java:1298)
        at org.opends.server.core.BackendConfigManager.initializeBackendConfig(BackendConfigManager.java:279)
        at org.opends.server.core.DirectoryServer.initializeBackends(DirectoryServer.java:2116)
        at org.opends.server.core.DirectoryServer.startServer(DirectoryServer.java:1309)
        at org.opends.quicksetup.util.InProcessServerController.startServer(InProcessServerController.java:371)
        at org.opends.quicksetup.upgrader.Upgrader.run(Upgrader.java:1010)
        ... 2 more
Caused by: java.util.MissingResourceException: Can't find bundle for base name messages/utility, locale en_US
        at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
        at java.util.ResourceBundle.getBundleImpl(Unknown Source)
        at java.util.ResourceBundle.getBundle(Unknown Source)
        at org.opends.messages.MessageDescriptor.getBundle(MessageDescriptor.java:1194)
        at org.opends.messages.MessageDescriptor.getFormatString(MessageDescriptor.java:1166)
        at org.opends.messages.MessageDescriptor.getFormatString(MessageDescriptor.java:1153)
        at org.opends.messages.MessageDescriptor$Arg0.<init>(MessageDescriptor.java:99)
        at org.opends.messages.UtilityMessages.<clinit>(UtilityMessages.java:197)
        ... 13 more