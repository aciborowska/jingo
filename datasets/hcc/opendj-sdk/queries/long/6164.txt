Found with 7.0.0-SNAPSHOT rev.Â 8f0643da8b877bd1e19186e6f359867b8cb55f38.

To reproduce the issue try test framework test:

python3 run-pybot.py -c stress -s replication.acquirePermitInSendWindow -v DJ



The test fails in setup when trying to configure replication between DS and DSRS instances.

Steps to reproduce:
 0. unzip archive

unzip opendj-7.0.0-SNAPSHOT.zip -d dsrs
unzip opendj-7.0.0-SNAPSHOT.zip -d ds8


1. setup DSRS

./dsrs/opendj/setup -h localhost -p 1389 -D "uid=admin" -w password --adminConnectorPort 4444 -Z 1636 -b dc=example,dc=com  -d 100 -O --monitorUserDn uid=Monitor --monitorUserPassword password --serverId "dsrs"


2. setup DS

./ds8/opendj/setup -h localhost -p 1397 -D "uid=admin" -w password --adminConnectorPort 4452 -Z 1644 -b dc=example,dc=com   -O --monitorUserDn uid=Monitor --monitorUserPassword password --serverId "ds8"


3. start DSRS

./dsrs/opendj/bin/start-ds


4. start DS

./ds8/opendj/bin/start-ds


5. configure replication between DSRS and DS

./dsrs/opendj/bin/dsreplication configure --host1 localhost --port1 4444 --bindDN1 "uid=admin" --bindPassword1 "password" --replicationPort1 8989 --host2 localhost --port2 4452 --bindDN2 "uid=admin" --bindPassword2 "password" --noReplicationServer2 -b dc=example,dc=com -I admin -w password  -X -n


The last command fails with RC==12.

Establishing connections ..... Done
Only one replication server will be defined for the following base DNs:
dc=example,dc=com
It is recommended to have at least two replication servers (two changelogs) to
avoid a single point of failure in the replication topology.

Checking registration information ..... Done
Configuring Replication port on server localhost:4444 ..... Done
Updating replication configuration for baseDN dc=example,dc=com on server
localhost:4444 .....Done
Updating replication configuration for baseDN dc=example,dc=com on server
localhost:4452 .....Done
Updating registration configuration on server localhost:4444 ..... Done
Updating registration configuration on server localhost:4452 ..... Done
Updating replication configuration for baseDN cn=schema on server
localhost:4444 .....Done
Updating replication configuration for baseDN cn=schema on server
localhost:4452 .....Done
Initializing registration information on server localhost:4452 with the
contents of server localhost:4444 .....
Error during the initialization with contents from server localhost:4444. Last
log details: [01/Apr/2019:13:29:57 +0200] severity="NOTICE" msgCount=0
msgID=org.opends.messages.backend-413 message="Initialize From Replica task
setup-initialize-1 started execution". Task state: STOPPED_BY_ERROR. Check the
error logs of localhost:4444 for more information.
See /tmp/opendj-replication-1463596510296577148.log for a detailed log of this
operation.    


The message says "Check the
 error logs of localhost:4444 for more information." The dsrs error log:

cat dsrs/opendj/logs/errors 
[01/Apr/2019:13:29:39 +0200] category=CORE severity=NOTICE msgID=134 msg=ForgeRock Directory Services 7.0.0-SNAPSHOT (build 20190401004257, revision number 8f0643da8b877bd1e19186e6f359867b8cb55f38) starting up
[01/Apr/2019:13:29:39 +0200] category=JVM severity=NOTICE msgID=21 msg=Installation Directory:  /home/fuchsik/forks/pyforge/archives/dsrs/opendj
[01/Apr/2019:13:29:39 +0200] category=JVM severity=NOTICE msgID=23 msg=Instance Directory:      /home/fuchsik/forks/pyforge/archives/dsrs/opendj
[01/Apr/2019:13:29:39 +0200] category=JVM severity=NOTICE msgID=17 msg=JVM Information: 1.8.0_201-b09 by Oracle Corporation, 64-bit architecture, 3707764736 bytes heap size
[01/Apr/2019:13:29:39 +0200] category=JVM severity=NOTICE msgID=18 msg=JVM Host: fuchsik-pq, running Linux 4.15.0-43-generic amd64, 16678068224 bytes physical memory size, number of processors available 8
[01/Apr/2019:13:29:39 +0200] category=JVM severity=NOTICE msgID=19 msg=JVM Arguments: "-Dorg.opends.server.scriptName=start-ds"
[01/Apr/2019:13:29:40 +0200] category=BACKEND severity=NOTICE msgID=513 msg=The database backend appData containing 102 entries has started
[01/Apr/2019:13:29:40 +0200] category=EXTENSIONS severity=NOTICE msgID=221 msg=DIGEST-MD5 SASL mechanism using a server fully qualified domain name of: localhost
[01/Apr/2019:13:29:41 +0200] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on Administration Connector 0.0.0.0 port 4444
[01/Apr/2019:13:29:41 +0200] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAP 0.0.0.0 port 1389
[01/Apr/2019:13:29:41 +0200] category=PROTOCOL severity=NOTICE msgID=276 msg=Started listening for new connections on LDAPS 0.0.0.0 port 1636
[01/Apr/2019:13:29:41 +0200] category=CORE severity=NOTICE msgID=135 msg=The Directory Server has started successfully
[01/Apr/2019:13:29:41 +0200] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerStarted, alert ID org.opends.messages.core-135): The Directory Server has started successfully
[01/Apr/2019:13:29:54 +0200] category=SYNC severity=NOTICE msgID=204 msg=Replication server RS(dsrs) started listening for new connections on address 0.0.0.0 port 8989
[01/Apr/2019:13:29:54 +0200] category=BACKEND severity=NOTICE msgID=515 msg=Exported 102 entries and skipped 0 in 0 seconds (average rate 4857.1/sec)
[01/Apr/2019:13:29:55 +0200] category=SYNC severity=NOTICE msgID=62 msg=Directory server DS(dsrs) has connected to replication server RS(dsrs) for domain "dc=example,dc=com" at 172.17.200.209:8989 with generation ID 1938690
[01/Apr/2019:13:29:56 +0200] category=SYNC severity=NOTICE msgID=62 msg=Directory server DS(dsrs) has connected to replication server RS(dsrs) for domain "cn=admin data" at 172.17.200.209:8989 with generation ID 154602
[01/Apr/2019:13:29:57 +0200] category=SYNC severity=NOTICE msgID=62 msg=Directory server DS(dsrs) has connected to replication server RS(dsrs) for domain "cn=schema" at 172.17.200.209:8989 with generation ID 8408


I don't see any specific issue in the log.