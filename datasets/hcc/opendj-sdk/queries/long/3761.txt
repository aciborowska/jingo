Found using OpenDJ 4.0.0 rev 7559565571aa12d325cadeaeaeb9475fbd623e6f

Scenario
1. install and configure 3.0.0 server
2. stop 3.0.0 server
3. unpack 4.0.0 binaries on top of 3.0.0 server
4. start the instance

$ ./opendj/bin/start-ds
[20/Feb/2017:22:35:08 +0100] category=com.forgerock.opendj.ldap.config.config severity=NOTICE msgID=571 msg=Loaded extension from file '/Users/csovant/wks/pyforge/archives/opendj/lib/extensions/snmp-mib2605.jar' (build 4.0.0-SNAPSHOT, revision 7559565571aa12d325cadeaeaeb9475fbd623e6f)
[20/Feb/2017:22:35:08 +0100] category=CORE severity=NOTICE msgID=139 msg=The Directory Server has sent an alert notification generated by class org.opends.server.core.DirectoryServer (alert type org.opends.server.DirectoryServerShutdown, alert ID org.opends.messages.core-141): The Directory Server has started the shutdown process. The shutdown was initiated by an instance of class org.opends.server.core.DirectoryServer and the reason provided for the shutdown was An error occurred while trying to start the Directory Server: InitializationException: The OpenDJ binary version '4.0.0.7559565571aa12d325cadeaeaeb9475fbd623e6f' does not match the installed version '3.5.0.6c04f4cb5de809ea1b4e8deb12925396da89d841'. Please run upgrade before continuing (DirectoryServer.java:1345 DirectoryServer.java:5042)
Exception in thread "main" java.lang.NullPointerException
	at org.opends.server.core.DirectoryServer.shutDown(DirectoryServer.java:4267)
	at org.opends.server.core.DirectoryServer.main(DirectoryServer.java:5048)

