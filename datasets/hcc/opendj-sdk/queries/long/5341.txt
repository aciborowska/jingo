Reproduce case:

$ backup -d <path-to-backup-dir> -n adminRoot --offline


Then edit the backup-adminRoot-XXXXXXXXXXXX in the backup dir: add random text in it to corrupt the file.

$ restore -d <path-to-backup-dir> --offline
[08/08/2018:15:39:34 +0200] category=TOOLS seq=0 severity=SEVERE msg=An unexpected error occurred while attempting to restore backup 20180808133818Z from /Users/cyril/deploy/bak/adminRoot/:  Other: An error occurred while attempting to restore the files from backup 20180808133818Z: FileNotFoundException: /Users/cyril/deploy/opendj/db/adminRoot (Is a directory) (FileOutputStream.java:-2 FileOutputStream.java:270 FileOutputStream.java:213 FileOutputStream.java:162 BackupManager.java:941 BackupManager.java:890 BackupManager.java:859 BackupManager.java:1219 BackupManager.java:1161 LDIFBackend.java:922 RestoreDb.java:306 TaskTool.java:285 RestoreDb.java:156 TaskTool.java:258 Utils.java:959 Utils.java:941 RestoreDb.java:82)
[08/08/2018:15:39:44 +0200] category=org.opends.server.crypto.CryptoManagerSync seq=1 severity=FINE msg=Error while searching base cn=admin data to synchronize the trust store: Entry cn=admin data specified as the search base DN does not exist

$ echo $?
0


As you can see, the tool prints error messages but exits with 0 whereas it should exit with a non-zero code.