Found using OpenDJ-3.0.0 (rev 3.0.0.4b6eae2b88b5a5abc3bc7bcee205ecf033675a0f).

During the post upgrade tasks, the rebuild-index phase fails and upgrade tool exits with RC=0.

Scenario

	install and configure previous version of OpenDJ (like 2.6.3)
=> basic options, no customizations
	extract the new versions of OpenDJ (in the folder instance)
	run the upgrade tool

$ ./opendj/upgrade 

>>>> OpenDJ Upgrade Utility

 * OpenDJ will be upgraded from version 2.6.3.12667 to
 3.0.0.4b6eae2b88b5a5abc3bc7bcee205ecf033675a0f
 * See '/tmp/opendj/upgrade.log' for a detailed log of
 this operation

>>>> Preparing to upgrade

  OpenDJ 3.0.0 introduced changes to the JE backend configuration and database
  format. The upgrade will update all JE backend configurations, but will only
  migrate JE backend databases which are associated with *enabled* JE
  backends. It is very strongly recommended that any existing data has been
  backed up and that you have read the upgrade documentation before
  proceeding. Do you want to proceed with the upgrade? (yes/no) [no]: y

  OpenDJ 3.0.0 changed the matching rule implementations. All indexes have to
  be rebuilt. This could take a long time to proceed. Do you want to launch
  this process automatically at the end of the upgrade? (yes/no) [no]: y

  The upgrade is ready to proceed. Do you wish to continue? (yes/no) [yes]: y

...

>>>> Performing post upgrade tasks

Nov 23, 2015 12:23:54 AM org.forgerock.i18n.slf4j.LocalizedLogger info
INFO: Loaded extension from file '/tmp/opendj/lib/extensions/snmp-mib2605.jar' (build 3.0.0-SNAPSHOT, revision 4b6eae2b88b5a5abc3bc7bcee205ecf033675a0f)
  Rebuilding all indexes..............................................   FAIL
  [!] An error occurred during post upgrade task. Process aborted. Please
  check log for further details

>>>> Post upgrade tasks complete

 * See '/tmp/opendj/upgrade.log' for a detailed log of
 this operation
$ echo $?
0





=> we can see that a problem occured during post upgrade tasks (rebuild index)
=> moreover the tool should not exit with RC=0 in such cases

Information from the upgrade log:

$ cat /tmp/opendj/upgrade.log
...
[23/Nov/2015:00:23:53 +0100] category=UPGRADE sq=154 severity=FINE src=org.forgerock.i18n.slf4j.LocalizedLogger debug
 msg=Rebuilding all indexes
[23/Nov/2015:00:23:53 +0100] category=UPGRADE sq=155 severity=FINE src=org.forgerock.i18n.slf4j.LocalizedLogger debug
 msg=The rebuild index tool arguments are [--rebuildAll, -f, /tmp/opendj/./config/config.ldif, -b, dc=com]
An error occurred while trying to load the Directory Server schema:  An error
occurred at or near line 86 while trying to parse the configuration from LDIF
file /tmp/opendj/config/config.ldif:
org.opends.server.util.LDIFException: Entry cn=SMTP Handler,cn=Account Status
Notification Handlers,cn=config read from LDIF starting at line 86 is not
valid because it violates the server's schema configuration: Entry cn=SMTP
Handler,cn=Account Status Notification Handlers,cn=config violates the
Directory Server schema configuration because it is missing attribute
ds-cfg-send-email-as-html which is required by objectclass
ds-cfg-smtp-account-status-notification-handler
[23/Nov/2015:00:23:54 +0100] category=UPGRADE sq=157 severity=WARNING src=org.forgerock.i18n.slf4j.LocalizedLogger warn
 msg=An error occurred during post upgrade task. Process aborted. Please check log for further details
[23/Nov/2015:00:23:54 +0100] category=UPGRADE sq=158 severity=INFO src=org.forgerock.i18n.slf4j.LocalizedLogger info
 msg=Post upgrade tasks complete
...

