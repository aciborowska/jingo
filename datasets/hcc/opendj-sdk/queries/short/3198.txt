Concurrent usage of HashSet results in infinite loop