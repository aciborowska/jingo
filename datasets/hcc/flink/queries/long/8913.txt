Running the word count example jar with the RocksDB state backend enabled (via job manager configuration) with the Flink hadoop28-scala_2.11-alpine image crashes with the following error:

 

2018-03-09 21:09:12,928 INFO2018-03-09 21:09:12,892 INFO org.apache.flink.runtime.taskmanager.Task - Source: Collection Source -> Flat Map (1/1) (38365cd6326de6df92b72d1acbda0f72) switched from RUNNING to FINISHED.
2018-03-09 21:09:12,892 INFO org.apache.flink.runtime.taskmanager.Task - Freeing task resources for Source: Collection Source -> Flat Map (1/1) (38365cd6326de6df92b72d1acbda0f72).
2018-03-09 21:09:12,894 INFO org.apache.flink.runtime.taskmanager.Task - Ensuring all FileSystem streams are closed for task Source: Collection Source -> Flat Map (1/1) (38365cd6326de6df92b72d1acbda0f72) [FINISHED]
2018-03-09 21:09:12,897 INFO org.apache.flink.runtime.taskmanager.TaskManager - Un-registering task and sending final execution state FINISHED to JobManager for task Source: Collection Source -> Flat Map (38365cd6326de6df92b72d1acbda0f72)
2018-03-09 21:09:12,902 INFO org.apache.flink.contrib.streaming.state.RocksDBStateBackend - Successfully loaded RocksDB native libraryorg.apache.flink.contrib.streaming.state.RocksDBKeyedStateBackend - Initializing RocksDB keyed state backend from snapshot.
#
# A fatal error has been detected by the Java Runtime Environment:
#
# SIGSEGV (0xb) at pc=0x00000000001432b6, pid=1, tid=0x00007fc4036e1ae8
#
# JRE version: OpenJDK Runtime Environment (8.0_151-b12) (build 1.8.0_151-b12)
# Java VM: OpenJDK 64-Bit Server VM (25.151-b12 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea 3.6.0
# Distribution: Custom build (Tue Nov 21 11:22:36 GMT 2017)
# Problematic frame:
# C 0x00000000001432b6
#
# Core dump written. Default location: /opt/flink/core or core.1
#
# An error report file with more information is saved as:
# /opt/flink/hs_err_pid1.log
#
# If you would like to submit a bug report, please include
# instructions on how to reproduce the bug and visit:
# http://icedtea.classpath.org/bugzilla

 

Switching to the Debian image fixes this issue. I imagine it has to do with alpine's alternative libc.