With FLINK-12615 we removed that partitions are being explicitly released from the JM if an Execution which is in state FINISHED or FAILED is being cancelled. In order to not have resource leak when using pipelined result partitions whose consumers fail before start consuming, we should re-introduce the deleted else branch (removed via 408f6b67aefaccfc76708b2d4772eb7f0a8fd984).

Once we properly wait that a Task does not finish until its produced results have been either persisted or sent to a consumer, then we should be able to remove this branch again.