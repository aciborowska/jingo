In the case where there are not enough resources to schedule the streaming program, a race condition can lead to a sequence of the following errors:


java.lang.IllegalStateException: SlotSharingGroup cannot clear task assignment, group still has allocated resources.



This eventually recovers, but may involve many fast restart attempts before doing so.

The root cause is that slots are not cleared before the next restart attempt.