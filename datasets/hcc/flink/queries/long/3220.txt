Steps to reproduce:

	Check out current master
	build flink mvn clean install -DskipTests -Dhadoop.version=2.7.1.2.3.2.0-2950 -Pvendor-repos
	start flink ./bin/yarn-session.sh -n 1
	failure:

[root@sandbox build-target]# ./bin/yarn-session.sh -n 1
13:29:58,170 WARN  org.apache.hadoop.util.NativeCodeLoader                       - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13:29:58,709 INFO  org.apache.hadoop.yarn.client.api.impl.TimelineClientImpl     - Timeline service address: http://sandbox.hortonworks.com:8188/ws/v1/timeline/
13:29:58,849 INFO  org.apache.hadoop.yarn.client.RMProxy                         - Connecting to ResourceManager at sandbox.hortonworks.com/10.0.2.15:8050
13:29:59,039 INFO  org.apache.flink.yarn.FlinkYarnClient                         - Using values:
13:29:59,040 INFO  org.apache.flink.yarn.FlinkYarnClient                         - 	TaskManager count = 1
13:29:59,040 INFO  org.apache.flink.yarn.FlinkYarnClient                         - 	JobManager memory = 1024
13:29:59,040 INFO  org.apache.flink.yarn.FlinkYarnClient                         - 	TaskManager memory = 1024
Exception in thread "main" java.lang.NoClassDefFoundError: javax/servlet/Filter
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
	at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
	at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
	at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	at org.apache.hadoop.hdfs.DFSConfigKeys.<clinit>(DFSConfigKeys.java:245)
	at org.apache.hadoop.hdfs.DFSClient$Conf.<init>(DFSClient.java:509)
	at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:638)
	at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:619)
	at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:149)
	at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2653)
	at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:92)
	at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2687)
	at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2669)
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:371)
	at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:170)
	at org.apache.flink.yarn.FlinkYarnClientBase.deployInternal(FlinkYarnClientBase.java:516)
	at org.apache.flink.yarn.FlinkYarnClientBase.deploy(FlinkYarnClientBase.java:337)
	at org.apache.flink.client.FlinkYarnSessionCli.run(FlinkYarnSessionCli.java:406)
	at org.apache.flink.client.FlinkYarnSessionCli.main(FlinkYarnSessionCli.java:348)
Caused by: java.lang.ClassNotFoundException: javax.servlet.Filter
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	... 39 more






This is a similar issue https://issues.apache.org/jira/browse/FLINK-3032