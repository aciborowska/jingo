When specifying a key selector in the where clause of a CoGroup, the closure cleaner is not used.


.coGroup(filteredIds)
                .where(new KeySelector<T, String>() {
                    @Override
                    public String getKey(T t) throws Exception {
                        String s = (String) t.get(fieldName);
                        return s != null ? s : UUID.randomUUID().toString();
                    }
                })



The problem is that the KeySelector is an anonymous inner class and as such as a reference to the outer object. Normally, this would be rectified by the closure cleaner but the cleaner is not used in CoGroup.where().