

      final CloseableRegistry snapshotCloseableRegistry = new CloseableRegistry();

      if (kvStateInformation.isEmpty()) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Asynchronous RocksDB snapshot performed on empty keyed state at {}. Returning null.",
            timestamp);
        }

        return DoneFuture.of(SnapshotResult.empty());
      }


If the method returns in the above if block, snapshotCloseableRegistry is not closed.