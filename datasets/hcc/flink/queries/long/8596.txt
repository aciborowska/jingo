The code that is trying to load the YARN CLI is catching Exception but if the YARN CLI cannot be loaded a java.lang.NoClassDefFoundError is thrown: https://github.com/apache/flink/blob/0e20b613087e1b326e05674e3d532ea4aa444bc3/flink-clients/src/main/java/org/apache/flink/client/cli/CliFrontend.java#L1067

This means that Flink does not work in Hadoop-free mode. We should fix this and also add an end-to-end test that verifies that Hadoop-free mode works.
