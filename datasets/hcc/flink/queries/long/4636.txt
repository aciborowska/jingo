The restoreState() of the AbstractCEPPatternOperator restores the a Java PriorityQueue. For that it first reads the number of elements to insert and then creates a PriorityQueue object. However, Java's PriorityQueue cannot be instantiated with an initial capacity of 0, which is not checked.
In case of an empty queue, the PriorityQueue should be instantiated with an initial size of 1.

See http://apache-flink-user-mailing-list-archive.2336050.n4.nabble.com/Problem-with-CEPPatternOperator-when-taskmanager-is-killed-tp9024.html