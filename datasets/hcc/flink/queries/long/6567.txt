The testExecutionGraphRestartTimeMetric fails every time i run it on AppVeyor. It also very rarely failed for me locally.

The test fails at Line 235 if the RUNNING timestamp is equal to the RESTARTING timestamp, which may happen when combining a fast test with a low resolution clock.

A simple fix would be to increase the timestamp between RUNNING and RESTARTING by adding a 50ms sleep timeout into the TestingRestartStrategy#canRestart() method, as this one is called before transitioning to the RESTARTING state.