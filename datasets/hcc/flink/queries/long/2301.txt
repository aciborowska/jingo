When the BarrierBuffer has some inputs blocked on barrier 0, then receives barriers for barrier 1 on the other inputs this makes the BarrierBuffer process the checkpoint with id 0.

I think the BarrierBuffer should drop all previous BarrierCheckpoints when it receives a barrier from a more recent checkpoint and unblock the previously blocked channels. This will make it ready to correctly react to the other barriers of the newer checkpoint. It should also ignore barriers that arrive late when we already processed a more recent checkpoint.