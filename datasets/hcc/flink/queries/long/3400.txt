The problem is that the external process runner cannot load the HDFSCopyFromLocal and HDFSCopyToLocal classes when the rocksdb backend jar is not in the Flink lib folder. If rocksdb is only in the user-code jar the code cannot be loaded when trying to start the external copy runners.