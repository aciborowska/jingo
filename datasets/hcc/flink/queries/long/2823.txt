The important variables are HADOOP_HOME and HADOOP_CONF_DIR.

If none of the two environment variables are set, the YARN client does not pick the correct settings / file system to successfully deploy a job.

The YARN client should throw a good exception. Right now, this requires some tricky debugging to find the cause of the problem.