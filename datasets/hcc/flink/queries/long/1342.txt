I've added a quick solution for [1] for the time being. The assembly still filters out everything from the org.apache.flink namespace, so any user code placed there will be missing from the fat jar.

If we do not use filtering at all the size of the jar goes up to almost 100 MB.

[1] https://issues.apache.org/jira/browse/FLINK-1225 