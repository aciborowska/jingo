If using the approach of placing flink-shaded-hadoop-2 jar under /lib, submitting Flink app either on a session or a sing app submission fails with j


java.lang.NoClassDefFoundError: com/sun/jersey/core/util/FeaturesAndProperties	at java.lang.ClassLoader.defineClass1(Native Method)	at java.lang.ClassLoader.defineClass(ClassLoader.java:763)	at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)	at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)	at java.net.URLClassLoader.access$100(URLClassLoader.java:73)	at java.net.URLClassLoader$1.run(URLClassLoader.java:368)	at java.net.URLClassLoader$1.run(URLClassLoader.java:362)	at java.security.AccessController.doPrivileged(Native Method)	at java.net.URLClassLoader.findClass(URLClassLoader.java:361)	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)	at org.apache.hadoop.yarn.client.api.TimelineClient.createTimelineClient(TimelineClient.java:55)	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.createTimelineClient(YarnClientImpl.java:181)	at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.serviceInit(YarnClientImpl.java:168)	at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.getClusterDescriptor(FlinkYarnSessionCli.java:966)	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.createDescriptor(FlinkYarnSessionCli.java:269)	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.createClusterDescriptor(FlinkYarnSessionCli.java:444)	at org.apache.flink.yarn.cli.FlinkYarnSessionCli.createClusterDescriptor(FlinkYarnSessionCli.java:92)	at org.apache.flink.client.cli.CliFrontend.runProgram(CliFrontend.java:225)	at org.apache.flink.client.cli.CliFrontend.run(CliFrontend.java:214)	at org.apache.flink.client.cli.CliFrontend.parseParameters(CliFrontend.java:1025)	at org.apache.flink.client.cli.CliFrontend.lambda$main$9(CliFrontend.java:1101)	at java.security.AccessController.doPrivileged(Native Method)	at javax.security.auth.Subject.doAs(Subject.java:422)	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1754)	at org.apache.flink.runtime.security.HadoopSecurityContext.runSecured(HadoopSecurityContext.java:41)	at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1101)Caused by: java.lang.ClassNotFoundException: com.sun.jersey.core.util.FeaturesAndProperties	at java.net.URLClassLoader.findClass(URLClassLoader.java:381)	at java.lang.ClassLoader.loadClass(ClassLoader.java:424)	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335)	at java.lang.ClassLoader.loadClass(ClassLoader.java:357)	... 29 more

