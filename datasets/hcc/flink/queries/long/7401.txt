EnvironmentInformation.getMaxJvmHeapMemory is intended to return the value given to the JVM via -Xmx but it actually returns something a bit smaller which may disturb memory calculations expecting the right value.

For now, this is a "good" bug as the calculations inside TaskManagerServices#calculateNetworkBufferMemory(), for example, lead to lower values for the network buffers or the manages memory fractions which thus still fit into the bounds set by the JVM options.