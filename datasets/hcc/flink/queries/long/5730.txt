The current implementation of asynchronous snapshots in RocksDB iterates the original state metadata structures as part of the asynchronous snapshot. Users could potentially modify the state metadata concurrently (e.g. by registering a new state while the snapshot is running), thereby corrupting the metadata.

For the way most users are registering their states (at the start of the task), this is not a problem. However, if state is conditionally registered at some later point in time this can be problematic.