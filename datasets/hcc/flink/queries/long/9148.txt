refer to https://ci.apache.org/projects/flink/flink-docs-release-1.4/ops/deployment/kubernetes.html:

I deploy flink1.4 on kubernetes 1.9, the jobmanager container is ok, but the taskmanager contains failed with error:

java.net.UnknownHostException: flink-jobmanager: Temporary failure in name resolution
 at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
 at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)
 at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)
 at java.net.InetAddress.getAllByName0(InetAddress.java:1276)
 at java.net.InetAddress.getAllByName(InetAddress.java:1192)
 at java.net.InetAddress.getAllByName(InetAddress.java:1126)
 at java.net.InetAddress.getByName(InetAddress.java:1076)
 at org.apache.flink.runtime.rpc.akka.AkkaRpcServiceUtils.getRpcUrl(AkkaRpcServiceUtils.java:172)
 at org.apache.flink.runtime.rpc.akka.AkkaRpcServiceUtils.getRpcUrl(AkkaRpcServiceUtils.java:137)
 at org.apache.flink.runtime.highavailability.HighAvailabilityServicesUtils.createHighAvailabilityServices(HighAvailabilityServicesUtils.java:79)
 at org.apache.flink.runtime.taskmanager.TaskManager$.selectNetworkInterfaceAndRunTaskManager(TaskManager.scala:1681)
 at org.apache.flink.runtime.taskmanager.TaskManager$$anon$2.call(TaskManager.scala:1592)
 at org.apache.flink.runtime.taskmanager.TaskManager$$anon$2.call(TaskManager.scala:1590)
 at java.security.AccessController.doPrivileged(Native Method)

 

I know that the the 
jobmanager-deployment.yaml
taskmanager-deployment.yaml

I know in flink docker image, it uses environment  {{JOB_MANAGER_RPC_ADDRESS=flink-jobmanager to resolve jobmanager address. however in flink task container, it can't resolve the hostname flink-jobmanager.
Can anyone help me to fix it? Should I need to setup a DNS to resolve?}}