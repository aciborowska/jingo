
      // wait for resource manager to finish
      resourceManager.getTerminationFuture().get();


The above is outside synchronized block.

@GuardedBy indicates that access should be protected.