The test in org.apache.flink.api.java.typeutils.runtime.kryo.KryoGenericTypeSerializerTest.testJavaSet(KryoGenericTypeSerializerTest.java:59) may fail due to a different iteration order of HashSet. The test aims to check the serializer of HashSet. It will invoke org.apache.flink.testutils.DeeplyEqualsChecker.deepEqualsIterable(DeeplyEqualsChecker.java:107), where the iterator of HashSet is called. However, the HashSet makes no guarantee about the order it iterates, finally causing an assertion failure. The fix is to use LinkedHashSet to make the test more stable.