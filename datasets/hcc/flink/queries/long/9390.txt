I found some logged exceptions in a user log that occurred during shutdown in the context of the Kafka Producer. Those exceptions are most certainly not a real problem, but can be confusing to users, so maybe we can get rid of them.




2018-05-16 08:52:16,526 DEBUG org.apache.flink.streaming.api.operators.async.Emitter - Emitter thread got interrupted, shutting down.
2018-05-16 08:52:16,527 ERROR org.apache.flink.streaming.runtime.tasks.StreamTask - Error during disposal of stream operator.
org.apache.kafka.common.KafkaException: Failed to close kafka producer
 at org.apache.kafka.clients.producer.KafkaProducer.close(KafkaProducer.java:734)
 at org.apache.kafka.clients.producer.KafkaProducer.close(KafkaProducer.java:682)
 at org.apache.kafka.clients.producer.KafkaProducer.close(KafkaProducer.java:661)
 at org.apache.flink.streaming.connectors.kafka.FlinkKafkaProducerBase.close(FlinkKafkaProducerBase.java:319)
 at org.apache.flink.api.common.functions.util.FunctionUtils.closeFunction(FunctionUtils.java:43)
 at org.apache.flink.streaming.api.operators.AbstractUdfStreamOperator.dispose(AbstractUdfStreamOperator.java:117)
 at org.apache.flink.streaming.runtime.tasks.StreamTask.disposeAllOperators(StreamTask.java:479)
 at org.apache.flink.streaming.runtime.tasks.StreamTask.invoke(StreamTask.java:384)
 at org.apache.flink.runtime.taskmanager.Task.run(Task.java:703)
 at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.InterruptedException
 at java.lang.Object.wait(Native Method)
 at java.lang.Thread.join(Thread.java:1260)
 at org.apache.kafka.clients.producer.KafkaProducer.close(KafkaProducer.java:703)
 ... 9 more


