mvn test fails at flink-runtime, particularly after executing mvn clean.

Results :

Tests in error:
  JobManagerLeaderElectionTest.testLeaderElection:101->createJobManagerProps:168 NoClassDefFound
  JobManagerLeaderElectionTest.testLeaderReelection:132->createJobManagerProps:168 NoClassDefFound
  ZooKeeperLeaderElectionTest.testEphemeralZooKeeperNodes:444 NoClassDefFound or...
  ZooKeeperLeaderElectionTest.testExceptionForwarding:372 NoClassDefFound org/ap...
  ZooKeeperLeaderElectionTest.testMultipleLeaders:291 NoClassDefFound org/apache...
  ZooKeeperLeaderElectionTest.testZooKeeperLeaderElectionRetrieval:94 NoClassDefFound
  ZooKeeperLeaderElectionTest.testZooKeeperReelection:137 ? NoClassDefFound org/...
  ZooKeeperLeaderElectionTest.testZooKeeperReelectionWithReplacement:207 NoClassDefFound
  ZooKeeperLeaderRetrievalTest.testConnectingAddressRetrievalWithDelayedLeaderElection:96 NoClassDefFound
  ZooKeeperLeaderRetrievalTest.testTimeoutOfFindConnectingAddress:187 ? NoClassDefFound
  ZooKeeperUtilTest.testZooKeeperEnsembleConnectStringConfiguration:40 NoClassDefFound

Tests run: 902, Failures: 0, Errors: 11, Skipped: 1




and some stack traces

testMultipleLeaders(org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest)  Time elapsed: 1.137 sec  <<< ERROR!
java.lang.NoClassDefFoundError: org/apache/curator/RetryPolicy
        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest.testMultipleLeaders(ZooKeeperLeaderElectionTest.java:291)

testExceptionForwarding(org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest)  Time elapsed: 1.094 sec  <<< ERROR!
java.lang.NoClassDefFoundError: org/apache/curator/framework/api/CreateBuilder
        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)
        at org.apache.flink.runtime.leaderelection.ZooKeeperLeaderElectionTest.testExceptionForwarding(ZooKeeperLeaderElectionTest.java:372)




Strange enough, many of Travis check is OK on master, but it fails on my host particularly after mvn clean.
Adding explicit curator-framework dependency to flink-runtime would solve the problem. will send a PR and see my problem is legitimate.