

          String tmID = ((QueryScopeInfo.TaskManagerQueryScopeInfo) info).taskManagerID;
          tm = taskManagers.computeIfAbsent(tmID, k -> new TaskManagerMetricStore());


In other places, access to taskManagers is protected by lock on MetricStore.this