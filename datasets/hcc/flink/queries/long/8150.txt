TaskManager IDs exposed by org.apache.flink.runtime.rest.handler.taskmanager.TaskManagersHandler cannot be used as input to query TaskManager metrics with method MetricStore#getTaskManagerMetricStore(String).

Reason
ResourceManager#requestTaskManagerInfo(Time) returns TaskManagerInfo s where the instance IDs are set to the IDs of the TaskExecutorConnection s. While ResourceManager#requestTaskManagerMetricQueryServicePaths(Time) returns the Taskmanager resource IDs.