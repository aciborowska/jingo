The job does not recover if a checkpoint cannot be read and jobmanager.execution.failover-strategy is set to "region". 

Analysis

The RestartCallback created by AdaptedRestartPipelinedRegionStrategyNG throws a RuntimeException if no checkpoints could be read. When the restart is invoked in a separate thread pool, the exception is swallowed. See:

https://github.com/apache/flink/blob/21621fbcde534969b748f21e9f8983e3f4e0fb1d/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/failover/AdaptedRestartPipelinedRegionStrategyNG.java#L117-L119

https://github.com/apache/flink/blob/21621fbcde534969b748f21e9f8983e3f4e0fb1d/flink-runtime/src/main/java/org/apache/flink/runtime/executiongraph/restart/FixedDelayRestartStrategy.java#L65

Expected behavior

	Job should restart



Â 