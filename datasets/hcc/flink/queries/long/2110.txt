In Execution#processFail(Throwable, boolean), the slot is released before the cancel msg is send to the respective task manager assigned to this Execution.

Cancelling on the TM can take some time, which can result in a too early release of the slot on the JM.