The StateDescriptor is not deserialized with the usercode classloader. This makes restore fail with NoClassDefFound error if the user uses custom type serializers:

https://github.com/apache/flink/blob/master/flink-contrib/flink-statebackend-rocksdb/src/main/java/org/apache/flink/contrib/streaming/state/RocksDBStateBackend.java#L583