A user reported a connection issue with Netty being unable to connect to a TaskManager to subscribe to an intermediate result.

The problem occurred when the TaskManager and JobManager were running on the same host (something that can easily happen on YARN).
In that case, the TaskManager was reporting a host-local ip address to the JobManager when connecting.

To avoid the issue in the future, the TaskManager first tries to use the hostname returned by InetAddress.getLocalHost(). In a properly set-up environment, this will return a connection which is accessible by all machines in a cluster.