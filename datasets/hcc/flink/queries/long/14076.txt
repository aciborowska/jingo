A Flink job that worked with checkpointing on a Flink v1.8.0 cluster fails on a Flink v1.9.0 cluster with checkpointing. It works on a Flink v1.9.0 cluster without checkpointing. It is specifically enabling checkpointing on v1.9.0 that causes the JM to start throwing ClassNotFoundExceptions. Full stacktrace: error.txt

The job reads from Kafka via FlinkKafkaConsumer and writes to Kafka via FlinkKafkaProducer.

The jobmanagers and taskmanagers are standalone.

The exception is being raised deep in some Flink serialization code, so I'm not sure how to go about stepping through this in a debugger. The issue is happening in an internal repository at my job, but I can try to get a minimal repro on GitHub if it's not obvious from the error message alone what's broken.