I upgrade the standalone cluster(3 machines) from flink1.9 to flink1.10.0 latest. My job running normally in flink1.9 for about half a year, while I get some job failed due to null pointer exception when checkpoing in  flink1.10.0.

Below is the exception log:



I have checked the StreamTask(882), and is shown below. I think the only case is that checkpointMetaData is null that can lead to a null pointer exception.



I do not know why, is there anyone can help me? The problem only occurs in Flink1.10.0 for now, it works well in flink1.9. I give the some conf info(some different to the default) also in below, guessing that maybe it is an error for configuration mistake.

some conf of my flink1.10.0:

 


taskmanager.memory.flink.size: 71680m
taskmanager.memory.framework.heap.size: 512m
taskmanager.memory.framework.off-heap.size: 512m
taskmanager.memory.task.off-heap.size: 17920m
taskmanager.memory.managed.size: 512m
taskmanager.memory.jvm-metaspace.size: 512m

taskmanager.memory.network.fraction: 0.1
taskmanager.memory.network.min: 1024mb
taskmanager.memory.network.max: 1536mb
taskmanager.memory.segment-size: 128kb

rest.port: 8682
historyserver.web.port: 8782high-availability.jobmanager.port: 13141,13142,13143,13144
blob.server.port: 13146,13147,13148,13149taskmanager.rpc.port: 13151,13152,13153,13154
taskmanager.data.port: 13156metrics.internal.query-service.port: 13161,13162,13163,13164,13166,13167,13168,13169env.java.home: /usr/java/jdk1.8.0_60/bin/java
env.pid.dir: /home/work/flink-1.10.0

 

Hope someone can help me solve it.

 

 