While working on FLINK-10455, I encountered a deadlock in FlinkKafkaProducer(011).close() if pendingTransactions are closed before currentTransaction. There is no deadlock other way around.