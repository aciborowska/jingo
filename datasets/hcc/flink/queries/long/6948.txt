The EnumValueSerializer cannot handle removed enum values or enum values whose ordinal value have been changed. We should try to detect these cases and require migration. The problem is that we take the values of the new enum and iterate over them without checking that all old enum values contained in the config snapshot are actually contained.