The new web dashboard port configuration only affects the server side, but not the client side.

To reproduce set in flink-conf.yaml:

jobmanager.web.port: 9091
jobmanager.new-web-frontend: true



Run

$ bin/start-cluster.sh



You can browse to http://localhost:9091, but you won't see any data from the job manager. Requests to http://localhost:9091/overview etc. work as expected, but the client side JavaScript is running requests against http://localhost:8081.

The problem is that flink-runtime-web/web-dashboard/app/scripts/index.coffee hard codes:

.value 'flinkConfig', {
  jobServer: 'http://localhost:8081'
}


 which is picked up by all generated scripts.

This needs to be configurable for both standalone mode but especially for recovery mode. This was a major pain point for me today, because I was working on the dashboard and thought that my changes were wrong.

In general, we need to add more tests to the new dashboard, which should soon replace the old one imo.