

for (Map.Entry<Gauge, DGauge> entry : gauges.entrySet()) {
   DGauge g = entry.getValue();
   try {
      // Will throw exception if the Gauge is not of Number type
      // Flink uses Gauge to store many types other than Number
      g.getMetricValue();
      request.addGauge(g);
   } catch (Exception e) {
      // Remove that Gauge if it's not of Number type
      gauges.remove(entry.getKey());
   }
}


in this method remove willÂ java.util.ConcurrentModificationException