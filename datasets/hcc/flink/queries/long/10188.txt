Discussion on the mailing list.Â 

Currently, Retraction has not considered non-deterministic functions. For sql like:


source -> group by -> 
                       non-window join -> retract_sink
source -> group by -> 


The group by will send retract messages to join. However, if we add LOCALTIMESTAMP between group by and join, messages can not be retracted correctly in join, since join retract messages according to the whole row.