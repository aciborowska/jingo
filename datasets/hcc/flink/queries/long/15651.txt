The test JarHandlerTest.testRunJar fails on travis with error below:




09:48:58.828 [ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.061 s <<< FAILURE! - in org.apache.flink.runtime.webmonitor.handlers.JarHandlerTest
09:48:58.829 [ERROR] testRunJar(org.apache.flink.runtime.webmonitor.handlers.JarHandlerTest)  Time elapsed: 0.2 s  <<< FAILURE!
java.lang.AssertionError: 

Expected: a string containing "ProgramInvocationException"
     but: was "[Service temporarily unavailable due to an ongoing leader election. Please refresh.]"
	at org.apache.flink.runtime.webmonitor.handlers.JarHandlerTest.runTest(JarHandlerTest.java:125)
	at org.apache.flink.runtime.webmonitor.handlers.JarHandlerTest.testRunJar(JarHandlerTest.java:74)



Seems the cause is the client sends request before the leader election is done.

https://api.travis-ci.com/v3/job/276751147/log.txt