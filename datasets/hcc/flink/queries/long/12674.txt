Currently BoundedBlockingSubpartition#unsynchronizedGetNumberOfQueuedBuffers returns always 0, which affects metrics and is a regression compared to the old SpillableSubpartition. Is there a way to implement it?

 

Note that before taking this ticket, make sure what's the current status of the issue reported https://issues.apache.org/jira/browse/FLINK-12070?focusedCommentId=16849615&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16849615 which might affect the final implementation.