To get a feel of the api, check out this example (connected components)

```
public class SpargelConnectedComponents {

	public static void main(String[] args) throws Exception 
{
		ExecutionEnvironment env = ExecutionEnvironment.getExecutionEnvironment();

		DataSet<Long> vertexIds = env.generateSequence(0, 10);
		DataSet<Tuple2<Long, Long>> edges = env.fromElements(new Tuple2<Long, Long>(0L, 2L), new Tuple2<Long, Long>(2L, 4L), new Tuple2<Long, Long>(4L, 8L),
															new Tuple2<Long, Long>(1L, 5L), new Tuple2<Long, Long>(3L, 7L), new Tuple2<Long, Long>(3L, 9L));

		DataSet<Tuple2<Long, Long>> initialVertices = vertexIds.map(new IdAssigner());

		DataSet<Tuple2<Long, Long>> result = initialVertices.runOperation(SpargelIteration.withPlainEdges(edges, new CCUpdater(), new CCMessager(), 100));

		result.print();
		env.execute("Spargel Connected Components");
	}


	public static final class CCUpdater extends VertexUpdateFunction<Long, Long, Long> {
		@Override
		public void updateVertex(Long vertexKey, Long vertexValue, MessageIterator<Long> inMessages) {
			long min = Long.MAX_VALUE;
			for (long msg : inMessages) 
{
				min = Math.min(min, msg);
			}
			if (min < vertexValue) 
{
				setNewVertexValue(min);
			}
		}
	}

	public static final class CCMessager extends MessagingFunction<Long, Long, Long, NullValue> {
		@Override
		public void sendMessages(Long vertexId, Long componentId) 
{
			sendMessageToAllNeighbors(componentId);
		}
	}

	public static final class IdAssigner extends MapFunction<Long, Tuple2<Long, Long>> {

		@Override
		public Tuple2<Long, Long> map(Long value) throws Exception 
{
			return new Tuple2<Long, Long>(value, value);
		}
	}
}
```
From https://github.com/StephanEwen/stratosphere/blob/spargel/stratosphere-addons/spargel/src/main/java/eu/stratosphere/spargel/java/examples/SpargelConnectedComponents.java



---------------- Imported from GitHub ----------------
Url: https://github.com/stratosphere/stratosphere/pull/638
Created by: StephanEwen
Labels: java api, 
Created at: Fri Mar 28 03:01:25 CET 2014
State: closed