Invoking getRuntimeContext() in open() inside a RegularPactTask always causes an IllegalStateException. 

In RegularPactTask initLocalStrategies() and thus open() of the stub is called before the RuntimeContext is set with initialize().

Please note that inside a ChainedMapTask it works as expected

Here is the corresponding fragment of RegularPactTask:

```java
// initialize the remaining data structures on the input and trigger the local processing
// the local processing includes building the dams / caches

try 
{
	int numInputs = driver.getNumberOfInputs();

	initInputsSerializersAndComparators(numInputs);
	initLocalStrategies(numInputs);

}
 catch (Exception e) 
{
	throw new RuntimeException("Initializing the input processing failed" +

		e.getMessage() == null ? "." : ": " + e.getMessage(), e);

}

if (!this.running) {

	if (LOG.isDebugEnabled())
		LOG.info(formatLogString("Task cancelled before PACT code was started."));

	return;
}

// pre main-function initialization

initialize();
```

---------------- Imported from GitHub ----------------
Url: https://github.com/stratosphere/stratosphere/issues/244
Created by: AHeise
Labels: bug, core, user satisfaction, 
Created at: Wed Nov 06 13:52:14 CET 2013
State: closed