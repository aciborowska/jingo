The CheckpointCoordinator has a shutdown hook that "shuts down" the savepoint store, rather than suspending it.

As a consequence, HA checkpoints may be lost when the JobManager process fails but allows the shutdown hook to run.

I would suggest to remove the sutdown hook from the CheckpointCoordinator all together. The JobManager process is responsible for cleanups and can better decide what should be cleaned up and what not.