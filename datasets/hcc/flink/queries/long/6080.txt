
    public void serialize(NFA<T> record, DataOutputView target) throws IOException {
      ObjectOutputStream oos = new ObjectOutputStream(new DataOutputViewStream(target));
      oos.writeObject(record);
      oos.flush();
    }


ObjectOutputStream should be closed before returning from method.