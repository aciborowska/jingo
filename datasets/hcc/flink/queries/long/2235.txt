When executing a Flink job locally, the task manager gets initialized with an insane amount of memory. After a quick look in the code it seems that the call to EnvironmentInformation.getSizeOfFreeHeapMemoryWithDefrag() returns a wrong estimate of the heap memory size.

Moreover, the same user switched to Oracle JDK 1.8 and that made the error disappear. So I'm guessing this is some Java 1.6 quirk.