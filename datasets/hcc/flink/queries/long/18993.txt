In deriveFromRequiredFineGrainedOptions method from JobManagerFlinkMemoryUtils.java, it will call sanityCheckTotalFlinkMemory method to check heap, off-heap and total memory as below.


sanityCheckTotalFlinkMemory(totalFlinkMemorySize, jvmHeapMemorySize, totalFlinkMemorySize);


As I understand it, the third argument should be offHeapMemorySize.


sanityCheckTotalFlinkMemory(totalFlinkMemorySize, jvmHeapMemorySize, offHeapMemorySize);


 