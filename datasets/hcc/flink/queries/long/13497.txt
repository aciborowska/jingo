I think that we introduced with FLINK-12364 an inconsistency wrt to job termination a checkpointing. In FLINK-9900 it was discovered that checkpoints can complete even after the CheckpointFailureManager decided to fail a job. I think the expected behaviour should be that we fail all pending checkpoints once the CheckpointFailureManager decides to fail the job.