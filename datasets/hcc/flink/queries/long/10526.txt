When we were bumping Flink from 1.3.2 to 1.4.0, we noticed the HadoopFileSystem no longer reads flinkConfig. 

This prevents users to pass in custom HDFS configuration (e.g. core-site.xml) via fs.hdfs.hadoopconf.

Specially it is due to the cached HadoopFsFactory is initialized with an dummy Configuration ([code), which prevents future flinkConfig getting passed in ([code).

We have verified by calling FileSystem.initialize(flinkConfig) explicitly in YarnApplicationMasterRunner.run solve the issue.

 