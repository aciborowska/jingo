The FlinkYarnSessionCli class tries to calculate how many slots each taskmanager gets based on the user-supplied parallelism option. It's using an int, so when -p < -yn it is truncated to 0 and the cluster then fails to start, saying slots per TM must be positive. And example command to trigger this would be:

bin/flink run -m yarn-cluster -d -yn 20 -ys 2 -p 5 <a jar>