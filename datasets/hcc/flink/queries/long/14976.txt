This issue was mostly fixed in FLINK-13059; unfortunately, the fix only caughtÂ Exception so any non-Exception Throwable can still cause the issue of leaking semaphores.