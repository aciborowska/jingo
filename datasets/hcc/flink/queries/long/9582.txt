The flink-dist assemblies access compiled jars outside of flink-dist, for example like this:


<source>../flink-libraries/flink-cep/target/flink-cep_${scala.binary.version}-${project.version}.jar</source>

As usual, accessing files outside of the module that you're building is a terrible idea.

It's brittle as it relies on paths that aren't guaranteed to be stable, and requires these modules to be built beforehand. There's also an inherent potential for dependency conflicts when building flink-dist on it's own, as maven may download certain snapshot artifacts, but the assemblies ignore these and bundle jars present in Flink.

We can use the maven-dependency plugin to copy required dependencies into the target directory of flink-dist, and point the assemblies to these jars.