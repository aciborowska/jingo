Here is related code:

    synchronized (triggerLock) {
...
      try {
        List<MasterState> masterStates = MasterHooks.triggerMasterHooks(masterHooks.values(),


masterHooks is protected by lock in other methods while triggerLock is only used in CheckpointCoordinator#triggerCheckpoint()