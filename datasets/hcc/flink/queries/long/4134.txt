It seems like EventTimeSessionWindows sometimes trigger for empty windows. The behavior is observed in connection with dropping late events:


stream
 .keyBy("sessionKey")
 .window(EventTimeSessionWindows.withGap(Time.milliseconds(100)))
 .allowedLateness(Time.milliseconds(0))
 .apply(new ValidatingWindowFunction())
 .print();




I wrote a generator that generates events for several parallel sessions and that allows to reproduce the error. For now, I can share this generator privately for debugging purposes, but my plan is to use the generator as basis for an integration test.