I upgraded flink from 1.3.2 to 1.4.0 and my simple test case no longer runs within Intellij or any other IDE when I click on the "RUN" button.  I'm using JDK 1.8.

My Dependencies are:

 


dependencies {
compile group: 'log4j', name: 'log4j', version: '1.2.17' 
compile 'org.apache.flink:flink-java:1.4.0' 
compile 'org.apache.flink:flink-streaming-java_2.11:1.4.0' 
compile 'org.apache.flink:flink-clients_2.11:1.4.0' 
compile 'org.apache.flink:flink-table_2.11:1.4.0' 
compile 'org.apache.flink:flink-scala_2.11:1.4.0' 
compile 'org.apache.flink:flink-streaming-scala_2.11:1.4.0'
compile 'org.apache.flink:flink-connector-kafka-0.8_2.11:1.4.0'
compile 'org.apache.flink:flink-queryable-state-runtime_2.11:1.4.0'
compile 'org.apache.flink:flink-queryable-state-client-java__2.11:1.4.0' testCompile 'junit:junit:+'
}


 

 

The exception:


Exception in thread "main" org.apache.flink.runtime.client.JobSubmissionException: Could not retrieve BlobServer address. at org.apache.flink.runtime.client.JobSubmissionClientActor$1.call(JobSubmissionClientActor.java:166) at akka.dispatch.Futures$$anonfun$future$1.apply(Future.scala:97) at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24) at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24) at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:39) at akka.dispatch.ForkJoinExecutorConfigurator$AkkaForkJoinTask.exec(AbstractDispatcher.scala:415) at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260) at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339) at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979) at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107) Caused by: java.util.concurrent.ExecutionException: akka.pattern.AskTimeoutException: Ask timed out on [Actor[akka://flink/user/jobmanager_1#-1662993273]] after [10000 ms]. Sender[null] sent message of type "org.apache.flink.runtime.messages.JobManagerMessages$RequestBlobManagerPort$". at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357) at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1915) at org.apache.flink.runtime.client.JobSubmissionClientActor$1.call(JobSubmissionClientActor.java:160) ... 9 more Caused by: akka.pattern.AskTimeoutException: Ask timed out on [Actor[akka://flink/user/jobmanager_1#-1662993273]] after [10000 ms]. Sender[null] sent message of type "org.apache.flink.runtime.messages.JobManagerMessages$RequestBlobManagerPort$". at akka.pattern.PromiseActorRef$$anonfun$1.apply$mcV$sp(AskSupport.scala:604) at akka.actor.Scheduler$$anon$4.run(Scheduler.scala:126) at scala.concurrent.Future$InternalCallbackExecutor$.unbatchedExecute(Future.scala:601) at scala.concurrent.BatchingExecutor$class.execute(BatchingExecutor.scala:109) at scala.concurrent.Future$InternalCallbackExecutor$.execute(Future.scala:599) at akka.actor.LightArrayRevolverScheduler$TaskHolder.executeTask(LightArrayRevolverScheduler.scala:329) at akka.actor.LightArrayRevolverScheduler$$anon$4.executeBucket$1(LightArrayRevolverScheduler.scala:280) at akka.actor.LightArrayRevolverScheduler$$anon$4.nextTick(LightArrayRevolverScheduler.scala:284) at akka.actor.LightArrayRevolverScheduler$$anon$4.run(LightArrayRevolverScheduler.scala:236) at java.lang.Thread.run(Thread.java:748)

 

The debug full logs are located in https://gist.github.com/xuan/e6d4543c478c30d5747428589b03dd03 along with the test case.