In NetworkBufferPool#requestMemorySegments, numTotalRequiredBuffers is increased by numRequiredBuffers first.

If InterruptedException is thrown during polling segments from the available queue, the requested segments will be recycled back to NetworkBufferPool, numTotalRequiredBuffers is decreased by the number of polled segments which is now inconsistent with numRequiredBuffers. So numTotalRequiredBuffers in NetworkBufferPool leaks in this case, and we can also decrease numRequiredBuffers to fix this bug.

 