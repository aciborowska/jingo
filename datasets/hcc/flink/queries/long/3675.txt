After some discussion on the user mailing list it came up that the flink/lib folder is always supposed to be shipped to the YARN cluster so that all the nodes have access to its contents.

Currently however, the Flink long-running YARN session actually ships the folder because it's explicitly specified in the yarn-session.sh script, while running a single job on YARN does not automatically ship it.