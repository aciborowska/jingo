Currently the precondition check in setPosition will fail when the buffer is full: 
Preconditions.checkArgument(position < getEndPosition(), "Position out of bounds.");

We should allow the expected position to be the end position