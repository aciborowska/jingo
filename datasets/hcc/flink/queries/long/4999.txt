
    // re-try 3 times, if fails, return 0 for "unknown"
    for (int retry = 0; retry < 3; retry++) {
...
      catch (Exception ignored) {}


There is no synchronization around accessing inputChannels currently. Therefore the method expects potential exception.

Upon the 3rd try, synchronization should be taken w.r.t. inputChannels so that the return value is accurate.