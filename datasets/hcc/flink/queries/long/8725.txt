The CEP library currently serialises the static parts of the NFA in the state for each key. This is wasteful, because that part is static and problematic because the static part can contain user code in the form of filter functions.

Â 

We should only serialise the dynamic state of the NFA (current states, seen elements).