Externalized checkpoints are cleaned up when the job is suspended. Suspensions happen on graceful shut down (non-HA) or loss of leadership (HA).

In case of HA, the checkpoint store does not clean up any checkpoints as they might be recovered by a new leader. The only way to stop a HA job is to actually cancel it. Therefore the configured clean up behaviour doesn't matter.

In case of non-HA, suspensions happen because of graceful shut down (for example stopping a YARN session). In this case I would treat the clean up behaviour similar to cancelling the job.


ExternalizedCheckpointCleanup.DELETE_ON_CANCELLATION => delete on suspension

ExternalizedCheckpointCleanup.RETAIN_ON_CANCELLATION => retain on suspension

