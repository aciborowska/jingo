After updating the Homebrew formula to 1.10.0 (in $(brew --repository homebrew/core) directory) with patch of this PR, executing `brew install --build-from-source Formula/apache-flink.rb` and then `brew test Formula/apache-flink.rb`, we could see below error:


[ERROR] Unexpected result: Error: Could not find or load main class org.apache.flink.runtime.util.BashJavaUtils
[ERROR] The last line of the BashJavaUtils outputs is expected to be the execution result, following the prefix 'BASH_JAVA_UTILS_EXEC_RESULT:'
Picked up _JAVA_OPTIONS: -Djava.io.tmpdir=/private/tmp/apache-flink-test-20200214-33361-1jotper -Duser.home=/Users/jueding/Library/Caches/Homebrew/java_cache
Error: Could not find or load main class org.apache.flink.runtime.util.BashJavaUtils
[ERROR] Could not get JVM parameters properly.
Error: apache-flink: failed
Failed executing:


After a bisect checking on flink-dist/src/main/flink-bin/bin changes, confirmed the above issue is related to FLINK-15488, but we will see new errors like below after reverting FLINK-15488 (and FLINK-15519):


==> /usr/local/Cellar/apache-flink/1.10.0/libexec/bin/start-cluster.sh
==> /usr/local/Cellar/apache-flink/1.10.0/bin/flink run -p 1 /usr/local/Cellar/apache-flink/1.10.0/libexec/examples/streaming/WordCount.jar --input input --output result
Last 15 lines from /Users/jueding/Library/Logs/Homebrew/apache-flink/test.02.flink:
	at akka.actor.ActorCell.receiveMessage(ActorCell.scala:592)
	at akka.actor.ActorCell.invoke(ActorCell.scala:561)
	at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:258)
	at akka.dispatch.Mailbox.run(Mailbox.scala:225)
	at akka.dispatch.Mailbox.exec(Mailbox.scala:235)
	... 4 more
Caused by: org.apache.flink.runtime.resourcemanager.exceptions.UnfulfillableSlotRequestException: Could not fulfill slot request b7f17c0928112209ae873d089123b1c6. Requested resource profile (ResourceProfile{UNKNOWN}) is unfulfillable.
	at org.apache.flink.runtime.resourcemanager.slotmanager.SlotManagerImpl.lambda$fulfillPendingSlotRequestWithPendingTaskManagerSlot$9(SlotManagerImpl.java:772)
	at org.apache.flink.util.OptionalConsumer.ifNotPresent(OptionalConsumer.java:52)
	at org.apache.flink.runtime.resourcemanager.slotmanager.SlotManagerImpl.fulfillPendingSlotRequestWithPendingTaskManagerSlot(SlotManagerImpl.java:768)
	at org.apache.flink.runtime.resourcemanager.slotmanager.SlotManagerImpl.lambda$internalRequestSlot$7(SlotManagerImpl.java:755)
	at org.apache.flink.util.OptionalConsumer.ifNotPresent(OptionalConsumer.java:52)
	at org.apache.flink.runtime.resourcemanager.slotmanager.SlotManagerImpl.internalRequestSlot(SlotManagerImpl.java:755)
	at org.apache.flink.runtime.resourcemanager.slotmanager.SlotManagerImpl.registerSlotRequest(SlotManagerImpl.java:314)
	... 27 more
Error: apache-flink: failed
Failed executing:

