Currently, the BoundedBlockingSubpartition relies on the add of the next BufferConsumer to flush and recycle the previous one, which means we need at least (numsubpartition + 1) buffers to make the bounded blocking ResultPartition work. However, the ResultPartitionFactory gives only (numsubpartition) required buffers to the BoundedBlockingSubpartition which may lead to deadlock.

This problem exists only in version 1.9. In version 1.10 (master), this problem has been fixed by this commit: 2c8b4ef572f05bf4740b7e204af1e5e709cd945c.