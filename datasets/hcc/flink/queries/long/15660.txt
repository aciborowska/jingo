

 

In function TaskSlotTable::allocateSlot, first we will check whether allocationId is exist, when exist we will refused this allocation, this was introduced by FLINK-14589 . But in FLINK-14189, when allocationId exist, we think this is valid, which is contradictory with the first check.

 The code is following:

https://github.com/apache/flink/blob/310452e800355f0dcc4bc9dd26e9cecba263f3d6/flink-runtime/src/main/java/org/apache/flink/runtime/taskexecutor/slot/TaskSlotTable.java#L261