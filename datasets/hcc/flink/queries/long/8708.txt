In flink-examples/flink-examples-streaming/src/main/java/org/apache/flink/streaming/examples/statemachine/generator/StandaloneThreadedGenerator.java :



        double factor = (ts - lastTimeStamp) / 1000;



Proper casting should be done before the integer division