Incompatible types of expression and result type thrown in codegen