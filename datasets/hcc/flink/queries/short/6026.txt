Return type of flatMap with lambda function not correctly resolved