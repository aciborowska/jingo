Non-deterministic function could break retract mechanism