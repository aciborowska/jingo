PersistedAppendingBuffer state primitive has incorrect contracts for view() method