java.lang.ArrayIndexOutOfBoundsException Error reading state