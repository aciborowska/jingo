Fix iteration head merging logic