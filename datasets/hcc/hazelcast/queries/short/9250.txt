Problems with timeout in blocking calls