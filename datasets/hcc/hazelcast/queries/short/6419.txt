TransactionalMapProxySupport::replaceIfSameInternal method keeps key locked even if the replace did not succeed