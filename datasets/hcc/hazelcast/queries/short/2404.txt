3.2.1 regression: nested transactions are not caught and prevented.