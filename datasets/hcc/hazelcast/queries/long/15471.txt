https://github.com/hazelcast/hazelcast/blob/ff87cd9547a671c6ef67d7db6f21b0aeefcae227/hazelcast/src/main/java/com/hazelcast/client/impl/protocol/ClientMessageWriter.java#L55

If writeOffset== -1 and bytesWritable < SIZE_OF_FRAME_LENGTH_AND_FLAGS, we don't enter if case, writeOffset is still -1

------------------------------------------------------------------------------------------------------------

```java
        if (writeOffset == -1 && bytesWritable >= SIZE_OF_FRAME_LENGTH_AND_FLAGS) {
            Bits.writeIntL(dst, dst.position(), frameContentLength + SIZE_OF_FRAME_LENGTH_AND_FLAGS);
            dst.position(dst.position() + Bits.INT_SIZE_IN_BYTES);

            if (isLastFrame) {
                Bits.writeShortL(dst, dst.position(), (short) (frame.flags | IS_FINAL_FLAG));
            } else {
                Bits.writeShortL(dst, dst.position(), (short) frame.flags);
            }
            dst.position(dst.position() + Bits.SHORT_SIZE_IN_BYTES);
            writeOffset = 0;
        }
```

Then it throws exception on line : 

https://github.com/hazelcast/hazelcast/blob/ff87cd9547a671c6ef67d7db6f21b0aeefcae227/hazelcast/src/main/java/com/hazelcast/client/impl/protocol/ClientMessageWriter.java#L88


```
java.lang.IndexOutOfBoundsException
    at java.nio.Buffer.checkBounds(Buffer.java:567)
    at java.nio.HeapByteBuffer.put(HeapByteBuffer.java:187)
    at com.hazelcast.client.impl.protocol.ClientMessageWriter.writeFrame(ClientMessageWriter.java:88)
    at com.hazelcast.client.impl.protocol.ClientMessageWriter.writeTo(ClientMessageWriter.java:36)
    at com.hazelcast.client.impl.protocol.util.ClientMessageEncoder.onWrite(ClientMessageEncoder.java:58)
    at com.hazelcast.internal.networking.nio.NioOutboundPipeline.process(NioOutboundPipeline.java:276)
    at com.hazelcast.internal.networking.nio.NioThread.processSelectionKey(NioThread.java:369)
    at com.hazelcast.internal.networking.nio.NioThread.processSelectionKeys(NioThread.java:354)
    at com.hazelcast.internal.networking.nio.NioThread.selectLoop(NioThread.java:280)
    at com.hazelcast.internal.networking.nio.NioThread.run(NioThread.java:235)
```