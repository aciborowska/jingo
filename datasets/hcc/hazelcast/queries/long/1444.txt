Hi,
moving from hazelcast 3.1.3 from hazelcast 2.6 I find out 2 things in the SocketInterceptor that I believe are not correct:

1) SmartClientConnectionManager line 77 I think should be
            if (!(implementation instanceof SocketInterceptor)) {
    and not
            if (!(implementation instanceof MemberSocketInterceptor)) {

   This because we are in the client side and the only method we are intersting in is on Connect.

2) Using MemberSocketInterceptor also for the client side, the onConnect() Method on the client side and the onAccept() method on the server client are called more then once. To see this you can run a simple example:

CLIENT:

public class Client1 {
    public static void main(String[] args) {
        List<String> address=new ArrayList<String>();
        address.add("192.168.1.94:5701");
        ClientConfig cc=new ClientConfig();
        cc.setAddresses(address);
        SocketInterceptorConfig sc=new SocketInterceptorConfig();
        sc.setEnabled(true);
        sc.setClassName(InterceptorClient.class.getName());
        cc.setSocketInterceptorConfig(sc);
        HazelcastClient.newHazelcastClient(cc);  
    }  
}

CLIENT INTERCEPTOR:

public class InterceptorClient implements MemberSocketInterceptor{

```
@Override
public void init(Properties properties) {
    // TODO Auto-generated method stub

}

@Override
public void onConnect(Socket connectedSocket) throws IOException {
    System.out.println("CLINET ON CONNECT");

}

@Override
public void onAccept(Socket acceptedSocket) throws IOException {
    System.out.println("CLINET ON CONNECT");        
}
```

}

SERVER:

public class Node1 {
    public static void main(String[] args) {
        Config config = new Config();
        SocketInterceptorConfig sc = new SocketInterceptorConfig();
        sc.setEnabled(true);
        sc.setClassName(InterceptorMember.class.getName());
        config.getNetworkConfig().setSocketInterceptorConfig(sc);
        Hazelcast.newHazelcastInstance(config);
    }
}

SERVER INTERCEPTOR
public class InterceptorMember implements MemberSocketInterceptor{

```
@Override
public void init(Properties properties) {
    // TODO Auto-generated method stub

}

@Override
public void onConnect(Socket connectedSocket) throws IOException {
    System.out.println("MEMBER ON CONNECT");

}

@Override
public void onAccept(Socket acceptedSocket) throws IOException {
    System.out.println("MEMBER ON ACCEPT");     
}
```

}
