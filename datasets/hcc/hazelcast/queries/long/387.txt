I'm aware that Hazelcast has some troubles with OSGi right now but I would like to know if there is a workaround to properly setup the classloader for queries as there are for standard map access (e.g. set the TCCL):

The snippet below works properly and the MyObject is properly de-serialized:

``` java
        ClassLoader ccl = Thread.currentThread().getContextClassLoader();
        ClassLoader cl  = getMyClassLoader();

        Thread.currentThread().setContextClassLoader(cl);

        MyObject data = mymap.get(id);

        Thread.currentThread().setContextClassLoader(ccl);
```

The snipped below instead does not work and raises the exception NoClassDefFound:

``` java
        ClassLoader ccl = Thread.currentThread().getContextClassLoader();
        ClassLoader cl  = getMyClassLoader();

        Thread.currentThread().setContextClassLoader(cl);

        Collection<Object> vals = cache.values(new SqlPredicate("..."));

        Thread.currentThread().setContextClassLoader(ccl);
```

from (https://groups.google.com/forum/#!topic/hazelcast/uqLkVd09ywA)
