I have add an atomic cas test, under migration conditions, to our Jenkins nightly builds
https://hazelcast-l337.ci.cloudbees.com/view/migration/job/atomic/

this run Failed Validation
https://hazelcast-l337.ci.cloudbees.com/view/migration/job/atomic/1/console

```
HzMember1HZ validate hz.atomic.validate.CasAssert threadId=0 global.AssertionException: atomic[atomic2=1937222] atomic[atomic-expected2=1937220] 
```

A link to the Full logs, config, setting, go script of the failing run.
http://54.87.52.100/~jenkins/workspace/atomic/3.7.1/2016_09_05-11_41_21/

As a note:   `I have also observed passing run on rare occasion`

quote

```
it can be that e.g. an operation gets executed multiple times
```

this lines up with my observation that
the assertion `atomic[atomic2=1937222] atomic[atomic-expected2=1937220]`
the value in the atomic variable is all ways more, that the expected value

From the Logs of Member1 which performs the validation.

```
global.AssertionException: atomic[atomic2=1937222] atomic[atomic-expected2=1937220]
    at hz.atomic.validate.CasAssert.timeStep(CasAssert.java:18)
```

and

```
atomic[atomic0=1885983] atomic[atomic-expected0=1885983]
atomic[atomic1=1926353] atomic[atomic-expected1=1926353]
atomic[atomic2=1937222] atomic[atomic-expected2=1937220]
atomic[atomic3=1869513] atomic[atomic-expected3=1869509]
atomic[atomic4=2082914] atomic[atomic-expected4=2082912]
```

we can see some of the atomic lock are passing validation.

i see the same issue for an Ilock test under the same conditions.

The PRD to solve this issue is hear.
https://hazelcast.atlassian.net/wiki/display/PM/%5BSB%5D+Write+Consistency+Improvements+Research

A link to the setting and configuration of the test
https://github.com/Danny-Hazelcast/hzCmd-bench/tree/beta/lab/hz/migration/atomic

A link to source code of units performing the test
https://github.com/Danny-Hazelcast/hzCmd-bench/blob/beta/src/main/java/hz/atomic/validate/Cas.java
and validation
https://github.com/Danny-Hazelcast/hzCmd-bench/blob/beta/src/main/java/hz/atomic/validate/CasAssert.java
