Is posted this on the mailing list but I got impatient and decided to create an issue: https://groups.google.com/d/msg/hazelcast/WiA1xOYf-ys/ZAlytzRAGyoJ

While investigating https://github.com/hazelcast/hazelcast/issues/5209 I was curious why the hearbeat doesn't repair the channel that stops working.

Although I don't have a test case (since it is hard to duplicate simply) when looking through the code it appears that the heartbeat only repairs a channel if the current node is the master [0] or if the node a slave is checking the heartbeat against is the master [1].  Perhaps I'm missing something?

It appears that this is why my channel doesn't self repair when it gets in the messed up state like the state in https://github.com/hazelcast/hazelcast/issues/5209.

Thoughts?

Mike

[0] https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/cluster/impl/ClusterServiceImpl.java#L344

[1] https://github.com/hazelcast/hazelcast/blob/master/hazelcast/src/main/java/com/hazelcast/cluster/impl/ClusterServiceImpl.java#L391
