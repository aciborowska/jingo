While trying to setup Hazelcast on AWS I got a strange NullPointerException:

```
Caused by: java.lang.NullPointerException: null
        at com.hazelcast.partition.membergroup.SPIAwareMemberGroupFactory.createInternalMemberGroups(SPIAwareMemberGroupFactory.java:59)
```

Digging a little bit lead me to the Node class, line 209. There the PartitionService is initialized with the yet-uninitialized node. A few calls up the stack, through PartitionStateManager, there's a call to node.getDiscoveryService() which at this stage returns null and hence the SPIAwareMemberGroupFactory is initialized with a null discovery service. This is rather unfortunate, as it means practically Hazelcast is not working in this setup (SPI discovery).