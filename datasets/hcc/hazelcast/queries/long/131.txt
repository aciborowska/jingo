It compares the result of comparison to absolute values -1, and 1. This doesn't work with even String's compareTo implementation. Only the sign should be checked, not the absolute values. The function should be replaced with the following implementation:

```
    protected boolean doApply(Object first, Object second) {
        int result = ((Comparable) first).compareTo(second);
        return equal && result == 0 || (less ? (result < 0) : (result > 0));
    }
```
