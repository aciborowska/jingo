Version: Community Edition 3.1.3.

If the memory-limit setting is set to 0 and a client is polling when a value is offered to the queue the poll method will return null.  Subsequent calls to poll will return null even though the queue is not empty. In addition if the memory-limit is less than the max-size  (e.g. change memory-limit to 5 in below example), the client poll method will return null when 5 items are in the queue. (ie in run.bat offer 10 items to fill queue, then run client.  Client will remove five items and then call loadAll on QueueStore successfully.  Client poll will then return null).

Queue configuration:

```
<queue name="test">
    <max-size>10</max-size>
    <backup-count>1</backup-count>
    <async-backup-count>0</async-backup-count>
    <empty-queue-ttl>-1</empty-queue-ttl>
    <queue-store>
        <class-name>com.test.OracleQueueStore</class-name>
        <properties>
            <property name="binary">false</property>
            <property name="memory-limit">0</property>
            <property name="bulk-load">100</property>
        </properties>
    </queue-store>
</queue>
```

Client code:

ClientConfig clientConfig = ClientConfig();
clientConfig.addAddress("127.0.0.1");
HazelcastInstance client =  HazelcastClient.newHazelcastClient(clientConfig);
while (true) {
       TransactionContext context = client.newTransactionContext();
       context.beginTransaction();

```
   try
   {
      TransactionalQueue<String> queue = context.getQueue("test");   
      String queue_data = queue_.poll( 60, TimeUnit.SECONDS );
      if (queue_data == null) {
        System.out.println("Null returned. Rolling back transaction");
        context.rollbackTransaction();
        break;
      }
       context.commitTransaction();
   }
   catch(Throwable t)
   {
     System.out.println("Rolling back transaction");
     context.rollbackTransaction();
   }
```

   }  /\* end while(true) loop */

Single instance of server run with following:

java -cp ../lib/hazelcast-3.1.3.jar;../lib/ojdbc6.jar;../lib/ucp.jar;../lib/orac
le-queue-store.jar com.hazelcast.examples.TestApp
