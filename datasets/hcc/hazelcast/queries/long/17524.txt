copied from: https://groups.google.com/d/msgid/hazelcast/43ee9f18-8b51-4fa6-b92a-768ac99ee56en%40googlegroups.com

Upgrading hazelcast from 3.12 to 4.0.2 and while doing so (after migrating api changes) I starting to see a lot of NPE:
```
2020-09-08 16:44:34,500 [ERROR] (n.thread-5) com.hazelcast.map.impl.query.QueryOperation    - [10.192.35.235]:5702 [pfe-standard_v15] [4.0.2] null
java.lang.NullPointerException: null
	at com.hazelcast.query.impl.BaseIndexStore$ExpirationAwareHashMapDelegate.size(BaseIndexStore.java:205)
	at com.hazelcast.query.impl.SingleResultSet.size(SingleResultSet.java:61)
	at com.hazelcast.query.impl.AbstractIndex.getRecords(AbstractIndex.java:186)
	at com.hazelcast.query.impl.GlobalQueryContextWithStats$QueryTrackingIndex.getRecords(GlobalQueryContextWithStats.java:148)
	at com.hazelcast.query.impl.predicates.EqualPredicate.filter(EqualPredicate.java:69)
	at com.hazelcast.query.impl.Indexes.query(Indexes.java:337)
	at com.hazelcast.map.impl.query.QueryRunner.runUsingGlobalIndexSafely(QueryRunner.java:246)
	at com.hazelcast.map.impl.query.QueryRunner.runIndexOrPartitionScanQueryOnOwnedPartitions(QueryRunner.java:121)
	at com.hazelcast.map.impl.query.QueryOperation.callInternal(QueryOperation.java:89)
	at com.hazelcast.map.impl.query.QueryOperation.call(QueryOperation.java:78)
	at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.call(OperationRunnerImpl.java:227)
	at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:216)
	at com.hazelcast.spi.impl.operationservice.impl.OperationRunnerImpl.run(OperationRunnerImpl.java:422)
	at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:166)
	at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.process(OperationThread.java:136)
	at com.hazelcast.spi.impl.operationexecutor.impl.OperationThread.run(OperationThread.java:123)
```
Map is configured to use a HASH index:
addIndexConfig(new IndexConfig(IndexType.HASH, "userId"))

if changing this to IndexType.BITMAP the NPE goes away, but as the index is not low cardinality (from the docs) so it does not make sense using it.

I tried a day or more to create a reproducer, but have not managed to do so.