I'm currently using a map where I basically do two different operations on. One is to get the current data, modify it and put it back. The second one is read the current value and then remove it. Both of these operations are performed with a lock on the given key.

On the map there are also listeners listening on different keys. After doing the get and remove operation, the listener stop getting called on that key. Furthermore, adding a new listener on that key will not work either.

If I either remove the lock and unlock from the remove operation or don't call remove and only get the current value, everything works just fine (except that I don't get the intended behaviour for the application). Adding either of them makes the listener not working.
