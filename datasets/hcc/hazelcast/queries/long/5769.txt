I came across to issue when fixing https://github.com/hazelcast/hazelcast/issues/5694 . 
I added invalidation for key based events. Since adding invalidation for map.clear requires more change on server side, I leave it as is for now. Sample failing test is as follows

```
 @Test
    public void testNearCacheInvalidation_withClear() {
        hazelcastFactory.newHazelcastInstance();
        ClientConfig config = getClientConfigWithNearCacheInvalidationEnabled();
        HazelcastInstance client1 = hazelcastFactory.newHazelcastClient(config);
        HazelcastInstance client2 = hazelcastFactory.newHazelcastClient(config);

        String mapName = randomString();
        final ReplicatedMap replicatedMap1 = client1.getReplicatedMap(mapName);


        replicatedMap1.put(1, 1);
        //puts key 1 to near cache
        replicatedMap1.get(1);

        final ReplicatedMap replicatedMap2 = client2.getReplicatedMap(mapName);
        //This should invalidate near cache of replicatedMap1
        replicatedMap2.clear();


        assertTrueEventually(new AssertTask() {
            @Override
            public void run() throws Exception {
                assertEquals(null, replicatedMap1.get(1));
            }
        });
    }

```
