We are seeing an issue where if more than one item is stored in the map, with a TTL of 1 second and a write-behind of 1 second, in the same transaction then every so often only one of the items are stored. If I debug the MapStore I can see that the MapStoreWrapper is only calling store() and not storeAll() when the issue occurs. Increasing the TTL to a much higher value, such as 10 minutes, and the problem goes away but I’m wondering is there a race condition where an item may be getting evicted but the storage? I’ve tried this with Hazelcast 3.2 and 3.2.1 and have seen the same behaviour.

---

For further information please check this code parts out in SecondsBasedEntryTaskScheduler:
evict calls --> flushComparingTimeKeys
map store calls --> EntryProcessorExecutor
