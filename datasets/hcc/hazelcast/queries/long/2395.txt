We are using a custom class loader in our application. After upgrading to Hazelcast 3.2.1 this causes Hazelcast to throw an IllegalArgumentException: PortableFactory[-23] is already registered! in PortableHookLoader.register().

This is caused by the ServiceLoader returning a set of ServiceDefinitions with duplicate class name entries. This in turn seems to caused by a change in revision 88b8e4d (2014-04-14) where the ServiceDefinition.equals() and ServiceDefinition.hashCode() was changed to include the classLoader as well as the className.

Was this change to ServiceDefinition intended?
