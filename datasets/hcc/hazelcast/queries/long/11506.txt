In some cases the dependency from the hazelcast module isn't shaded in the hazelcast-all module. If running the build separately, first for the hazelcast, then for the hazelcast-all module, the dependency is shaded. But if running them in one multi-module build (when building the repository root), the dependency is not shaded. 
It is possible that the multi-module build does not use the hazelcast artifact from the repository (the shaded one) but instead uses an intermediate one from the build (a non-shaded one).