I tested MultiMap.put(key, value) when another node/thread is possibly holding the key lock, in Hazelcast 2.1.3.

In the test program https://gist.github.com/3224883, each node has
1. A locker thread which locks and unlocks the key at random intervals.
2. A putter thread which puts values to the key at random intervals, and counts the number of success and failures.

At the end, the map size is expected to equal the sum of success counts. However, the actual result is

node 1.
    successCount=72
    failureCount=0
node 2.
    successCount=45
    failureCount=31
node 3.
    successCount=40
    failureCount=0
final mapSize=116

41 (=72+45+40-116) values are lost. Besides, the failure counts in 2 nodes are 0, which is statistically impossible.
