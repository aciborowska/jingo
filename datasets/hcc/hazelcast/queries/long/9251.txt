In case of retries, it can be that an invocation still has a lastHeartbeatReceived from a previous attempt. When the invocation mechanism kicks in, it checks if the lasthearbeatReceved is 0; if so... then it works based on the invocation time. When the lasthearbeatReceved is set, it will determine based on this lasthearbeatReceved the heartbeat timeout. But this causes problems when a old heartbeat is set and therefor not 0.

To fix the problem. instead of checking lastHeartbeatReceived = 0, it checks if lastHeartbeatReceived < operation.invocationTime.

See https://github.com/hazelcast/hazelcast/pull/9286
