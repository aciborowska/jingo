I found this regression which was introduced in https://github.com/micronaut-projects/micronaut-core/pull/2371: `GroovyVisitorContext.getClassElement(String)` will only return non-empty result for classes from current compilation unit. Any other class from compilation classpath will yield empty result, so a proper solution would be falling back to old piece of code:
```java
            GroovyClassLoader classLoader = sourceUnit.getClassLoader();	
            if (classLoader != null) {	
                return ClassUtils.forName(name, classLoader).map(aClass -> {	
                    ClassNode cn = ClassHelper.make(aClass);	
                    return new GroovyClassElement(sourceUnit, cn, AstAnnotationUtils.getAnnotationMetadata(sourceUnit, cn));	
                });	
            }
```

In particular this breaks `PersistenceContextAnnotationMapper` because it checks for the presence of `@CurrentSession`.