follwing code will cause infinite loop:
		ConfigurationFactoryBean cfactory = new 
ConfigurationFactoryBean();
		cfactory.setRegisterUrlHandler(true);
		cfactory.afterPropertiesSet();
		System.out.println("cfactory configured");
		cfactory.getObject();
		System.out.println("configuration retrieved from cfactory");
		FileSystem fs = FileSystem.newInstance(cfactory.getObject());
		System.out.println("filesystem instance created");
here is output:
12/07/10 10:42:55 INFO configuration.ConfigurationFactoryBean: Registered HDFS URL stream handler
cfactory configured
configuration retrieved from cfactory
Exception in thread "main" java.lang.StackOverflowError
        at java.lang.String.startsWith(String.java:1462)
        at sun.misc.MetaIndex.mayContain(MetaIndex.java:243)
        at sun.misc.URLClassPath$JarLoader.getResource(URLClassPath.java:761)
        at sun.misc.URLClassPath.getResource(URLClassPath.java:185)
        at sun.misc.URLClassPath.getResource(URLClassPath.java:237)
        at java.lang.ClassLoader.getBootstrapResource(ClassLoader.java:1113)
        at java.lang.ClassLoader.getResource(ClassLoader.java:974)
        at java.lang.ClassLoader.getResource(ClassLoader.java:972)
        at java.lang.ClassLoader.getResource(ClassLoader.java:972)
        at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1159)
        at javax.xml.parsers.SecuritySupport$4.run(SecuritySupport.java:94)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.xml.parsers.SecuritySupport.getResourceAsStream(SecuritySupport.java:87)
        at javax.xml.parsers.FactoryFinder.findJarServiceProvider(FactoryFinder.java:248)
        at javax.xml.parsers.FactoryFinder.find(FactoryFinder.java:221)
        at javax.xml.parsers.DocumentBuilderFactory.newInstance(DocumentBuilderFactory.java:121)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1522)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2241)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2103)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:284)
        at org.apache.hadoop.fs.FsUrlConnection.connect(FsUrlConnection.java:49)
        at org.apache.hadoop.fs.FsUrlConnection.getInputStream(FsUrlConnection.java:60)
        at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
        at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177)
        at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:1555)
        at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:1506)
        at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:1452)
        at org.apache.hadoop.conf.Configuration.get(Configuration.java:581)
        at org.apache.hadoop.security.UserGroupInformation.initUGI(UserGroupInformation.java:240)
        at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:223)
        at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:214)
        at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:275)
        at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:497)
        at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:480)
        at org.apache.hadoop.fs.FileSystem$Cache$Key.<init>(FileSystem.java:2249
— etc –