DetachedEntityState.flushDirty() clears all dirty flags (clearDirty()) before the value is successfully saved with delegate.setValue(...). When an exception occurs during setting some property values of this entity, the entity is not dirty anymore, but also not persisted.