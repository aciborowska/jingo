When using a DefaultWsdl11Definition for wsdl generation I used a CommonsXsdSchemaCollection to combine a set of xsd's. I found out that when a schema uses a mix of xs:imports and xs:includes, the inline schema in the generated wsdl (inside <wsdl:types>) contains an error. Both xs:imports and xs:includes are 'expanded' inline in the generated wsdl, but the xs:include lines are not removed from the inline schema, causing test tools like SOAPUI to fail (included schema's cannot be retrieved).