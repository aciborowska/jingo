Stack overflow when using self-bounded generics