query on view with CTE and alias fails with table not found error