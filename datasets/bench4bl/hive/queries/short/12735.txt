Constant folding for WHEN/CASE expression does not set return type correctly