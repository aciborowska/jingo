see HIVE-14589.
Basic idea (spent about 7 minutes thinking about this based on RB comment ) is to return locations for all slots to HostAffinitySplitLocationProvider, the missing slots being inactive locations (based solely on the last slot actually present). For the splits mapped to these locations, fall back via different hash functions, or some sort of probing.
This still doesn't handle all the cases, namely when the last slots are gone (consistent hashing is supposed to be good for this?); however for that we'd need more involved coordination between nodes or a central updater to indicate the number of nodes