CREATE TABLE test(
  id int, 
  msg string)
PARTITIONED BY ( 
  continent string, 
  country string)
CLUSTERED BY (id) 
INTO 10 BUCKETS
STORED AS ORC;
alter table test add partition(continent='Asia',country='India');
in hive-site.xml:
hive.txn.manager=org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;
hive.support.concurrency=true;
in hive shell:
set hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;
insert into test table some records first.
then execute sql:
insert overwrite table test partition(continent='Asia',country='India') select id,msg from test;
the log stop at :
INFO log.PerfLogger: <PERFLOG method=acquireReadWriteLocks from=org.apache.hadoop.hive.ql.Driver>
i think it has dead lock when insert overwrite table from it self.