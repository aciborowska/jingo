Local Mapreduce task will be spawned a child jvm where HADOOP_CLASSPATH variable will not be exported if Hive is started as a windows service. The fix is to introduce a new hive parameter which should be passed as part of hiveserver script. This new parameter should be parsed in MapRedLocalTask and added to the system variables.