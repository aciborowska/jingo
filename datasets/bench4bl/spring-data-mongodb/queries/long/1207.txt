Seems that org.springframework.data.mongodb.core.MongoTemplate#doInsertAll(Collection, MongoWriter) throws NullPointerException s when the passed Collection contains null items. That's because it's trying to get item's MongoPeristentEntity by getting its class.
I'm planning to fix this by creating a PR on GitHub. In my opinion, the best approach would be an early return in the for loop.