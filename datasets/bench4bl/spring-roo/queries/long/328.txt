If a user creates a Roo project and then performs a push-in refactor of all ITD types, Roo will report an error if the user has not yet deleted the @RooEntity annotation(s) from the target types. The error is cleared when @RooEntity is deleted as this indicates to Roo to no longer attempt to introduce an EntityManager field. This is a bug because Roo should always default to a "hands off" approach if the user has already defined a given member in the target type.
Exception fragment:






Method 'entityManager' already defined in target type 'com.foo.Food' (ITD target 'com.foo.Food_Roo_Entity')




java.lang.IllegalArgumentException: Method 'entityManager' already defined in target type 'com.foo.Food' (ITD target 'com.foo.Food_Roo_Entity')




    at org.springframework.roo.support.util.Assert.isNull(Assert.java:89)




    at org.springframework.roo.classpath.details.DefaultItdTypeDetailsBuilder.addMethod(DefaultItdTypeDetailsBuilder.java:93)




    at org.springframework.roo.addon.entity.EntityMetadata.<init>(EntityMetadata.java:143)




    at org.springframework.roo.addon.entity.EntityMetadataProvider.getMetadata(EntityMetadataProvider.java:73)





