The getFormattedDomainResult isn't processing nested composites correctly. It takes the response for the top level step and passes it into the HostControllerExecutionSupport for that step. That's fine for the simple response variants of HostControllerExecutionSupport, which just return the passed in node. But it fails if the support for that step is in turn MultiStepOpExecutionSupport, as it is expecting a response node's 'result' child, not the outer response node itself.
Solution is to detect this, clone the outer response node, and pass it's 'result' child into the child MultiStepOpExecutionSupport, replacing the outer response node's 'result' with the return value.