Currently, using jboss-cli.sh with (for example) -Djboss.server.base.dir=/foo/bar, then starting an embedded server ignores the specified base dir.
This should be used in the same way as standalone currently does, as should the rest of the commonly passed properties (log.dir etc etc).