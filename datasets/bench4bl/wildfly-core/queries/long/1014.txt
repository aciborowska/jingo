The deployment scanner doesn't properly consider the  result outcome of its read child operation during getDeploymentsStatus().  This has bad consequences if the operation fails, for instance due to an OOME or possibly some other unexpected exception.
The operation catches the exception and returns an empty result.  The deployment scanner misinterprets that empty result to mean there are no applications deployed and sets .undeployed marker files for all of them.  The deployment scanner should confirm if the operation was a success or not so we can avoid potential side effects of undeployed applications from an OOME.