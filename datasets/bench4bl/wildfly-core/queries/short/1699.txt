Inefficient usage of map iterators