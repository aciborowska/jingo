The detectValidationMode method in the XmlBeanDefinitionReader scans the first MAX_PEEK_LINES (= 5) for a doctype definition in the xml file to detect wheter a dtd is used or a schema. Now, this static setting of 5 lines is usually to low for xml documents having a licence header at the top of the file. So although the document has a dtd (in line 10 or so), spring assumes it's using the schema which then results in parsing errors.
One solution would be to decrease the MAX_PEEK_LINES to a much higher value like 20 or so, but this would even fail if the header has more lines than this setting. So I think, a "real xml scan" would be best which skips all comments and scans until the first element in the document.
If you think that this is the way to go, I can come up with a patch