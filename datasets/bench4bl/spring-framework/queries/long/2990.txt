The documentation for the setProtocol() method in JavaMailSender says that the default is "SMTP", while in fact it is "smtp".
If you set this attribute explicitly to "SMTP", expecting the behavior to match the default behavior, you actually get a NoSuchProviderException.