When lazy-init is enabled for a bean, the proxy created in MBeanExporter::registerLazyInit hides annotations, thus it fails to retrieve them afterwards and the MetaDataNamingStrategy blows up with a cryptic message saying that: "Your bean class [xxxxx] must be marked with a valid ManagedResource attribute when using MetadataNamingStrategy"
I'm probably be missing something here, but I'm not sure that the solution to solve this problem is crystal-clear.
If we build a proxy in some way that would mean we should also inherit all annotations of the proxied class and/or eventually be able to override them. However there's nothing in Spring to be able to do so AFAIK and we can see here that we're already going through a slippery path
So the question is: is this supposed to work with proxies ?