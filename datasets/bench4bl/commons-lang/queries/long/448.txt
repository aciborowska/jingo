I have an XML files which sometimes contain control characters like 0x0c, or 0x18. These aren't allowed to be directly in the file (the validator fails with invalid character), so they need to be escaped.
When using "StringEscapeUtils.escapeXml(String str)", which in turn uses "Entities.escape(Writer writer, String str)", these characters don't get escaped. Only characters above 0x7F get escaped.
I fixed this bug, and attached a patch.