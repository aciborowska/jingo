File writers do not behave correctly on rollback