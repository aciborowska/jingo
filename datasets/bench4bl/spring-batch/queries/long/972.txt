We want to modify the ExitStatus of a JobExecution depending on the ExitStati of its StepExecutions. We have introduced several additional ExitStati which symbolize different outcomes of a StepExecution, e.g. the Step completed successfully but some tolerateable errors occured. So, when there are two steps in the Job, one completes without any issues and one that has such a tolerateable error, the job should have the ExitStatus which indicates that there was a tolerateable error.
We therefore implemented a JobExecutionListener that iterates over all StepExecutions of the Job in the afterJob() method and determines the right ExitStatus for the whole Job. This works fine if the last StepExecution has the right ExitStatus. Otherwise the last StepExecution defines the outcome of the whole Job.
We think that the reason for this behaviour can be found in line 137 of SimpleJob. There we can see that the ExitStatus of the last StepExecution is used to set the ExitStatus of the JobExecution.