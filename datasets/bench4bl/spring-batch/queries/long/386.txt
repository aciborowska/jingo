Hibernate failure job relies on funky flush logic.  This should be analysed at least to see if the ItemWriter.flush() contract really makes sense.  The problem is the HibernateAwareItemWriter needs access to the processed items during a flush(), but they are stored in RepeatContext which isn't available in the call to ItemWriter.flush().