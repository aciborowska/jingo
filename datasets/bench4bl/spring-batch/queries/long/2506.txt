AutomaticJobRegistrar implements ApplicationListener<ApplicationEvent> but its only actually interested in events that are subclasses of ApplicationContextEvent. An unwanted side-effect of it listening to all ApplicationEvents is that it can be instantiated very early. In the situation described in this Spring Boot issue that can lead to a failure as ModularBatchConfiguration.jobRegistrar is called before ModularBatchConfiguration has been fully initialized.
The problem can be avoided by tightening up the signature so that AutomaticJobRegistrar implements ApplicationListener<ApplicationEvent>. I've implemented this change and tested it against the reproduction in the Boot issue. It resolves the problem. Pull request to follow.