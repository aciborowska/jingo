The protected decompose and performHouseholderReflection methods in QRDecomposition act on the qr matrix set by the constructor, not whatever matrix is supplied as actual parameter.  For 3.x, the javadoc should be updated to indicate that the actual parameter is ignored. For 4.0, the parameters should be removed.  Alternatively, implementations could be changed to act on the arguments.