bracket function gives up too early 