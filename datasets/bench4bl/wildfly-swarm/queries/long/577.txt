When building a wildfly-swarm project with gradle and providing a main() method for it, running the generated swarm jar works just as expected. However, when running from the IDE, a couple problems occur. 
The first one is dependency-related, and is discussed in SWARM-542. The second problem is that after loading all dependencies, if you provide the properties as described in the mentioned issue, the behavior from the main method is different from expected. 
This has been posted here: https://groups.google.com/forum/#!topic/wildfly-swarm/cR8vf1Jzbt8 
An example project with code to reproduce can be found here: https://github.com/jorgebsa/swarm-main-error-gradle