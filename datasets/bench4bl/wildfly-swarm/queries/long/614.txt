I first ran into the issue described in SWARM-483 which was caused by duplicate camel jars so the recommended workaround was to use <packagingExcludes> tag to exclude WEB-INF/lib/*.jar when building war.
However, that has the side effect that other jars that my application depends on are also excluded from the war and then even when they are included in m2repo folder in -swarm.jar and listed in META-INF/wildfly-swarm-application.conf and META-INF/wildfly-swarm-dependencies.conf.
Duplicate jar's on the classpath is a known source for troubles, hence the normal should be to not have anything in WEB-INF/lib in a war, and instead load the dependencies as listed in META-INF/wildfly-swarm-dependencies.conf to ensure they are present only once.
After some more investigation I see that I get the same result if I build my application as a jar, dependencies listed in pom.xml and included in the -swarm.jar are not available in the application and causes NoClassDefFoundError.