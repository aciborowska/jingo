JpaPersistentProperty.isEntity() is defined to return true if the actual property type is an entity. So Collection and Map types need to inspect the component and value types. It's probably safe to simply rely on getActualType() here.