In Lettuce, connection.exec() returns a empty List instead of a null value if a watched key is modified before exec.  This causes compareAndSet to always return true.
Issue filed with Lettuce: https://github.com/wg/lettuce/issues/9