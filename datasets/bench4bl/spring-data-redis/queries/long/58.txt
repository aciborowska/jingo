The current subscription implementations allow the subscription to be used after it was closed. This should be fixed. In addition the channel/pattern raw content needs to be wrapped to be properly compared when used in a collection.