TypeDiscoverer.getMapValueType causes ArrayIndexOutOfBoundsException in some cases