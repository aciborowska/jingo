Custom repository implementation class not working as stated in the reference documentation