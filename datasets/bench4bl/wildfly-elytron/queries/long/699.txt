The client should be using the userInfo from the connection URI in preference to anonymous authentication if that information is present.  The challenge is that the API does not presently require a URI to be given when getting the authentication principal.