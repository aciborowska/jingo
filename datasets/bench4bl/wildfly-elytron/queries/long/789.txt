The UnaryOperator is supposed to offer a final override configuration so needs to wrap the inner factory not the outer one as the outer one already has configuration based modifications applied to it so the effect of the UnaryOperator is ignored.