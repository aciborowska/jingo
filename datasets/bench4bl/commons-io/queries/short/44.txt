[io] Enhance LockableFileWriter to handle different character endocings.