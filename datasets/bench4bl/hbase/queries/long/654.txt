It seems like HTable.getMetadata().addFamily could be used to add a column family to an existing table, but actually it doesn't do anything (I'm guessing it just modifies the client data structure).  HTable.getMetadata() should probably return a read-only version of the HTableDescriptor to prevent programmers from making this error.