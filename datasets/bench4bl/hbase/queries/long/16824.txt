In https://issues.apache.org/jira/browse/HBASE-12074, we hit an error if an async thread calls flush on a WAL record already closed as the WAL is being rotated. This JIRA investigates if setting the new WAL record path as the first operation during WAL rotation will fix the issue.