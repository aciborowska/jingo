If hbase.regionserver.global.memstore.upperLimit or lowerLimit are present we should use them instead of hbase.regionserver.global.memstore.size or hbase.regionserver.global.memstore.size.lower.limit respectively. The current implementation of HeapMemorySizeUtil.getGlobalMemStorePercent() and getGlobalMemStoreLowerMark() asumes that if the new properties are not defined then we should use the old configurations, however the new properties are defined in hbase-default.xml which makes the old configuration names useless and this has a direct impact when doing a rolling upgrade and hbase-site.xml hasn't been changed to handle the new property names exclusively.