src/saveVersion.sh assumes shell understands the extended [[ ]] test construct.  Standard Bourne doesn't include this syntax and some system /bin/sh versions are not bash - example is dash used as /bin/sh on Debian/Ubuntu.
Sync with Hadoop core sh/saveVersion.sh to pull in the regular test syntax and other updates ("none" SCM, branch version, et al).