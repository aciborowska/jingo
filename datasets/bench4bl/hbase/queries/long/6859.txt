See the mailing list.  Search for "Confused about the process of handle BADVERSION at setData() method in RecoverableZookeeper.java".  Kaka Chen spotted error in id compare.  Mighty Liyin confirms it an issue.  Its in 89fb and in trunk.
Liyin, I assigned you.  Let it go if you don't have time... np.