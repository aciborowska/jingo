When bucket cache use FileIOEngine, it will rebuild the bucket allocator's data structures from a persisted map. So it should first read the map from persistence file then use the map to new a BucketAllocator. But now the code has wrong sequence in retrieveFromFile() method of BucketCache.java.



      BucketAllocator allocator = new BucketAllocator(cacheCapacity, bucketSizes, backingMap, realCacheSize);

      backingMap = (ConcurrentHashMap<BlockCacheKey, BucketEntry>) ois.readObject();


